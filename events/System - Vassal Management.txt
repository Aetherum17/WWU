namespace = wwu_subject_management

#-------------------------
# Adminstration of X
#-------------------------
country_event = {
	id = wwu_subject_management.1
	title = wwu_subject_management.1.title
	desc = wwu_subject_management.1.desc
	picture = GATHER_YOUR_PARTY_eventPicture
	
	is_triggered_only = yes
    
    # Subject Contract
	option = {
		name = wwu_subject_management.1.option.subject_contract
        
        country_event = { id = wwu_subject_management.2 }
	}
    
    # Subject Investment
	option = {
		name = wwu_subject_management.1.option.subject_investment
        
        country_event = { id = wwu_subject_management.3 }
	}
    
    # # Subject Assistance
	# option = {
		# name = wwu_subject_management.1.option.subject_assistance
        
        # country_event = { id = wwu_subject_management.4 }
	# }
    
    # # Subject Extraction
	# option = {
		# name = wwu_subject_management.1.option.subject_extraction
        
        # country_event = { id = wwu_subject_management.5 }
	# }
    
    # Exit
    option = {
		name = wwu_subject_management.1.option.exit
        
	}
}

#-------------------------
# Subject Contract
#-------------------------
country_event = {
	id = wwu_subject_management.2
	title = wwu_subject_management.2.title
	desc = wwu_subject_management.2.desc
	picture = EQUALITY_eventPicture
	
	is_triggered_only = yes
    
    # Establish Vassal Contract - VALID
	option = {
		name = wwu_subject_management.2.option.make_vassal
        
        trigger = {
            event_target:current_subject = {
                OR = {
                    is_subject_of_type = march
                    is_subject_of_type = client_march
                    is_subject_of_type = tributary_vassal
                }
            }
            adm_power = 250
        }
        
        add_adm_power = -250
        
        create_subject = {
            subject_type = vassal
            subject = event_target:current_subject
        }
        
        event_target:current_subject = {
            add_liberty_desire = 20
            
            if = {
                limit  = {
                    OR = {
                        is_subject_of_type = march
                        is_subject_of_type = client_march
                    }
                }
                add_liberty_desire = 10
            }
        }
        
        hidden_effect = {
            event_target:current_subject = {
                set_country_flag = ignore_tributary_vassal_event
            }
        }
	}
    # Establish Vassal Contract - INVALID
    option = {
		name = wwu_subject_management.2.option.make_vassal.invalid
        
        trigger = {
            event_target:current_subject = {
                OR = {
                    is_subject_of_type = march
                    is_subject_of_type = client_march
                    is_subject_of_type = tributary_vassal
                }
            }
            NOT = { adm_power = 250 }
        }
        
        custom_tooltip = MAKE_VASSAL_COST_INVALID_TT
	}
    
   # Establish March Contract - VALID
	option = {
		name = wwu_subject_management.2.option.make_march
        
        trigger = {
            event_target:current_subject = {
                OR = {
                    is_subject_of_type = vassal
                    is_subject_of_type = client_vassal
                    is_subject_of_type = tributary_vassal
                }
            }
            adm_power = 250
        }
        
        add_adm_power = -250
        
        create_subject = {
            subject_type = march
            subject = event_target:current_subject
        }
        
        event_target:current_subject = {
            add_liberty_desire = 15
        }
        
        hidden_effect = {
            event_target:current_subject = {
                set_country_flag = ignore_tributary_vassal_event
            }
        }
	}
    # Establish March Contract - INVALID
    option = {
		name = wwu_subject_management.2.option.make_march.invalid
        
        trigger = {
            event_target:current_subject = {
                OR = {
                    is_subject_of_type = vassal
                    is_subject_of_type = client_vassal
                    is_subject_of_type = tributary_vassal
                }
            }
            NOT = { adm_power = 250 }
        }
        
        custom_tooltip = MAKE_MARCH_COST_INVALID_TT
	}
    # Establish Tributary Contract - VALID
	option = {
		name = wwu_subject_management.2.option.make_tributary
        
        trigger = {
            event_target:current_subject = {
                OR = {
                    is_subject_of_type = vassal
                    is_subject_of_type = march
                    is_subject_of_type = client_vassal
                    is_subject_of_type = client_march
                }
            }
            adm_power = 250
        }
        
        add_adm_power = -250
        
        create_subject = {
            subject_type = tributary_vassal
            subject = event_target:current_subject
        }
        
        event_target:current_subject = {
            add_liberty_desire = 15
        }
        
        hidden_effect = {
            event_target:current_subject = {
                set_country_flag = ignore_tributary_vassal_event
            }
        }
	}
    # Establish Tributary Contract - INVALID
    option = {
		name = wwu_subject_management.2.option.make_tributary.invalid
        
        trigger = {
            event_target:current_subject = {
                OR = {
                    is_subject_of_type = vassal
                    is_subject_of_type = march
                    is_subject_of_type = client_vassal
                    is_subject_of_type = client_march
                }
            }
            NOT = { adm_power = 250 }
        }
        
        custom_tooltip = MAKE_TRIBUTARY_COST_INVALID_TT
	}
    
    # Return
    option = {
		name = wwu_subject_management.2.option.return
        
	}
    
    after = {
        hidden_effect = {
            country_event = { id = wwu_subject_management.1 }
        }
    }
}

#-------------------------
# Subject Investment
#-------------------------
country_event = {
	id = wwu_subject_management.3
	title = wwu_subject_management.3.title
	desc = wwu_subject_management.3.desc
	picture = CLOCKWORK_GNOME_eventPicture
	
	is_triggered_only = yes
    
    #------------------
    # Taxation
    #------------------
    # Purchase
	option = {
		name = wwu_subject_management.3.option.taxation
        
        trigger = {
            subject_investment_valid_check = {
                TYPE = taxation
                adm_type = yes
            }
        }
        conduct_subject_investment = {
            TYPE = taxation
            adm_type = yes
        }
	}
    # Lack Gold
    option = {
		name = wwu_subject_management.3.option.taxation.invalid.gold_cost
        
        trigger = {
            subject_investment_lack_gold_check = {
                TYPE = taxation
                adm_type = yes
            }
        }
        subject_investment_lack_gold = {
            TYPE = taxation
                adm_type = yes
        }
	}
    # Lack Power
    option = {
		name = wwu_subject_management.3.option.taxation.invalid.power_cost
        
        trigger = {
            subject_investment_lack_power_check = {
                TYPE = taxation
                adm_type = yes
            }
        }
        subject_investment_lack_power = {
            TYPE = taxation
                adm_type = yes
        }
	}
    # Lack Gold and Power
    option = {
		name = wwu_subject_management.3.option.taxation.invalid.all_cost
        
        trigger = {
            subject_investment_lack_all_check = {
                TYPE = taxation
                adm_type = yes
            }
        }
        subject_investment_lack_all = {
            TYPE = taxation
            adm_type = yes
        }
	}
    # At Max Tier
    option = {
		name = wwu_subject_management.3.option.taxation.invalid.max
        
        trigger = {
            subject_investment_max_check = {
                TYPE = taxation
            }
        }
        custom_tooltip = SUBJECT_IMPROVEMENT_MAX_TT
	}
    
    #------------------
    # Production
    #------------------
    # Purchase
	option = {
		name = wwu_subject_management.3.option.production
        
        trigger = {
            subject_investment_valid_check = {
                TYPE = production
                dip_type = yes
            }
        }
        conduct_subject_investment = {
            TYPE = production
            dip_type = yes
        }
	}
    # Lack Gold
    option = {
		name = wwu_subject_management.3.option.production.invalid.gold_cost
        
        trigger = {
            subject_investment_lack_gold_check = {
                TYPE = production
                dip_type = yes
            }
        }
        subject_investment_lack_gold = {
            TYPE = production
                dip_type = yes
        }
	}
    # Lack Power
    option = {
		name = wwu_subject_management.3.option.production.invalid.power_cost
        
        trigger = {
            subject_investment_lack_power_check = {
                TYPE = production
                dip_type = yes
            }
        }
        subject_investment_lack_power = {
            TYPE = production
                dip_type = yes
        }
	}
    # Lack Gold and Power
    option = {
		name = wwu_subject_management.3.option.production.invalid.all_cost
        
        trigger = {
            subject_investment_lack_all_check = {
                TYPE = production
                dip_type = yes
            }
        }
        subject_investment_lack_all = {
            TYPE = production
            dip_type = yes
        }
	}
    # At Max Tier
    option = {
		name = wwu_subject_management.3.option.production.invalid.max
        
        trigger = {
            subject_investment_max_check = {
                TYPE = production
            }
        }
        custom_tooltip = SUBJECT_IMPROVEMENT_MAX_TT
	}
    
    #------------------
    # Trade
    #------------------
    # Purchase
	option = {
		name = wwu_subject_management.3.option.trade
        
        trigger = {
            subject_investment_valid_check = {
                TYPE = trade
                dip_type = yes
            }
        }
        conduct_subject_investment = {
            TYPE = trade
            dip_type = yes
        }
	}
    # Lack Gold
    option = {
		name = wwu_subject_management.3.option.trade.invalid.gold_cost
        
        trigger = {
            subject_investment_lack_gold_check = {
                TYPE = trade
                dip_type = yes
            }
        }
        subject_investment_lack_gold = {
            TYPE = trade
                dip_type = yes
        }
	}
    # Lack Power
    option = {
		name = wwu_subject_management.3.option.trade.invalid.power_cost
        
        trigger = {
            subject_investment_lack_power_check = {
                TYPE = trade
                dip_type = yes
            }
        }
        subject_investment_lack_power = {
            TYPE = trade
                dip_type = yes
        }
	}
    # Lack Gold and Power
    option = {
		name = wwu_subject_management.3.option.trade.invalid.all_cost
        
        trigger = {
            subject_investment_lack_all_check = {
                TYPE = trade
                dip_type = yes
            }
        }
        subject_investment_lack_all = {
            TYPE = trade
            dip_type = yes
        }
	}
    # At Max Tier
    option = {
		name = wwu_subject_management.3.option.trade.invalid.max
        
        trigger = {
            subject_investment_max_check = {
                TYPE = trade
            }
        }
        custom_tooltip = SUBJECT_IMPROVEMENT_MAX_TT
	}
    
    #------------------
    # Manufacturing
    #------------------
    # Purchase
	option = {
		name = wwu_subject_management.3.option.manufacturing
        
        trigger = {
            subject_investment_valid_check = {
                TYPE = manufacturing
                adm_type = yes
            }
        }
        conduct_subject_investment = {
            TYPE = manufacturing
            adm_type = yes
        }
	}
    # Lack Gold
    option = {
		name = wwu_subject_management.3.option.manufacturing.invalid.gold_cost
        
        trigger = {
            subject_investment_lack_gold_check = {
                TYPE = manufacturing
                adm_type = yes
            }
        }
        subject_investment_lack_gold = {
            TYPE = manufacturing
                adm_type = yes
        }
	}
    # Lack Power
    option = {
		name = wwu_subject_management.3.option.manufacturing.invalid.power_cost
        
        trigger = {
            subject_investment_lack_power_check = {
                TYPE = manufacturing
                adm_type = yes
            }
        }
        subject_investment_lack_power = {
            TYPE = manufacturing
                adm_type = yes
        }
	}
    # Lack Gold and Power
    option = {
		name = wwu_subject_management.3.option.manufacturing.invalid.all_cost
        
        trigger = {
            subject_investment_lack_all_check = {
                TYPE = manufacturing
                adm_type = yes
            }
        }
        subject_investment_lack_all = {
            TYPE = manufacturing
            adm_type = yes
        }
	}
    # At Max Tier
    option = {
		name = wwu_subject_management.3.option.manufacturing.invalid.max
        
        trigger = {
            subject_investment_max_check = {
                TYPE = manufacturing
            }
        }
        custom_tooltip = SUBJECT_IMPROVEMENT_MAX_TT
	}
    
    #------------------
    # Military Recruitment
    #------------------
    # Purchase
	option = {
		name = wwu_subject_management.3.option.military_recruitment
        
        trigger = {
            subject_investment_valid_check = {
                TYPE = military_recruitment
                mil_type = yes
            }
        }
        conduct_subject_investment = {
            TYPE = military_recruitment
            mil_type = yes
        }
	}
    # Lack Gold
    option = {
		name = wwu_subject_management.3.option.military_recruitment.invalid.gold_cost
        
        trigger = {
            subject_investment_lack_gold_check = {
                TYPE = military_recruitment
                mil_type = yes
            }
        }
        subject_investment_lack_gold = {
            TYPE = military_recruitment
                mil_type = yes
        }
	}
    # Lack Power
    option = {
		name = wwu_subject_management.3.option.military_recruitment.invalid.power_cost
        
        trigger = {
            subject_investment_lack_power_check = {
                TYPE = military_recruitment
                mil_type = yes
            }
        }
        subject_investment_lack_power = {
            TYPE = military_recruitment
                mil_type = yes
        }
	}
    # Lack Gold and Power
    option = {
		name = wwu_subject_management.3.option.military_recruitment.invalid.all_cost
        
        trigger = {
            subject_investment_lack_all_check = {
                TYPE = military_recruitment
                mil_type = yes
            }
        }
        subject_investment_lack_all = {
            TYPE = military_recruitment
            mil_type = yes
        }
	}
    # At Max Tier
    option = {
		name = wwu_subject_management.3.option.military_recruitment.invalid.max
        
        trigger = {
            subject_investment_max_check = {
                TYPE = military_recruitment
            }
        }
        custom_tooltip = SUBJECT_IMPROVEMENT_MAX_TT
	}
    
    #------------------
    # Naval Recruitment
    #------------------
    # Purchase
	option = {
		name = wwu_subject_management.3.option.naval_recruitment
        
        trigger = {
            subject_investment_valid_check = {
                TYPE = naval_recruitment
                dip_type = yes
            }
        }
        conduct_subject_investment = {
            TYPE = naval_recruitment
            dip_type = yes
        }
	}
    # Lack Gold
    option = {
		name = wwu_subject_management.3.option.naval_recruitment.invalid.gold_cost
        
        trigger = {
            subject_investment_lack_gold_check = {
                TYPE = naval_recruitment
                dip_type = yes
            }
        }
        subject_investment_lack_gold = {
            TYPE = naval_recruitment
                dip_type = yes
        }
	}
    # Lack Power
    option = {
		name = wwu_subject_management.3.option.naval_recruitment.invalid.power_cost
        
        trigger = {
            subject_investment_lack_power_check = {
                TYPE = naval_recruitment
                dip_type = yes
            }
        }
        subject_investment_lack_power = {
            TYPE = naval_recruitment
                dip_type = yes
        }
	}
    # Lack Gold and Power
    option = {
		name = wwu_subject_management.3.option.naval_recruitment.invalid.all_cost
        
        trigger = {
            subject_investment_lack_all_check = {
                TYPE = naval_recruitment
                dip_type = yes
            }
        }
        subject_investment_lack_all = {
            TYPE = naval_recruitment
            dip_type = yes
        }
	}
    # At Max Tier
    option = {
		name = wwu_subject_management.3.option.naval_recruitment.invalid.max
        
        trigger = {
            subject_investment_max_check = {
                TYPE = naval_recruitment
            }
        }
        custom_tooltip = SUBJECT_IMPROVEMENT_MAX_TT
	}
    
    #------------------
    # Policing
    #------------------
    # Purchase
	option = {
		name = wwu_subject_management.3.option.policing
        
        trigger = {
            subject_investment_valid_check = {
                TYPE = policing
                mil_type = yes
            }
        }
        conduct_subject_investment = {
            TYPE = policing
            mil_type = yes
        }
	}
    # Lack Gold
    option = {
		name = wwu_subject_management.3.option.policing.invalid.gold_cost
        
        trigger = {
            subject_investment_lack_gold_check = {
                TYPE = policing
                mil_type = yes
            }
        }
        subject_investment_lack_gold = {
            TYPE = policing
                mil_type = yes
        }
	}
    # Lack Power
    option = {
		name = wwu_subject_management.3.option.policing.invalid.power_cost
        
        trigger = {
            subject_investment_lack_power_check = {
                TYPE = policing
                mil_type = yes
            }
        }
        subject_investment_lack_power = {
            TYPE = policing
                mil_type = yes
        }
	}
    # Lack Gold and Power
    option = {
		name = wwu_subject_management.3.option.policing.invalid.all_cost
        
        trigger = {
            subject_investment_lack_all_check = {
                TYPE = policing
                mil_type = yes
            }
        }
        subject_investment_lack_all = {
            TYPE = policing
            mil_type = yes
        }
	}
    # At Max Tier
    option = {
		name = wwu_subject_management.3.option.policing.invalid.max
        
        trigger = {
            subject_investment_max_check = {
                TYPE = policing
            }
        }
        custom_tooltip = SUBJECT_IMPROVEMENT_MAX_TT
	}
    
    #------------------
    # Proselytisation
    #------------------
    # Purchase
	option = {
		name = wwu_subject_management.3.option.proselytisation
        
        trigger = {
            subject_investment_valid_check = {
                TYPE = proselytisation
                adm_type = yes
            }
        }
        conduct_subject_investment = {
            TYPE = proselytisation
            adm_type = yes
        }
	}
    # Lack Gold
    option = {
		name = wwu_subject_management.3.option.proselytisation.invalid.gold_cost
        
        trigger = {
            subject_investment_lack_gold_check = {
                TYPE = proselytisation
                adm_type = yes
            }
        }
        subject_investment_lack_gold = {
            TYPE = proselytisation
                adm_type = yes
        }
	}
    # Lack Power
    option = {
		name = wwu_subject_management.3.option.proselytisation.invalid.power_cost
        
        trigger = {
            subject_investment_lack_power_check = {
                TYPE = proselytisation
                adm_type = yes
            }
        }
        subject_investment_lack_power = {
            TYPE = proselytisation
                adm_type = yes
        }
	}
    # Lack Gold and Power
    option = {
		name = wwu_subject_management.3.option.proselytisation.invalid.all_cost
        
        trigger = {
            subject_investment_lack_all_check = {
                TYPE = proselytisation
                adm_type = yes
            }
        }
        subject_investment_lack_all = {
            TYPE = proselytisation
            adm_type = yes
        }
	}
    # At Max Tier
    option = {
		name = wwu_subject_management.3.option.proselytisation.invalid.max
        
        trigger = {
            subject_investment_max_check = {
                TYPE = proselytisation
            }
        }
        custom_tooltip = SUBJECT_IMPROVEMENT_MAX_TT
	}
    
    #------------------
    # Colonisation
    #------------------
    # Purchase
	option = {
		name = wwu_subject_management.3.option.colonisation
        
        trigger = {
            subject_investment_valid_check = {
                TYPE = colonisation
                dip_type = yes
            }
        }
        conduct_subject_investment = {
            TYPE = colonisation
            dip_type = yes
        }
	}
    # Lack Gold
    option = {
		name = wwu_subject_management.3.option.colonisation.invalid.gold_cost
        
        trigger = {
            subject_investment_lack_gold_check = {
                TYPE = colonisation
                dip_type = yes
            }
        }
        subject_investment_lack_gold = {
            TYPE = colonisation
                dip_type = yes
        }
	}
    # Lack Power
    option = {
		name = wwu_subject_management.3.option.colonisation.invalid.power_cost
        
        trigger = {
            subject_investment_lack_power_check = {
                TYPE = colonisation
                dip_type = yes
            }
        }
        subject_investment_lack_power = {
            TYPE = colonisation
                dip_type = yes
        }
	}
    # Lack Gold and Power
    option = {
		name = wwu_subject_management.3.option.colonisation.invalid.all_cost
        
        trigger = {
            subject_investment_lack_all_check = {
                TYPE = colonisation
                dip_type = yes
            }
        }
        subject_investment_lack_all = {
            TYPE = colonisation
            dip_type = yes
        }
	}
    # At Max Tier
    option = {
		name = wwu_subject_management.3.option.colonisation.invalid.max
        
        trigger = {
            subject_investment_max_check = {
                TYPE = colonisation
            }
        }
        custom_tooltip = SUBJECT_IMPROVEMENT_MAX_TT
	}
    
    #------------------
    # Force Capacity
    #------------------
    # Purchase
	option = {
		name = wwu_subject_management.3.option.force_capacity
        
        trigger = {
            subject_investment_valid_check = {
                TYPE = force_capacity
                mil_type = yes
            }
        }
        conduct_subject_investment = {
            TYPE = force_capacity
            mil_type = yes
        }
	}
    # Lack Gold
    option = {
		name = wwu_subject_management.3.option.force_capacity.invalid.gold_cost
        
        trigger = {
            subject_investment_lack_gold_check = {
                TYPE = force_capacity
                mil_type = yes
            }
        }
        subject_investment_lack_gold = {
            TYPE = force_capacity
                mil_type = yes
        }
	}
    # Lack Power
    option = {
		name = wwu_subject_management.3.option.force_capacity.invalid.power_cost
        
        trigger = {
            subject_investment_lack_power_check = {
                TYPE = force_capacity
                mil_type = yes
            }
        }
        subject_investment_lack_power = {
            TYPE = force_capacity
                mil_type = yes
        }
	}
    # Lack Gold and Power
    option = {
		name = wwu_subject_management.3.option.force_capacity.invalid.all_cost
        
        trigger = {
            subject_investment_lack_all_check = {
                TYPE = force_capacity
                mil_type = yes
            }
        }
        subject_investment_lack_all = {
            TYPE = force_capacity
            mil_type = yes
        }
	}
    # At Max Tier
    option = {
		name = wwu_subject_management.3.option.force_capacity.invalid.max
        
        trigger = {
            subject_investment_max_check = {
                TYPE = force_capacity
            }
        }
        custom_tooltip = SUBJECT_IMPROVEMENT_MAX_TT
	}
    
    # Return
    option = {
		name = wwu_subject_management.3.option.return
        
	}
    
    after = {
        hidden_effect = {
            country_event = { id = wwu_subject_management.1 }
        }
    }
}
