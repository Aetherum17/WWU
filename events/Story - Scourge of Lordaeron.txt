namespace = scourge_of_lordaeron_events

# Scourge of Lordaeron
country_event = {
	id = scourge_of_lordaeron_events.1
	title = scourge_of_lordaeron_events.1.title
	desc = scourge_of_lordaeron_events.1.desc
	picture = UNDEAD_eventPicture

    major = yes
    
	trigger = {
        ai = no
		P11 = {
			ai = yes
		}
		is_year = 617
		NOT = { has_global_flag = scourge_of_lordaeron_flag }
	}
	
	mean_time_to_happen = { 
        months = 1 
    }
    
	immediate = {
		hidden_effect = { set_global_flag = scourge_of_lordaeron_flag }
    }
	
	option = {
		name = scourge_of_lordaeron_events.1.option.a
		
        custom_tooltip = scourge_of_lordaeron_events_tt
        hidden_effect = {
			P11 = {
				complete_mission = wwu_kiljaedens_invasion_plan
				complete_mission = wwu_recruit_kelthuzad
				complete_mission = wwu_create_cult_of_the_damned
				complete_mission = wwu_poison_andorhal_granary
				complete_mission = wwu_protect_the_grain_shipments
				complete_mission = wwu_the_scourge_emerge
				complete_mission = wwu_the_culling
			}
			area_stratholme = {
				cede_province = P52
				add_core = P52
				change_culture = culture_scourge
				change_religion = cult_of_the_damned
			}
			area_eastwatch = {
				cede_province = P52
				add_core = P52
				change_culture = culture_scourge
				change_religion = cult_of_the_damned
			}
			area_the_marris_stead = {
				cede_province = P52
				add_core = P52
				change_culture = culture_scourge
				change_religion = cult_of_the_damned
			}
			area_eastwall_tower = {
				cede_province = P52
				add_core = P52
				change_culture = culture_scourge
				change_religion = cult_of_the_damned
			}
			area_northdale = {
				cede_province = P52
				add_core = P52
				change_culture = culture_scourge
				change_religion = cult_of_the_damned
			}
			area_andorhal_fields = {
				cede_province = P52
				add_core = P52
				change_culture = culture_scourge
				change_religion = cult_of_the_damned
			}
			area_andorhal = {
				cede_province = P52
				add_core = P52
				change_culture = culture_scourge
				change_religion = cult_of_the_damned
			}
			area_tirisfal_bulwark = {
				cede_province = P52
				add_core = P52
				change_culture = culture_scourge
				change_religion = cult_of_the_damned
			}			
			area_scholomance = {
				cede_province = P12
				add_core = P12
				change_religion = cult_of_the_damned
				change_culture = culture_cultist
				add_core = P12
			}
			P12 = {
				set_capital = 790
				define_ruler = {
					    name = "Kel'Thuzad"
						adm = 6
						dip = 5
						mil = 5
						age = 75
						claim = 100
				}
				add_government_reform = scourge_domain_reform
				set_ruler_flag = is_immortal
				event_add_mage_personality = yes
				add_stability = 3
				add_treasury = 1500
				add_prestige = 200
			}
			790 = {
				infantry = P12
				infantry = P12
				infantry = P12
				infantry = P12
				infantry = P12
				infantry = P12
				infantry = P12
				infantry = P12
				infantry = P12
				infantry = P12
				cavalry = P12
				cavalry = P12
				cavalry = P12
				artillery = P12
				artillery = P12
				add_base_tax = 4
				add_base_production = 4
				add_base_manpower = 6
				center_of_trade = 2
			}
			P52 = {
				define_ruler = {
					    name = "Mal'Ganis"
						adm = 6
						dip = 5
						mil = 4
						age = 500
						claim = 100
				}
				add_government_reform = scourge_domain_reform
				set_ruler_flag = is_immortal
				event_add_mage_personality = yes
				set_ruler_religion = cult_of_the_damned
				set_ruler_culture = culture_dreadlord
				set_capital = 642
				add_stability = 3
				add_treasury = 1500
				add_prestige = 200
			}
			642 = {
				infantry = P52
				infantry = P52
				infantry = P52
				infantry = P52
				infantry = P52
				infantry = P52
				infantry = P52
				infantry = P52
				infantry = P52
				infantry = P52
				infantry = P52
				infantry = P52
				infantry = P52
				infantry = P52
				infantry = P52				
				infantry = P52
				infantry = P52
				infantry = P52
				infantry = P52
				infantry = P52
				cavalry = P52
				cavalry = P52
				cavalry = P52
				cavalry = P52
				cavalry = P52
				artillery = P52
				artillery = P52
				artillery = P52
				artillery = P52
				artillery = P52
			}
			P11 = {
				vassalize = P52
				vassalize = P12
			}
			A08 = {
				add_treasury = -500
				add_stability = -3
				define_ruler = {
					name = "Terenas II"
					dynasty = "Menethil"
					adm = 3
					dip = 2
					mil = 4
					age = 60
					claim = 100
				}
				event_add_warrior_personality = yes
				set_ruler_flag = is_immortal
			}
			882 = {
				cede_province = F38
				add_core = F38
				change_culture = culture_lordaeron
				change_religion = holy_light
				add_base_tax = 2
				add_base_tax = 2
				add_base_manpower = 4
				center_of_trade = 1
			}
			area_halvarde = {
				cede_province = F38
				add_core = F38
				change_culture = culture_lordaeron
				change_religion = holy_light
			}
			583 = {
				cede_province = F38
				add_core = F38
				change_culture = culture_lordaeron
				change_religion = holy_light
			}
			635 = {
				cede_province = F38
				add_core = F38
				change_culture = culture_lordaeron
				change_religion = holy_light
			}
			749 = {
				change_culture = culture_ironforge
			}
			F38 = {
				add_accepted_culture = culture_ironforge
				set_capital = 882
				define_ruler = {
					name = "Arthas"
					dynasty = "Menethil"
					age = 24
					claim = 100
					adm = 4
					dip = 2
					mil = 6
				}
				set_ruler_flag = is_immortal
				event_add_paladin_personality = yes
				event_add_ruthless_personality = yes
				define_general = {
					name = "Muradin Bronzebeard"
					fire = 5
					shock = 7
					manuever = 5
					siege = 3
				}
			}
			2413 = {
				cede_province = P11
				add_core = P11
				change_culture = culture_scourge
				change_religion = cult_of_the_damned
			}
			P11 = {
				declare_war = A08
			}
			P52 = {
				join_all_offensive_wars_of = P11
			}
			P12 = {
				join_all_offensive_wars_of = P11
			}
			F38 = {
				join_all_defensive_wars_of = A08
			}
			continent_eastern_kingdoms = {
				discover_country = P52
			}
			continent_northrend = {
				discover_country = P52
			}
			continent_broken_isles = {
				discover_country = P52
			}
			continent_outland = {
				discover_country = P52
			}
			continent_eastern_kingdoms = {
				discover_country = P12
			}
			continent_northrend = {
				discover_country = P12
			}
			continent_broken_isles = {
				discover_country = P12
			}
			continent_outland = {
				discover_country = P12
			}
		}
	}
}
