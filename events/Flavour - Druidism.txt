namespace = wwu_druidism

# Druidism Spreads
country_event = {
	id = wwu_druidism.1
	title = "wwu_druidism.1.title"
	desc = "wwu_druidism.1.desc"
	picture = BITE_eventPicture	

	is_triggered_only = yes	
	
	trigger = {
		religion = elune
        any_owned_province = {
            NOT = { religion = druidism }
        }
	}

	mean_time_to_happen = {
		days = 1		
	}

	option = {
		name = "wwu_druidism.1.option.a"
		
        random_owned_province = {
            limit = {
                NOT = { religion = druidism }
            }
            
            change_religion = druidism
        }
	}
}

# Archdruid [Root.Monarch.GetName]?
country_event = {
	id = wwu_druidism.2
	title = "wwu_druidism.2.title"
	desc = "wwu_druidism.2.desc"
	picture = WILDWALKER_eventPicture	

	is_triggered_only = yes	
	
	trigger = {
		religion = elune
        NOT = { ruler_religion = druidism }
	}

	mean_time_to_happen = {
		days = 1		
	}

	option = {
		name = "wwu_druidism.2.option.a"
		
        set_ruler_religion = druidism
        add_stability = -1
        
        custom_tooltip = DRUID_RULER_TT
	}
    option = {
		name = "wwu_druidism.2.option.b"
		
        add_stability_or_adm_power = yes
	}
}

# The Nightmare Spreads
country_event = {
	id = wwu_druidism.3
	title = wwu_druidism.3.title
	desc = wwu_druidism.3.desc
	picture = EMERALD_NIGHTMARE_eventPicture	
    goto = target_province
    
    is_triggered_only = yes
    
	trigger = {
		religion = druidism
        NOT = { piety = 0 }
        any_owned_province = {
            NOT = { religion = nightmare }
        }
	}

	mean_time_to_happen = {
		days = 1
        
        modifier = {
            factor = 5
            
            dominant_religion = nightmare
        }
        modifier = {
            factor = 2
            
            NOT = { piety = -0.25 }
        }
        modifier = {
            factor = 2
            
            NOT = { piety = -0.5 }
        }
	}
    
    immediate = {
        hidden_effect = {
            random_owned_province = {
                limit = {
                    NOT = { religion = nightmare } 
                }
                
                save_event_target_as = target_province
            }
        }
    }

	option = {
		name = wwu_druidism.3.option.a
		
        event_target:target_province = {
            change_religion = nightmare
        }
	}
}

# The Emerald Nightmare
country_event = {
	id = wwu_druidism.4
	title = wwu_druidism.4.title
	desc = wwu_druidism.4.desc
	picture = EMERALD_NIGHTMARE_eventPicture	
    goto = target_province
    
    is_triggered_only = yes
    
	trigger = {
		religion = druidism
        dominant_religion = nightmare
        NOT = { piety = -0.8 }
	}

	mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_druidism.4.option.a
		
        change_religion = nightmare
		
		if = {
            limit = {
                dominant_religion = nightmare
				primary_culture = culture_green_dragonflight
            }
            change_primary_culture = culture_nightmare_dragonflight
        }
		else_if = {
            limit = {
                dominant_religion = nightmare
				primary_culture = culture_night_elf
            }
            change_primary_culture = culture_satyr
        }
	}
}

# Shrine Upkeep
country_event = {
	id = wwu_druidism.5
	title = wwu_druidism.5.title
	desc = wwu_druidism.5.desc
	picture = EMERALD_DREAM_eventPicture
    goto = target_province
    
    is_triggered_only = yes
    
	trigger = {
        religion = druidism
        any_owned_province = {
            NOT = { has_province_modifier = abandoned_druidic_shrine }
            NOT = { has_province_modifier = restored_druidic_shrine }
        }
	}
	
	mean_time_to_happen = {
		days = 1
	}
    
    immediate = {
        hidden_effect = {
            random_owned_province = {
                limit = {
                    NOT = { has_province_modifier = abandoned_druidic_shrine }
                    NOT = { has_province_modifier = restored_druidic_shrine }
                }
                save_event_target_as = target_province
            }
        }
    }

	option = {
		name = wwu_druidism.5.option.a
		
        event_target:target_province = {
            add_province_modifier = {
                name = abandoned_druidic_shrine
                duration = 3650
            }
        }
	}
    option = {
		name = wwu_druidism.5.option.b
		
        add_years_of_income = -0.5
        add_piety = 0.05
        
        event_target:target_province = {
            add_province_modifier = {
                name = restored_druidic_shrine
                duration = 3650
            }
        }
	}
}

