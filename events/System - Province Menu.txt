namespace = www_province_menu

province_event = {
	id = www_province_menu.1
	title = www_province_menu.1.title
	desc = www_province_menu.1.desc
	picture = ORGRIMMAR_CONSTRUCTION_eventPicture
	
    is_triggered_only = yes
    
    immediate = {
        owner = {
            save_event_target_as = owner_nation
        }
    }
    
    option = {
		name = www_province_menu.1.option.draw_populace_from_capital
        
        trigger = {
            is_capital = no
            owner = {
                NOT = { has_country_modifier = migration_action_cooldown }
            }
			owner = {
				capital_scope = {
					base_tax = 2
					base_production = 2
					base_manpower = 2
				}
			}
        }
        
        if = {
            limit = {
                owner = { 
                    adm_power = 25
                }
            }
            
            owner = { add_adm_power = -25 }
            
            owner = {
                capital_scope = {
                    add_base_tax = -1
                    add_base_production = -1
                    add_base_manpower = -1
                }
            }
            
            add_base_tax = 1
            add_base_production = 1
            add_base_manpower = 1
            
            custom_tooltip = MIGRATION_ACTION_COOLDOWN
            
            hidden_effect = {
                owner = {
                    add_country_modifier = {
                        name = migration_action_cooldown
                        duration = 365
                    }
                }
            }
        }
        else = {
            owner = {
                custom_tooltip = YOU_LACK_ADM_POWER
            }
        }
    }
    
    option = {
		name = www_province_menu.1.option.send_populace_to_capital
        
        trigger = {
            is_capital = no
            owner = {
                NOT = { has_country_modifier = migration_action_cooldown }
            }
            base_tax = 2
            base_production = 2
            base_manpower = 2
        }
        
        if = {
            limit = {
                owner = { 
                    adm_power = 25
                }
            }
            
            owner = { add_adm_power = -25 }
            
            owner = {
                capital_scope = {
                    add_base_tax = 1
                    add_base_production = 1
                    add_base_manpower = 1
                }
            }
            
            add_base_tax = -1
            add_base_production = -1
            add_base_manpower = -1
            
            custom_tooltip = MIGRATION_ACTION_COOLDOWN
            
            hidden_effect = {
                owner = {
                    add_country_modifier = {
                        name = migration_action_cooldown
                        duration = 365
                    }
                }
            }
        }
        else = {
            owner = {
                custom_tooltip = YOU_LACK_ADM_POWER
            }
        }
    }
    
    option = {
		name = www_province_menu.1.option.cultural_purge
        
        trigger = {
            owner = {
                NOT = { has_country_modifier = purged_race_nation }
                
                OR = {
                    is_savage = yes
                    is_pure_evil = yes
                    mil = 5
                }
            }
            
            OR = {
                NOT = { has_owner_culture = yes }
                NOT = { has_owner_accepted_culture = yes }
            }
        }
        
        if = {
            limit = {
                owner = { 
                    scaled_mil_power_check = yes
                }
            }
            
            custom_tooltip = ALL_COUNTRIES_OF_THIS_CULTURE_GROUP_WILL_HATE_US
            hidden_effect = {
                every_country = {
					limit = {
						culture_group = ROOT
					}
					add_opinion = {
						who = event_target:owner_nation
						modifier = purged_our_people
					} 
				}
            }
            
            owner = {
                scaled_mil_power_effect = yes
                
                add_country_modifier = {
                    name = purged_race_nation
                    duration = 3650
                }
            }
              
            add_province_modifier = {
                name = purged_race_province
                duration = 3650
            }
            
            add_devastation = 10
            
            change_culture = event_target:owner_nation
            change_religion = event_target:owner_nation
        }
        else = {
            owner = {
                custom_tooltip = YOU_LACK_MIL_POWER
            }
        }
    }  

    option = {
		name = www_province_menu.1.option.force_emigration
        
        trigger = {
            owner = {
                NOT = { has_country_modifier = emigrated_race_nation }
                
                NOT = { is_pure_evil = yes }
                NOT = { is_savage = yes }
            }
            
            OR = {
                NOT = { has_owner_culture = yes }
                NOT = { has_owner_accepted_culture = yes }
            }
        }
        
        if = {
            limit = {
                owner = { 
                    scaled_dip_power_check = yes
                }
            }
            
            custom_tooltip = ALL_COUNTRIES_OF_THIS_CULTURE_GROUP_WILL_HATE_US
            
            hidden_effect = {
                every_country = {
					limit = {
						culture_group = ROOT
					}
					add_opinion = {
						who = event_target:owner_nation
						modifier = dishonorable_act
					} 
				}
            }
            
            owner = {
                scaled_dip_power_effect = yes
                
                add_country_modifier = {
                    name = emigrated_race_nation
                    duration = 3650
                }
            }
            
            add_devastation = 10
            
            change_culture = event_target:owner_nation
            change_religion = event_target:owner_nation
        }
        else = {
            owner = {
                custom_tooltip = YOU_LACK_DIP_POWER
            }
        }
    }
    
    option = {
		name = www_province_menu.1.option.advance_dig
        
        trigger = {
            owner = {
                NOT = { has_country_modifier = archaeology_dig_province_menu_cooldown }
                has_country_flag = dig_begins
                treasury = 100
            }
            
            has_province_modifier = dig_in_progress
        }
        
        owner = { 
            add_treasury = -100
            increment_dig = yes
        }
        
        custom_tooltip = ADVANCE_DIG_ACTION_COOLDOWN
        
        hidden_effect = {
            owner = {
                add_country_modifier = {
                    name = archaeology_dig_province_menu_cooldown
                    duration = 365
                    hidden = yes
                }
            }
        }
    }
    
    option = {
		name = www_province_menu.1.option.advance_dig.lack_cost
        
        trigger = {
            owner = {   
                NOT = { has_country_modifier = archaeology_dig_province_menu_cooldown }
                has_country_flag = dig_begins
                NOT = { treasury = 100 }
            }
            
            has_province_modifier = dig_in_progress
        }
        
        custom_tooltip = YOU_NEED_ADVANCE_DIG_COST
    }
    
    # Clear Forest
    option = {
		name = www_province_menu.1.option.clear_forest
        
        trigger = {
            NOT = { has_province_modifier = province_forest_clearing }
            has_terrain = forest
            owner = {
                treasury = 250
            }
        }
        
        owner = { 
            add_treasury = -250
        }
        
        add_permanent_province_modifier = {
            name = province_forest_clearing
            duration = -1
        }
    }
    
    option = {
		name = www_province_menu.1.option.clear_forest.lack_cost
        
        trigger = {
            NOT = { has_province_modifier = province_forest_clearing }
            has_terrain = forest
            owner = {   
                NOT = { treasury = 250 }
            }
        }
        
        custom_tooltip = YOU_NEED_CLEAR_TERRAIN_COST
    }
    
    # Clear Woods
    option = {
		name = www_province_menu.1.option.clear_woods
        
        trigger = {
            NOT = { has_province_modifier = province_woods_clearing }
            has_terrain = woods
            owner = {
                treasury = 250
            }
        }
        
        owner = { 
            add_treasury = -250
        }
        
        add_permanent_province_modifier = {
            name = province_woods_clearing
            duration = -1
        }
    }
    
    option = {
		name = www_province_menu.1.option.clear_woods.lack_cost
        
        trigger = {
            NOT = { has_province_modifier = province_woods_clearing }
            has_terrain = woods
            owner = {  
                NOT = { treasury = 250 }
            }
        }
        
        custom_tooltip = YOU_NEED_CLEAR_TERRAIN_COST
    }
    
    # Clear Jungle
    option = {
		name = www_province_menu.1.option.clear_jungle
        
        trigger = {
            NOT = { has_province_modifier = province_jungle_clearing }
            has_terrain = jungle
            owner = {
                treasury = 250
            }
        }
        
        owner = { 
            add_treasury = -250
        }
        
        add_permanent_province_modifier = {
            name = province_jungle_clearing
            duration = -1
        }
    }
    
    option = {
		name = www_province_menu.1.option.clear_jungle.lack_cost
        
        trigger = {
            NOT = { has_province_modifier = province_jungle_clearing }
            has_terrain = jungle
            owner = {  
                NOT = { treasury = 250 }
            }
        }
        
        custom_tooltip = YOU_NEED_CLEAR_TERRAIN_COST
    }
    
    # Level Marsh
    option = {
		name = www_province_menu.1.option.clear_marsh
        
        trigger = {
            NOT = { has_province_modifier = province_marsh_clearing }
            has_terrain = marsh
            owner = {
                treasury = 250
            }
        }
        
        owner = { 
            add_treasury = -250
        }
        
        add_permanent_province_modifier = {
            name = province_marsh_clearing
            duration = -1
        }
    }
    
    option = {
		name = www_province_menu.1.option.clear_marsh.lack_cost
        
        trigger = {
            NOT = { has_province_modifier = province_marsh_clearing }
            has_terrain = marsh
            owner = {
                NOT = { treasury = 250 }
            }
        }
        
        custom_tooltip = YOU_NEED_CLEAR_TERRAIN_COST
    }
    
    # Irrigate Desert
    option = {
		name = www_province_menu.1.option.irrigate_desert
        
        trigger = {
            NOT = { has_province_modifier = province_desert_irrigation }
            OR = {
                has_terrain = desert
                has_terrain = coastal_desert
            }
            owner = {
                treasury = 250
            }
        }
        
        owner = { 
            add_treasury = -250
        }
        
        add_permanent_province_modifier = {
            name = province_desert_irrigation
            duration = -1
        }
    }
    
    option = {
		name = www_province_menu.1.option.irrigate_desert.lack_cost
        
        trigger = {
            NOT = { has_province_modifier = province_desert_irrigation }
            OR = {
                has_terrain = desert
                has_terrain = coastal_desert
            }
            owner = {
                NOT = { treasury = 250 }
            }
        }
        
        custom_tooltip = YOU_NEED_CLEAR_TERRAIN_COST
    }
    
    # Direct Adventurers
    option = {
		name = www_province_menu.1.option.direct_adventurers
        
        trigger = {
            owner = {
                has_estate = estate_adventuring_guild
            }
            
            has_any_type_of_local_concern = yes
            
            owner = {
                treasury = 100
            }
        }
        
        owner = { 
            add_treasury = -100
        }
        
        trigger_local_concern_events = yes
    }
    
    option = {
		name = www_province_menu.1.option.direct_adventurers.lack_cost
        
        trigger = {
            owner = {
                has_estate = estate_adventuring_guild
            }
            
            has_any_type_of_local_concern = yes
            
            owner = {
                NOT = { treasury = 100 }
            }
        }
        
        custom_tooltip = YOU_NEED_DIRECT_ADVENTURERS_COST
    }
    
    # Purge Fel
    option = {
		name = www_province_menu.1.option.purge_fel
        
        trigger = {
            owner = {
                NOT = { religion = fel }
            }
            NOT = { has_province_flag = purge_fel_target }
            trade_goods = fel
            
            owner = {
                adm_power = 25
            }
        }
        
        owner = { 
            add_adm_power = -25
        }
        
        hidden_effect = {
            set_province_flag = purge_fel_target
        }
        custom_tooltip = PURGE_FEL_TT
    }
    
    option = {
		name = www_province_menu.1.option.purge_fel.lack_cost
        
        trigger = {
            owner = {
                NOT = { religion = fel }
            }
            NOT = { has_province_flag = purge_fel_target }
            trade_goods = fel
            
            owner = {
                NOT = { adm_power = 25 }
            }
        }
        
        custom_tooltip = YOU_NEED_PURGE_FEL_COST
    }
    
    # Destroy Rift
    option = {
		name = www_province_menu.1.option.destroy_rift
        
        trigger = {
            OR = {
                has_great_project = { type = deepholm_rift_feralas }
                has_great_project = { type = deepholm_rift_arathi }
                has_great_project = { type = deepholm_rift_howling_fjord }
                has_great_project = { type = deepholm_rift_kunlai }
                has_great_project = { type = abyssal_maw_rift_vashjir }
                has_great_project = { type = abyssal_maw_rift_stonetalon }
                has_great_project = { type = abyssal_maw_rift_sholazar }
                has_great_project = { type = abyssal_maw_rift_krasarang_wilds }
                has_great_project = { type = firelands_rift_blackrock }
                has_great_project = { type = firelands_rift_hyjal }
                has_great_project = { type = firelands_rift_boreal_tundra }
                has_great_project = { type = firelands_rift_townlong_steppes }
                has_great_project = { type = skywall_rift_uldum }
                has_great_project = { type = skywall_rift_westfall }
                has_great_project = { type = skywall_rift_dragonblight }
                has_great_project = { type = skywall_rift_jade_forest }
                has_great_project = { type = argus_rift_icecrown }
                has_great_project = { type = argus_rift_throne_of_kiljaeden }
                has_great_project = { type = argus_rift_throne_of_kiljaeden_draenor }
                has_great_project = { type = argus_rift_hyjal }
                has_great_project = { type = oribos_rift_icecrown }
                has_great_project = { type = frozen_rift_brill }
                has_great_project = { type = frozen_rift_stratholme }
                has_great_project = { type = frozen_rift_andorhal }
            }
        }
        
        if = {
            limit = {
                has_great_project = { type = deepholm_rift_feralas }
            }
            destroy_great_project = { type = deepholm_rift_feralas }
        }
        if = {
            limit = {
                has_great_project = { type = deepholm_rift_arathi }
            }
            destroy_great_project = { type = deepholm_rift_arathi }
        }
        if = {
            limit = {
                has_great_project = { type = deepholm_rift_howling_fjord }
            }
            destroy_great_project = { type = deepholm_rift_howling_fjord }
        }
        if = {
            limit = {
                has_great_project = { type = deepholm_rift_kunlai }
            }
            destroy_great_project = { type = deepholm_rift_kunlai }
        }
        if = {
            limit = {
                has_great_project = { type = abyssal_maw_rift_vashjir }
            }
            destroy_great_project = { type = abyssal_maw_rift_vashjir }
        }
        if = {
            limit = {
                has_great_project = { type = abyssal_maw_rift_stonetalon }
            }
            destroy_great_project = { type = abyssal_maw_rift_stonetalon }
        }
        if = {
            limit = {
                has_great_project = { type = abyssal_maw_rift_sholazar }
            }
            destroy_great_project = { type = abyssal_maw_rift_sholazar }
        }
        if = {
            limit = {
                has_great_project = { type = abyssal_maw_rift_krasarang_wilds }
            }
            destroy_great_project = { type = abyssal_maw_rift_krasarang_wilds }
        }
        if = {
            limit = {
                has_great_project = { type = firelands_rift_blackrock }
            }
            destroy_great_project = { type = firelands_rift_blackrock }
        }
        if = {
            limit = {
                has_great_project = { type = firelands_rift_hyjal }
            }
            destroy_great_project = { type = firelands_rift_hyjal }
        }
        if = {
            limit = {
                has_great_project = { type = firelands_rift_boreal_tundra }
            }
            destroy_great_project = { type = firelands_rift_boreal_tundra }
        }
        if = {
            limit = {
                has_great_project = { type = firelands_rift_townlong_steppes }
            }
            destroy_great_project = { type = firelands_rift_townlong_steppes }
        }
        if = {
            limit = {
                has_great_project = { type = skywall_rift_uldum }
            }
            destroy_great_project = { type = skywall_rift_uldum }
        }
        if = {
            limit = {
                has_great_project = { type = skywall_rift_westfall }
            }
            destroy_great_project = { type = skywall_rift_westfall }
        }
        if = {
            limit = {
                has_great_project = { type = skywall_rift_dragonblight }
            }
            destroy_great_project = { type = skywall_rift_dragonblight }
        }
        if = {
            limit = {
                has_great_project = { type = skywall_rift_jade_forest }
            }
            destroy_great_project = { type = skywall_rift_jade_forest }
        }
        if = {
            limit = {
                has_great_project = { type = argus_rift_icecrown }
            }
            destroy_great_project = { type = argus_rift_icecrown }
        }
        if = {
            limit = {
                has_great_project = { type = argus_rift_throne_of_kiljaeden }
            }
            destroy_great_project = { type = argus_rift_throne_of_kiljaeden }
        }
        if = {
            limit = {
                has_great_project = { type = argus_rift_throne_of_kiljaeden_draenor }
            }
            destroy_great_project = { type = argus_rift_throne_of_kiljaeden_draenor }
        }
        if = {
            limit = {
                has_great_project = { type = argus_rift_hyjal }
            }
            destroy_great_project = { type = argus_rift_hyjal }
        }
        if = {
            limit = {
                has_great_project = { type = oribos_rift_icecrown }
            }
            destroy_great_project = { type = oribos_rift_icecrown }
        }
        if = {
            limit = {
                has_great_project = { type = frozen_rift_brill }
            }
            destroy_great_project = { type = frozen_rift_brill }
        }
        if = {
            limit = {
                has_great_project = { type = frozen_rift_stratholme }
            }
            destroy_great_project = { type = frozen_rift_stratholme }
        }
        if = {
            limit = {
                has_great_project = { type = frozen_rift_andorhal }
            }
            destroy_great_project = { type = frozen_rift_andorhal }
        }
    }
    
    # Destroy Portal
    option = {
		name = www_province_menu.1.option.destroy_portal
        
        trigger = {
            OR = {
                has_great_project = { type = dark_portal_outland }
                has_great_project = { type = dark_portal_draenor }
            }
        }
        
        if = {
            limit = {
                has_great_project = { type = dark_portal_outland }
            }
            destroy_great_project = { type = dark_portal_outland }
        }
        if = {
            limit = {
                has_great_project = { type = dark_portal_draenor }
            }
            destroy_great_project = { type = dark_portal_draenor }
        }
    }
    
    # Destroy Portal
    option = {
		name = www_province_menu.1.option.destroy_tram
        
        trigger = {
            has_great_project = { type = deeprun_tram }
        }
        
        if = {
            limit = {
                has_great_project = { type = deeprun_tram }
            }
            destroy_great_project = { type = deeprun_tram }
        }
    }
    
    option = {
		name = www_province_menu.1.option.exit
    }  
}

# Purge Fel in $PROVINCENAME$
province_event = {
	id = www_province_menu.2
	title = www_province_menu.2.title
	desc = www_province_menu.2.desc
	picture = BLESSING_OF_MIGHT_eventPicture
	
    trigger = {
        has_province_flag = purge_fel_target
    }
    
    mean_time_to_happen = {
		days = 30
	}
    
    immediate = {
        clr_province_flag = purge_fel_target
    }
    
    option = {
		name = www_province_menu.2.option.a
        
        change_trade_goods = grain
    }
    option = {
		name = www_province_menu.2.option.b
        
        change_trade_goods = wine
    }
    option = {
		name = www_province_menu.2.option.c
        
        change_trade_goods = wool
    }
    option = {
		name = www_province_menu.2.option.d
        
        change_trade_goods = cloth
    }
    option = {
		name = www_province_menu.2.option.e
        
        change_trade_goods = fur
    }
    option = {
		name = www_province_menu.2.option.f
        
        trigger = {
            has_port = yes
        }
        
        change_trade_goods = fish
    }
}