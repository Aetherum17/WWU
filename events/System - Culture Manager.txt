namespace = wwu_culture_manager

# Cultural Management
country_event = {
	id = wwu_culture_manager.1
	title = wwu_culture_manager.1.title
	desc = wwu_culture_manager.1.desc
	picture = DRAENOR_eventPicture
	
	is_triggered_only = yes
    
    # Enable Automatic Culture Conversion
	option = {
		name = wwu_culture_manager.1.option.auto_convert.on
        
        trigger = {
            NOT = { has_country_flag = enabled_auto_culture_conversion }
        }
        
        custom_tooltip = AUTO_CULTURE_CONVERT_ON_TT
        hidden_effect = {
            set_country_flag = enabled_auto_culture_conversion
        }
        
        country_event = { id = wwu_culture_manager.2 }
        hidden_effect = {
            set_country_flag = skip_status_report_return
        }
	}
    
    # Disable Automatic Culture Conversion
	option = {
		name = wwu_culture_manager.1.option.auto_convert.off
        
        trigger = {
            has_country_flag = enabled_auto_culture_conversion
        }
        
        custom_tooltip = AUTO_CULTURE_CONVERT_OFF_TT
        hidden_effect = {
            clr_country_flag = enabled_auto_culture_conversion
        }
	}
    
    # Set Target Province Count
	option = {
		name = wwu_culture_manager.1.option.target_limit
        
        trigger = {
            has_country_flag = enabled_auto_culture_conversion
        }
        
        country_event = { id = wwu_culture_manager.2 }
        hidden_effect = {
            set_country_flag = skip_status_report_return
        }
	}
    
    # Exit
	option = {
		name = wwu_culture_manager.1.option.exit
	}
    
    after = {
        if = {
            limit = {
                has_country_flag = skip_status_report_return
            }
            
            clr_country_flag = skip_status_report_return
        }
        else = {
            country_event = { id = wwu_status_report.2 }
        }
    }
}

# Cultural Management - Yearly Update
country_event = {
	id = wwu_culture_manager.2
	title = wwu_culture_manager.2.title
	desc = wwu_culture_manager.2.desc
	picture = DRAENOR_eventPicture
	
    is_triggered_only = yes

    # Target 1 Province 
	option = {
		name = wwu_culture_manager.2.option.1
        
        trigger = {
            NOT = { is_variable_equal = { which = auto_culture_convert_target_count value = 1 } }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_1_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 1
            }
        }
	}
    # Target 1 Province - ON
	option = {
		name = wwu_culture_manager.2.option.1
        highlight = yes
        
        trigger = {
            is_variable_equal = { which = auto_culture_convert_target_count value = 1 }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_1_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 1
            }
        }
	}
    
    # Target 2 Provinces
	option = {
		name = wwu_culture_manager.2.option.2
        
        trigger = {
            NOT = { is_variable_equal = { which = auto_culture_convert_target_count value = 2 } }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_2_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 2
            }
        }
	}
    # Target 2 Provinces - ON
	option = {
		name = wwu_culture_manager.2.option.2
        highlight = yes
        
        trigger = {
            is_variable_equal = { which = auto_culture_convert_target_count value = 2 }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_2_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 2
            }
        }
	}
    
    # Target 3 Provinces
	option = {
		name = wwu_culture_manager.2.option.3
        
        trigger = {
            NOT = { is_variable_equal = { which = auto_culture_convert_target_count value = 3 } }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_3_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 3
            }
        }
	}
    # Target 3 Provinces - ON
	option = {
		name = wwu_culture_manager.2.option.3
        highlight = yes
        
        trigger = {
            is_variable_equal = { which = auto_culture_convert_target_count value = 3 }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_3_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 3
            }
        }
	}
    
    # Target 4 Provinces
	option = {
		name = wwu_culture_manager.2.option.4
        
        trigger = {
            NOT = { is_variable_equal = { which = auto_culture_convert_target_count value = 4 } }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_4_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 4
            }
        }
	}
    # Target 4 Provinces - ON
	option = {
		name = wwu_culture_manager.2.option.4
        highlight = yes
        
        trigger = {
            is_variable_equal = { which = auto_culture_convert_target_count value = 4 }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_4_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 4
            }
        }
	}
    
    # Target 5 Provinces
	option = {
		name = wwu_culture_manager.2.option.5
        
        trigger = {
            NOT = { is_variable_equal = { which = auto_culture_convert_target_count value = 5 } }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_5_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 5
            }
        }
	}
    # Target 5 Provinces - ON
	option = {
		name = wwu_culture_manager.2.option.5
        highlight = yes
        
        trigger = {
            is_variable_equal = { which = auto_culture_convert_target_count value = 5 }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_5_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 5
            }
        }
	}
    
    # Target 6 Provinces
	option = {
		name = wwu_culture_manager.2.option.6
        
        trigger = {
            NOT = { is_variable_equal = { which = auto_culture_convert_target_count value = 6 } }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_6_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 6
            }
        }
	}
    # Target 6 Provinces - ON
	option = {
		name = wwu_culture_manager.2.option.6
        highlight = yes
        
        trigger = {
            is_variable_equal = { which = auto_culture_convert_target_count value = 6 }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_6_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 6
            }
        }
	}
    
    # Target 7 Provinces
	option = {
		name = wwu_culture_manager.2.option.7
        
        trigger = {
            NOT = { is_variable_equal = { which = auto_culture_convert_target_count value = 7 } }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_7_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 7
            }
        }
	}
    # Target 7 Provinces - ON
	option = {
		name = wwu_culture_manager.2.option.7
        highlight = yes
        
        trigger = {
            is_variable_equal = { which = auto_culture_convert_target_count value = 7 }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_7_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 7
            }
        }
	}
    
    # Target 8 Provinces
	option = {
		name = wwu_culture_manager.2.option.8
        
        trigger = {
            NOT = { is_variable_equal = { which = auto_culture_convert_target_count value = 8 } }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_8_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 8
            }
        }
	}
    # Target 8 Provinces - ON
	option = {
		name = wwu_culture_manager.2.option.8
        highlight = yes
        
        trigger = {
            is_variable_equal = { which = auto_culture_convert_target_count value = 8 }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_8_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 8
            }
        }
	}
    
    # Target 9 Provinces
	option = {
		name = wwu_culture_manager.2.option.9
        
        trigger = {
            NOT = { is_variable_equal = { which = auto_culture_convert_target_count value = 9 } }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_9_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 9
            }
        }
	}
    # Target 9 Provinces - ON
	option = {
		name = wwu_culture_manager.2.option.9
        highlight = yes
        
        trigger = {
            is_variable_equal = { which = auto_culture_convert_target_count value = 9 }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_9_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 9
            }
        }
	}
    
    # Target 10 Provinces
	option = {
		name = wwu_culture_manager.2.option.10
        
        trigger = {
            NOT = { is_variable_equal = { which = auto_culture_convert_target_count value = 10 } }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_10_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 10
            }
        }
	}
    # Target 10 Provinces - ON
	option = {
		name = wwu_culture_manager.2.option.10
        highlight = yes
        
        trigger = {
            is_variable_equal = { which = auto_culture_convert_target_count value = 10 }
        }
        
        custom_tooltip = CULTURE_CONVERT_TARGET_COUNT_10_TT
        hidden_effect = {
            set_variable = {
                which = auto_culture_convert_target_count
                value = 10
            }
        }
	}
    
    # Exit
	option = {
		name = wwu_culture_manager.2.option.exit
	}
    
    after = {
        country_event = { id = wwu_culture_manager.1 }
    }
}


# Cultural Management - Yearly Update
country_event = {
	id = wwu_culture_manager.100
	title = wwu_culture_manager.100.title
	desc = wwu_culture_manager.100.desc
	picture = TREASURE_VAULT_eventPicture
	
    hidden = yes
    is_triggered_only = yes
    
	trigger = {
        has_country_flag = enabled_auto_culture_conversion
	}
    
	option = {
		name = wwu_culture_manager.100.option.a
        
        # Support up to 5
        if = {
            limit = { 
                check_variable = {
                    which = auto_culture_convert_target_count
                    value = 5
                }
            }
            auto_culture_convert_assignment = yes
        }
        if = {
            limit = { 
                check_variable = {
                    which = auto_culture_convert_target_count
                    value = 4
                }
            }
            auto_culture_convert_assignment = yes
        }
        if = {
            limit = { 
                check_variable = {
                    which = auto_culture_convert_target_count
                    value = 3
                }
            }
            auto_culture_convert_assignment = yes
        }
        if = {
            limit = { 
                check_variable = {
                    which = auto_culture_convert_target_count
                    value = 2
                }
            }
            auto_culture_convert_assignment = yes
        }
        if = {
            limit = { 
                check_variable = {
                    which = auto_culture_convert_target_count
                    value = 1
                }
            }
            auto_culture_convert_assignment = yes
        }
	}
}
