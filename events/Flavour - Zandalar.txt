namespace = wwu_zandalar

country_event = {
	id = wwu_zandalar.1
	title = wwu_zandalar.1.title
	desc = wwu_zandalar.1.desc
	picture = ZANDALAR_1_eventPicture
    
	trigger = {
		tag = A78 # Zandalar
		NOT = { has_country_modifier = troll_zebranie_cooldown }
        
		OR = {
            AND = {
            is_year = 550
            NOT = { is_year = 551 }}
            AND = {
            is_year = 554
            NOT = { is_year = 555 }}
            AND = {
            is_year = 558
            NOT = { is_year = 559 }}
            AND = {
            is_year = 562
            NOT = { is_year = 563 }}
            AND = {
            is_year = 566
            NOT = { is_year = 567 }}
            AND = {
            is_year = 570
            NOT = { is_year = 571 }}
            AND = {
            is_year = 574
            NOT = { is_year = 575 }}
            AND = {
            is_year = 578
            NOT = { is_year = 579 }}
            AND = {
            is_year = 582
            NOT = { is_year = 583 }}
            AND = {
            is_year = 586
            NOT = { is_year = 587 }}
            AND = {
            is_year = 590
            NOT = { is_year = 591 }}
            AND = {
            is_year = 594
            NOT = { is_year = 595 }}
            AND = {
            is_year = 598
            NOT = { is_year = 599 }}
            AND = {
            is_year = 602
            NOT = { is_year = 603 }}
            AND = {
            is_year = 606
            NOT = { is_year = 607 }}
            AND = {
            is_year = 610
            NOT = { is_year = 611 }}
            AND = {
            is_year = 614
            NOT = { is_year = 615 }}
            AND = {
            is_year = 618
            NOT = { is_year = 619 }}
            AND = {
            is_year = 622
            NOT = { is_year = 623 }}
            AND = {
            is_year = 626
            NOT = { is_year = 627 }}
            AND = {
            is_year = 630
            NOT = { is_year = 631 }}
            AND = {
            is_year = 634
            NOT = { is_year = 635 }}
            AND = {
            is_year = 638
            NOT = { is_year = 639 }}
            AND = {
            is_year = 642
            NOT = { is_year = 643 }}
            AND = {
            is_year = 646
            NOT = { is_year = 647 }}
            AND = {
            is_year = 650
            NOT = { is_year = 651 }}
            AND = {
            is_year = 654
            NOT = { is_year = 655 }}
            AND = {
            is_year = 658
            NOT = { is_year = 659 }}
            AND = {
            is_year = 662
            NOT = { is_year = 663 }}
            AND = {
            is_year = 666
            NOT = { is_year = 667 }}
            AND = {
            is_year = 670
            NOT = { is_year = 671 }}
            AND = {
            is_year = 674
            NOT = { is_year = 675 }}
            AND = {
            is_year = 678
            NOT = { is_year = 679 }}
            AND = {
            is_year = 682
            NOT = { is_year = 683 }}
            AND = {
            is_year = 686
            NOT = { is_year = 687 }}
            AND = {
            is_year = 690
            NOT = { is_year = 691 }}
            AND = {
            is_year = 694
            NOT = { is_year = 695 }}
            AND = {
            is_year = 698
            NOT = { is_year = 699 }}
            AND = {
            is_year = 702
            NOT = { is_year = 703 }}
            AND = {
            is_year = 706
            NOT = { is_year = 707 }}
            AND = {
            is_year = 710
            NOT = { is_year = 711 }}
            AND = {
            is_year = 714
            NOT = { is_year = 715 }}
            AND = {
            is_year = 718
            NOT = { is_year = 719 }}
            AND = {
            is_year = 722
            NOT = { is_year = 723 }}
            AND = {
            is_year = 726
            NOT = { is_year = 727 }}
            AND = {
            is_year = 730
            NOT = { is_year = 731 }}
            AND = {
            is_year = 734
            NOT = { is_year = 735 }}
            AND = {
            is_year = 738
            NOT = { is_year = 739 }}
            AND = {
            is_year = 742
            NOT = { is_year = 743 }}
            AND = {
            is_year = 746
            NOT = { is_year = 747 }}
            AND = {
            is_year = 750
            NOT = { is_year = 751 }}
            AND = {
            is_year = 754
            NOT = { is_year = 755 }}
            AND = {
            is_year = 758
            NOT = { is_year = 759 }}
            AND = {
            is_year = 762
            NOT = { is_year = 763 }}
            AND = {
            is_year = 766
            NOT = { is_year = 767 }}
            AND = {
            is_year = 770
            NOT = { is_year = 771 }}
            AND = {
            is_year = 774
            NOT = { is_year = 775 }}
            AND = {
            is_year = 778
            NOT = { is_year = 779 }}
            AND = {
            is_year = 782
            NOT = { is_year = 783 }}
            AND = {
            is_year = 786
            NOT = { is_year = 787 }}
            AND = {
            is_year = 790
            NOT = { is_year = 791 }}
            AND = {
            is_year = 794
            NOT = { is_year = 795 }}
            AND = {
            is_year = 798
            NOT = { is_year = 799 }}
            AND = {
            is_year = 802
            NOT = { is_year = 803 }}
            AND = {
            is_year = 806
            NOT = { is_year = 807 }}
            AND = {
            is_year = 810
            NOT = { is_year = 811 }}
            AND = {
            is_year = 814
            NOT = { is_year = 815 }}
            AND = {
            is_year = 818
            NOT = { is_year = 819 }}
            AND = {
            is_year = 822
            NOT = { is_year = 823 }}
            AND = {
            is_year = 826
            NOT = { is_year = 827 }}
            AND = {
            is_year = 830
            NOT = { is_year = 831 }}
            AND = {
            is_year = 834
            NOT = { is_year = 835 }}
            AND = {
            is_year = 838
            NOT = { is_year = 839 }}
            AND = {
            is_year = 842
            NOT = { is_year = 843 }}
            AND = {
            is_year = 846
            NOT = { is_year = 847 }}
            AND = {
            is_year = 850
            NOT = { is_year = 851 }}
            AND = {
            is_year = 854
            NOT = { is_year = 855 }}
            AND = {
            is_year = 858
            NOT = { is_year = 859 }}
            AND = {
            is_year = 862
            NOT = { is_year = 863 }}
            AND = {
            is_year = 866
            NOT = { is_year = 867 }}
            AND = {
            is_year = 870
            NOT = { is_year = 871 }}
            AND = {
            is_year = 874
            NOT = { is_year = 875 }}
            AND = {
            is_year = 878
            NOT = { is_year = 879 }}
            AND = {
            is_year = 882
            NOT = { is_year = 883 }}
            AND = {
            is_year = 886
            NOT = { is_year = 887 }}
            AND = {
            is_year = 890
            NOT = { is_year = 891 }}
            AND = {
            is_year = 894
            NOT = { is_year = 895 }}
            AND = {
            is_year = 898
            NOT = { is_year = 899 }}
            AND = {
            is_year = 902
            NOT = { is_year = 903 }}
            AND = {
            is_year = 906
            NOT = { is_year = 907 }}
            AND = {
            is_year = 910
            NOT = { is_year = 911 }}
            AND = {
            is_year = 914
            NOT = { is_year = 915 }}
            AND = {
            is_year = 918
            NOT = { is_year = 919 }}
            AND = {
            is_year = 922
            NOT = { is_year = 923 }}
            AND = {
            is_year = 926
            NOT = { is_year = 927 }}
            AND = {
            is_year = 930
            NOT = { is_year = 931 }}
            AND = {
            is_year = 934
            NOT = { is_year = 935 }}
            AND = {
            is_year = 938
            NOT = { is_year = 939 }}
            AND = {
            is_year = 942
            NOT = { is_year = 943 }}
            AND = {
            is_year = 946
            NOT = { is_year = 947 }}
            AND = {
            is_year = 950
            NOT = { is_year = 951 }}
            AND = {
            is_year = 954
            NOT = { is_year = 955 }}
            AND = {
            is_year = 958
            NOT = { is_year = 959 }}
            AND = {
            is_year = 962
            NOT = { is_year = 963 }}
            AND = {
            is_year = 966
            NOT = { is_year = 967 }}
            AND = {
            is_year = 970
            NOT = { is_year = 971 }}
            AND = {
            is_year = 974
            NOT = { is_year = 975 }}
            AND = {
            is_year = 978
            NOT = { is_year = 979 }}
            AND = {
            is_year = 982
            NOT = { is_year = 983 }}
            AND = {
            is_year = 986
            NOT = { is_year = 987 }}
            AND = {
            is_year = 990
            NOT = { is_year = 991 }}
            AND = {
            is_year = 994
            NOT = { is_year = 995 }}
            AND = {
            is_year = 998
            NOT = { is_year = 999 }}
        }
    }
	
	mean_time_to_happen = {
		days = 1
	}
    
    # Amani is at war with Quel'Thalas
	option = {  
        name = wwu_zandalar.1.option.a
        highlight = yes
        
        trigger = {
            tag = A78 # Zandalar
            
            # Amani
            A58 = {
                offensive_war_with = A90 # Quelthalas
            }
        }
        
        add_treasury = -500
        add_manpower = -20
        add_army_tradition = -10
        add_adm_power = -100
        add_dip_power = -100
        add_mil_power = -100
        
        # Amani
        A58 = {
            add_treasury = 250
            add_manpower = 10
            
            define_general = {
            name = "Zandalari High General"
                shock = 5
                fire = 4
                manuever = 4
                siege = 3
            }
            
            add_country_modifier = {
                name = zandalar_amani_help
                duration = 1460
            }
        }
    }
    
	# Loa influence increases
	option = {
		name = wwu_zandalar.1.option.a
        
		increase_loa_influence = yes
        
        if = {
            limit = {
                government_rank = 3
            }
            
            add_prestige = 15
        }
        else_if = {
            limit = {
                government_rank = 2
            }
            
            add_prestige = 10
        }
        else = {
            add_prestige = 5
        }
        
        add_country_modifier = {
            name = troll_zebranie_cooldown
            duration = 700
            hidden = yes
        }
        
        change_variable = {
            which = zul_influence 
            value = 5
        }
	}
	
    # Loa influence decreases
	option = {
		name = wwu_zandalar.1.option.a
        
		decrease_loa_influence = yes
        
        if = {
            limit = {
                government_rank = 3
            }
            
            change_innovativeness = 1.5
        }
        else_if = {
            limit = {
                government_rank = 2
            }
            
            change_innovativeness = 1
        }
        else = {
            change_innovativeness = 0.5
        }
        
		add_country_modifier = {
            name = troll_zebranie_cooldown
            duration = 700
            hidden = yes
        }
        
        change_variable = {
            which = zul_influence 
            value = 5
        }
	}
    
    # Monarch Power Gain
	option = {
		name = wwu_zandalar.1.option.a
        
        if = {
            limit = {
                government_rank = 3
            }
            
            add_adm_power = 30
            add_dip_power = 30
            add_mil_power = 30
        }
        else_if = {
            limit = {
                government_rank = 2
            }
            
            add_adm_power = 20
            add_dip_power = 20
            add_mil_power = 20
        }
        else = {
            add_adm_power = 10
            add_dip_power = 10
            add_mil_power = 10
        }

		add_country_modifier = { 
            name = troll_zebranie_cooldown
            duration = 700
            hidden = yes
        }

        change_variable = {
            which = zul_influence 
            value = 5
        }
	}
    
	option = {
		name = wwu_zandalar.1.option.a
        
        trigger = {
            total_development = 100
            NOT = { is_vassal = yes }
            culture_group = culture_group_troll
            NOT = { primary_culture = culture_blood_troll }
		}
        
        if = {
            limit = {
                government_rank = 3
            }
            
            add_treasury = -300
            add_manpower = -15
            add_adm_power = -50
            add_dip_power = -50
            add_mil_power = -50

            random_country = {
                limit = {
                    is_vassal = no
                    culture_group = culture_group_troll
                    NOT = { primary_culture = culture_blood_troll }
                }
                add_treasury = 300
                add_manpower = 15
                add_adm_power = 50
                add_dip_power = 50
                add_mil_power = 50
            }
        }
        else_if = {
            limit = {
                government_rank = 2
            }
            
            add_treasury = -200
            add_manpower = -10
            add_adm_power = -50
            add_dip_power = -50
            add_mil_power = -50
            
            random_country = {
                limit = {
                    is_vassal = no
                    culture_group = culture_group_troll
                    NOT = { primary_culture = culture_blood_troll }
                }
                
                add_treasury = 200
                add_manpower = 10
                add_adm_power = 50
                add_dip_power = 50
                add_mil_power = 50
            }
        }
        else = {
            add_treasury = -100
            add_manpower = -5
            add_adm_power = -50
            add_dip_power = -50
            add_mil_power = -50
            
            random_country = {
                limit = {
                    is_vassal = no
                    culture_group = culture_group_troll
                    NOT = { primary_culture = culture_blood_troll }
                }
                
                add_treasury = 100
                add_manpower = 5
                add_adm_power = 50
                add_dip_power = 50
                add_mil_power = 50
            }
        }
        
        if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = zul_domination
                        value = 3
                    }
                }
            }
            change_variable = {
                which = zul_domination
                value = 1
            }
        }
        
        add_country_modifier = { 
            name = troll_zebranie_cooldown
            duration = 700
            hidden = yes
        }
	}
}

# Zandalar Fleet Reform
country_event = {
	id = wwu_zandalar.2
	title = wwu_zandalar.2.title
	desc = wwu_zandalar.2.desc
	picture = ZANDALAR_5_eventPicture
    
	is_triggered_only = yes
    
	option = {
		name = "zandalar_event.2.a"
        
		add_country_modifier = {
            name = "mission_zandalar_reformone"
            duration = -1  
        }
	}
	option = {
		name = "zandalar_event.2.b"
        
		add_country_modifier = {
            name = "mission_zandalar_reformtwo"
            duration = -1  
        }
	}
	option = {
		name = "zandalar_event.2.c"
        
		add_country_modifier = {
            name = "mission_zandalar_reformthree"
            duration = -1  
        }
	}
}

#------------------------
# Oondasta Events
#------------------------

# Rise of the King of the Jungle
country_event = {
	id = wwu_zandalar.3
	title = wwu_zandalar.3.title
	desc = wwu_zandalar.3.desc
	picture = ZANDALAR_7_eventPicture
    
	is_triggered_only = yes
    
	option = {
		name = "wwu_zandalar.3.op1"
        
        custom_tooltip = zandalari_event_devilsaur_a
        set_country_flag = zandalari_merc_c
	}
    
	option = {
		name = "wwu_zandalar.3.op2"
        
        custom_tooltip = zandalari_event_devilsaur_b
        set_country_flag = oondasta_egg

        add_country_modifier = {
            name = "oondasta_cooldown"
            duration = 120 
            hidden = yes
        }
        
        hidden_effect = {
            set_variable = {
                which = oondasta_eggs
                value = 0
            }
        }
	}
}

# Growth of Oondasta
country_event = {
	id = wwu_zandalar.4
    title = "wwu_zandalar.4.title"
	desc = "wwu_zandalar.4.desc"
	picture = ZANDALAR_6_eventPicture
    
    trigger = {
        has_country_flag = oondasta_egg
		NOT = { has_country_modifier = oondasta_cooldown }
        
        area_isle_of_giants = {
            type = all
            country_or_subject_holds = ROOT
        }
        NOT = {
            check_variable = {
                which = oondasta_eggs
                value = 10
            }
        }
    }

    mean_time_to_happen = {
		months = 20
	}
    
	immediate = {
		hidden_effect = {
            add_country_modifier = {
                name = "oondasta_cooldown"
                duration = 180 
                hidden = yes
            }
		}
	}

    option = {
        name = "wwu_zandalar.4.op1"
        
        add_years_of_income = -0.5
        oondasta_grow = yes 
    }
    
    option = {
        name = "wwu_zandalar.4.op2"
        
        add_yearly_manpower = -0.5
        oondasta_grow = yes 
    }
    
    option = {
        name = "wwu_zandalar.4.op3"
        
        add_prestige = -5
    }
}

# A Sudden Breakthrough in Growth
country_event = {
	id = wwu_zandalar.5
    title = "wwu_zandalar.5.title"
	desc = "wwu_zandalar.5.desc"
	picture = ZANDALAR_6_eventPicture
    
    trigger = {
        has_country_flag = oondasta_egg
		NOT = { has_country_modifier = oondasta_cooldown }
        
        area_isle_of_giants = {
            type = all
            country_or_subject_holds = ROOT
        }
        
        NOT = { 
            check_variable = {
                which = oondasta_eggs
                value = 10
            }
        }
    }
            
    mean_time_to_happen = {
		months = 30
	}
    
	immediate = {
		hidden_effect = {
            add_country_modifier = {
                name = "oondasta_cooldown"
                duration = 180 
                hidden = yes
            }
		}
    }

    option = {
        name = "wwu_zandalar.5.op1"
        
        add_adm_power = -40
        add_dip_power = -40
        add_mil_power = -40
        
        oondasta_big = yes 
    }
    
    option = {
        name = "wwu_zandalar.5.op2"
        
        add_prestige = -5
    }
}

# Fighting on the Island of Giants
country_event = {
	id = wwu_zandalar.6
    title = "wwu_zandalar.6.title"
	desc = "wwu_zandalar.6.desc"
	picture = ZANDALAR_6_eventPicture
    
    trigger = {
        has_country_flag = oondasta_egg
        NOT = { has_country_modifier = oondasta_cooldown }
        
        area_isle_of_giants = {
            type = all
            country_or_subject_holds = ROOT
        }
        check_variable = {
            which = oondasta_eggs
            value = 2
        }
        NOT = { 
            check_variable = {
                which = oondasta_eggs
                value = 10
            }
        }
    }
    
    mean_time_to_happen = {
		months = 30
	}
    
	immediate = {
		hidden_effect = {
            add_country_modifier = {
                name = "oondasta_cooldown"
                duration = 180 
                hidden = yes
            }
		}
	}
    
    option = {
        name = "wwu_zandalar.6.op1"
        
        random_list = {
            75 = {
                oondasta_mega = yes 
            }
            20 = {
                oondasta_back = yes 
            }
            5 = {
                add_prestige = -10
                custom_tooltip = oondasta_dead
                hidden_effect = {
                    clr_country_flag = oondasta_egg
                }
            }
        }
    }
    
    option = {
        name = "wwu_zandalar.6.op2"
        
        add_prestige = -5
    }
}

# Oondasta is ready for Armor
country_event = {
	id = wwu_zandalar.7
    title = "wwu_zandalar.7.title"
	desc = "wwu_zandalar.7.desc"
	picture = ZANDALAR_8_eventPicture
    
    trigger = {
        has_country_flag = oondasta_egg
        NOT = { has_country_modifier = oondasta_cooldown }
        
        area_isle_of_giants = {
            type = all
            country_or_subject_holds = ROOT
        }
        
        check_variable = {
            which = oondasta_eggs
            value = 10
        }
    }

    mean_time_to_happen = {
		months = 1
	}
    
	immediate = {
		hidden_effect = {
            add_country_modifier = {
                name = "oondasta_cooldown"
                duration = 180 
                hidden = yes
            }
            clr_country_flag = oondasta_egg
		}
	}
    
    option = {
        name = "wwu_zandalar.7.op1"

        set_country_flag = zandalari_merc_ba
        add_mil_power = -50
        custom_tooltip = zandalari_event_oondasta_rise_a
    }
    
    option = {
        name = "wwu_zandalar.7.op2"

        set_country_flag = zandalari_merc_bb
        add_mil_power = -100
        custom_tooltip = zandalari_event_oondasta_rise_b
    }
    
    option = {
        name = "wwu_zandalar.7.op3"

        set_country_flag = zandalari_merc_bc
        add_mil_power = -150
        custom_tooltip = zandalari_event_oondasta_rise_c
    }
}

# Fired for Nazmir
country_event = {
	id = wwu_zandalar.8
    title = "wwu_zandalar.8.title"
	desc = "wwu_zandalar.8.desc"
	picture = ULDIR_1_eventPicture
    
    # VAWSER: this lacks localization yet isn't hidden, should it be?
    
	major = yes
	major_trigger = {
		tag = A78 # Zandalar
	}
    
    trigger = {
        has_country_flag = wwu_zandalar_8
        NOT = { has_country_flag = zandalari_zandalar8 }
    }
            
    mean_time_to_happen = {
		months = 1
	}
    
    option = {
        name = wwu_zandalar.9.option.a
        
        set_country_flag = zandalari_zandalar8
        
        if = {
            limit = {
                war_with = A78 # Zandalar
            }
            white_peace = A78 # Zandalar
        }
        else = {
            add_truce_with = A78 # Zandalar
        }
        
        area_heart_of_darkness = {
            add_core = A78 # Zandalar
        }
        area_the_necropolis = {
            add_core = A78 # Zandalar
        }
    
        ai_chance = { 
            factor = 1	
        }
    }
    
    # VAWSER: this seems pointless if this is not a visible event, it will never be selected due to the ai_chance
    option = {
        name = wwu_zandalar.9.option.b
        
        set_country_flag = zandalari_zandalar8
        
        # Zandalar
        A78 = {
            create_march = NAZ
        }
        
        ai_chance = { 
            factor = 0	
        }
    }
}

# Fired for countries with provinces claimed by Zandalar
country_event = {
	id = wwu_zandalar.9
    title = "wwu_zandalar.9.title"
	desc = "wwu_zandalar.9.desc"
	picture = EAGLEHORN_BOW_eventPicture
    
    # VAWSER: this lacks localization yet isn't hidden, should it be?
    
	major = yes
	major_trigger = {
		tag = A78
	}

    trigger = {
        has_country_flag = wwu_zandalar_9
        NOT = { has_country_flag = zandalari_zandalar9 }
    }

    mean_time_to_happen = {
		months = 1
	}
    
    option = {
        name = wwu_zandalar.9.option.a
        
        set_country_flag = zandalari_zandalar9
        
        if = {
            limit = {
                war_with = A78 # Zandalar
            }
            white_peace = A78 # Zandalar
        }
        else = {
            add_truce_with = A78 # Zandalar
        }
        
        every_owned_province = {
            add_core = A78 # Zandalar
        }
    
        ai_chance = { 
            factor = 1	
        }
    }
        
    option = {
        name = wwu_zandalar.9.option.b
        
        set_country_flag = zandalari_zandalar9
        
        # Zandalar
        A78 = {
            create_march = ROOT
        }
        
        ai_chance = { 
            factor = 1	
        }
    }
    
    option = {
        name = wwu_zandalar.9.option.c
        
        set_country_flag = zandalari_zandalar9
        
        # Zandalar
        A78 = {
            inherit = ROOT
        }
        
        ai_chance = { 
            factor = 1	
        }
    }
}

# Promotion of another Loa
country_event = {
	id = wwu_zandalar.10
    title = "wwu_zandalar.10.title"
	desc = "wwu_zandalar.10.desc"
	picture = ZANDALAR_9_eventPicture
    
	is_triggered_only = yes
	
    option = {
        name = "wwu_zandalar.10.op1"
        
        # The Necropolis
        1127 = {
            change_province_name = "Spot of Pa'ku"
            rename_capital = "Spot of Pa'ku"
            change_trade_goods = flying_mounts
        }
        
        # Terrace of Sorrows
        1124 = {
            change_trade_goods = grain
        }
        
        set_country_flag = zandalari_merc_h
        custom_tooltip = zandalari_tooltip_five_one_a
    }
    
    option = {
        name = "wwu_zandalar.10.op2"
        
        # The Necropolis
        1127 = {
            change_province_name = "Spot of Gonk"
            rename_capital = "Spot of Gonk"
            change_trade_goods = warbeasts
        }
        
        # Terrace of Sorrows
        1124 = {
            change_trade_goods = grain
        }
        
        set_country_flag = zandalari_merc_i
        custom_tooltip = zandalari_tooltip_five_one_b
    }
    
    option = {
        name = "wwu_zandalar.10.op3"
        
        # The Necropolis
        1127 = {
            change_province_name = "Spot of Torcali"
            rename_capital = "Spot of Torcali"
            change_trade_goods = warbeasts
        }
        
        # Terrace of Sorrows
        1124 = {
            change_trade_goods = grain
        }
        
        set_country_flag = zandalari_merc_j
        custom_tooltip = zandalari_tooltip_five_one_c
    }
}

# The Rusty Empire
country_event = {
	id = wwu_zandalar.11
    title = "wwu_zandalar.11.title"
	desc = "wwu_zandalar.11.desc"
	picture = ZANDALAR_DOOR_eventPicture

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
            add_country_modifier = {
                name = "prophet_zul_start_cooldown"
                duration = 3650 
                hidden = yes
            }
            set_country_flag = prophet_zul_here_a
		}
	}
    
	option = {
		name = wwu_zandalar.11.op1
        
		custom_tooltip = zandalari_tooltip_rusty_empire_a
        
        add_country_modifier = {
            name = "rusty_empire_one"
            duration = -1  
        }
        
        add_country_modifier = {
            name = "rusty_empire_two"
            duration = -1  
        }
        
        add_country_modifier = {
            name = "rusty_empire_three"
            duration = -1  
        }
	}
}

# End of The Rusty Empire
country_event = {
	id = wwu_zandalar.12
    title = "wwu_zandalar.12.title"
	desc = "wwu_zandalar.12.desc"
	picture = ZANDALAR_eventPicture
    
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			set_country_flag = rusty_empire
		}
	}

	option = {
		name = wwu_zandalar.12.op1
        
		add_stability = 1
	}
}

# Fired by wwu_zan_four_ten (Choosing the future of Zandalar)
country_event = {
	id = wwu_zandalar.13
    title = "wwu_zandalar.13.title"
	desc = "wwu_zandalar.13.desc"
	picture = EAGLEHORN_BOW_eventPicture
    
    # VAWSER: this lacks localization yet isn't hidden, should it be?
	is_triggered_only = yes
	
    option = {
        name = "wwu_zandalar.13.op1"
        
        set_country_flag = wwu_zandalar.13.op1.choose
    }
    option = {
        name = "wwu_zandalar.13.op2"
        
        set_country_flag = wwu_zandalar.13.op2.choose
    }
    option = {
        name = "wwu_zandalar.13.op3"
        
        set_country_flag = wwu_zandalar.13.op3.choose
    }
}

#-----------------------------------
# Prophet Zul events
#-----------------------------------
# VAWSER: never triggered?
country_event = {
	id = wwu_zandalar.14
    title = "wwu_zandalar.14.title"
	desc = "wwu_zandalar.14.desc"
	picture = EAGLEHORN_BOW_eventPicture

	is_triggered_only = yes
	
	option = {
		name = wwu_zandalar.14.op1
        
        change_variable = {
            which = zul_influence 
            value = 5
        }
	}
	option = {
		name = wwu_zandalar.14.op1
        
        change_variable = {
            which = zul_influence 
            value = 20
        }
	}
	option = {
		name = wwu_zandalar.14.op1
        
        change_variable = {
            which = zul_influence 
            value = -5
        }
	}
	option = {
		name = wwu_zandalar.14.op1
        
        change_variable = {
            which = zul_influence 
            value = -20
        }
	}
	option = {
		name = wwu_zandalar.14.op1
        
        change_variable = {
            which = zul_power
            value = 5
        }
	}
	option = {
		name = wwu_zandalar.14.op1
        
        change_variable = {
            which = zul_power
            value = 20
        }
	}
	option = {
		name = wwu_zandalar.14.op1
        
        change_variable = {
            which = zul_power
            value = -5
        }
	}
	option = {
		name = wwu_zandalar.14.op1
        
        change_variable = {
            which = zul_power 
            value = -20
        }
	}
}

# The Prophet Zul and the Council of Zanchul
country_event = {
	id = wwu_zandalar.15
    title = "wwu_zandalar.15.title"
	desc = "wwu_zandalar.15.desc"
	picture = ZANDALAR_2_eventPicture
    
    fire_only_once = yes

    trigger = {
        has_country_flag = prophet_zul_here_a
		NOT = { has_country_modifier = prophet_zul_start_cooldown }
    }
	

	mean_time_to_happen = {
		years = 1
	}
	
	option = {
		name = wwu_zandalar.15.op1
        
        custom_tooltip = zandalari_event_prophet_zul_here_already
        
        hidden_effect = {
            set_variable = {
                which = zul_power
                value = 0
            }
        }
        
        hidden_effect = {
            set_variable = {
                which = zul_influence
                value = 0
            }
        }
                
        set_country_flag = prophet_zul_here_already
        set_country_flag = council_of_zanchul_already
	}
}

# The Council of Zanchul - Triggered via decision
country_event = {
	id = wwu_zandalar.16
	title = wwu_zandalar.16.title
	desc = wwu_zandalar.16.desc
	picture = ZANDALAR_1_eventPicture
    
	is_triggered_only = yes
    
    # Advice of the Prophet Zul
	option = {
		name = "wwu_zandalar.16.op1"
		highlight = yes
        
		if = {
            limit = {
                NOT = { has_country_modifier = zul_menu_cooldown }
                NOT = {
                    check_variable = {
                        which = zul_influence 
                        value = 50
                    }
                }
            }
			custom_tooltip = zandalari_event_prophet_zul_open_menu_a
            
			hidden_effect = {
                country_event = { id = wwu_zandalar.17 }
            }
        }
        
		if = {
            limit = {
                OR = {
                    has_country_modifier = zul_menu_cooldown
                    check_variable = {
                        which = zul_influence 
                        value = 50
                    }
                }
            }
            clr_country_flag = council_of_zanchul_already_open
        }
        
		custom_tooltip = zandalari_event_prophet_zul_open_menu_b
    }

    # Fast money injection from the estates
	option = {
		name = "wwu_zandalar.16.op2"
        
		if = {
            limit = {
                crown_land_share = 10
                NOT = {
                    check_variable = {
                        which = zul_influence 
                        value = 50
                    }
                }
            }
            
            add_years_of_income = 0.45
            add_inflation = 0.1
            
            change_estate_land_share = {
                estate = estate_clergy
                share = 1
            }
            
            change_estate_land_share = {
                estate = estate_nobility
                share = 1
            }
            
            zul_power_5_a = yes
        }
        
		custom_tooltip = zandalari_event_council_not_ready
        clr_country_flag = council_of_zanchul_already_open
	}
    
    # Finding a new champion
	option = {
		name = "wwu_zandalar.16.op3"
        
		if = {
            limit = {
                crown_land_share = 10
                NOT = {
                    check_variable = {
                        which = zul_influence 
                        value = 50
                    }
                }
            }
        
            create_general = { 
                tradition = 70 
            }
            
            change_estate_land_share = {
                estate = estate_clergy
                share = 1.5
            }
            
            change_estate_land_share = {
                estate = estate_nobility
                share = 1.5
            }
            
            zul_power_5_a = yes
        }
        
		custom_tooltip = zandalari_event_council_not_ready
        clr_country_flag = council_of_zanchul_already_open
	}
    
    # Estate investment
	option = {
		name = "wwu_zandalar.16.op4"
        
		if = {
            limit = {
                crown_land_share = 10
                NOT = {
                    check_variable = {
                        which = zul_influence 
                        value = 50
                    }
                }
            }
        
            custom_tooltip = zandalari_event_council_random_dev
            hidden_effect = {
                random_owned_province = {
                    limit = {
                        NOT = { development = 20 }
                    }
                    add_base_tax = 2
                    add_base_production = 2
                    add_base_manpower = 2
                }
            }

            change_estate_land_share = {
                estate = estate_clergy
                share = 2
            }
            
            change_estate_land_share = {
                estate = estate_nobility
                share = 2
            }
            
            zul_power_5_a = yes
        }
        
		custom_tooltip = zandalari_event_council_not_ready
        clr_country_flag = council_of_zanchul_already_open
	}
    
    # Reduce the power of the council and the Zul
	option = {
		name = "wwu_zandalar.16.op5"
        
		if = {
            limit = {
                NOT = { has_country_modifier = zul_menu_power_influence_cooldown }

                check_variable = {
                    which = zul_power
                    value = 10
                }
            }
            add_stability = -2
            add_prestige = -10
            
            zul_power_10_b = yes
            
            hidden_effect = {
                add_country_modifier = {
                    name = "zul_menu_power_influence_cooldown"
                    duration = 3650
                    hidden = yes
                }
            }
        }
        
        custom_tooltip = zandalari_event_council_not_ready_buff
        clr_country_flag = council_of_zanchul_already_open
	}
	
    # Reduce the impatience of the council the Zul
	option = {
		name = "wwu_zandalar.16.op6"
        
		if = {
            limit = {
                NOT = { has_country_modifier = zul_menu_power_influence_cooldown }
                check_variable = {
                    which = zul_influence
                    value = 10
                }
            }
            
            add_corruption = 4
            add_legitimacy = -10
            zul_influence_10_b = yes
            
            hidden_effect = {
                add_country_modifier = {
                    name = "zul_menu_power_influence_cooldown"
                    duration = 3650
                    hidden = yes
                }
            }
        }
        
        custom_tooltip = zandalari_event_council_not_ready_buff
        clr_country_flag = council_of_zanchul_already_open
	}
	
    # Back
	option = {
		name = "wwu_zandalar.16.op7"
        
        clr_country_flag = council_of_zanchul_already_open
	}
}
	
# The Prophet Zul
country_event = {
	id = wwu_zandalar.17
	title = wwu_zandalar.17.title
	desc = wwu_zandalar.17.desc
	picture = ZANDALAR_2_eventPicture
    
	is_triggered_only = yes
    
    # A vision of the future
	option = {
		name = "wwu_zandalar.17.op1"
        
		add_country_modifier = {
            name = "zul_technology"
            duration = 1825
        }
        
        zul_power_10_a = yes 
        
        hidden_effect = {
            country_event = { id = wwu_zandalar.16 }
			add_country_modifier = {
                name = "zul_menu_cooldown"
                duration = 1825 
                hidden = yes
            }
        }
	}
    
    # A vision of the development
	option = {
		name = "wwu_zandalar.17.op2"
        
        add_adm_power = 75
        add_dip_power = 75
        add_mil_power = 75
        
        zul_power_10_a = yes 
        
        hidden_effect = {
            country_event = { id = wwu_zandalar.16 }
			add_country_modifier = {
                name = "zul_menu_cooldown"
                duration = 1825 
                hidden = yes
            }
        }
	}
    
    # A vision of the hostile nations
	option = {
		name = "wwu_zandalar.17.op3"
        
		custom_tooltip = zandalari_event_zul_spy
        
		hidden_effect = {
            every_rival_country = { 
                add_spy_network_from = {
                    who = A78 # Zandalar
                    value = 35
                }
            }
        }
        
        zul_power_10_a = yes 
        
        hidden_effect = {
            country_event = { id = wwu_zandalar.16 }
            add_country_modifier = {
                name = "zul_menu_cooldown"
                duration = 1825 
                hidden = yes
            }
        }
	}
    
    # An enchanted item
	option = {
		name = "wwu_zandalar.17.op4"
        
		add_mana_1 = yes
        zul_power_10_a = yes 
        
        hidden_effect = {
            country_event = { id = wwu_zandalar.16 }
            
            add_country_modifier = {
                name = "zul_menu_cooldown"
                duration = 1825 
                hidden = yes
            }
        }
	}
	
    # Back
	option = {
		name = "wwu_zandalar.17.op5"
        
        hidden_effect = {
            country_event = { id = wwu_zandalar.16 }
        }
    }
}
	
# Nazeshi Naga invasion!
country_event = {
	id = wwu_zandalar.18
    title = "wwu_zandalar.18.title"
	desc = "wwu_zandalar.18.desc"
	picture = HUNGRY_NAGA_eventPicture
    
    fire_only_once = yes
    
	trigger = {
        NOT = { has_global_flag = zandalari_no_naga_attack }
        
        OR = {
            # Backwater Beach
            2745 = {
                OR =  {
                    colonysize = 20
                    owned_by = ROOT
                }
            }
            # Seeker's Outpost
            2744 = {
                OR =  {
                    colonysize = 20
                    owned_by = ROOT
                }
            }
            # Dreadpearl Shallows
            1133 = {
                OR =  {
                    colonysize = 20
                    owned_by = ROOT
                }
            }
            # Covescale Rise
            2616 = {
                OR =  {
                    colonysize = 20
                    owned_by = ROOT
                }
            }
        }
	}
    
    mean_time_to_happen = { 
        days = 1
    }
    
    option = {
        name = "wwu_zandalar.18.op1"
        
        custom_tooltip = zandalari_event_naga_start
        
        hidden_effect = {
            # Backwater Beach
            2745 = {
                cede_province = ZNI
                add_core = ZNI
            }
            # Seeker's Outpost
            2744 = {
                cede_province = ZNI
                add_core = ZNI
            }
            # Dreadpearl Shallows
            1133 = {
                cede_province = ZNI
                add_core = ZNI
            }
            # Covescale Rise
            2616 = {
                cede_province = ZNI
                add_core = ZNI
            }
            
            ZNI = {
                capital_scope = {
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                    infantry = ZNI
                }
                
                add_country_modifier = {
                    name = zandalar_naga_invasion
                    duration = -1
                }
                
                create_general = { tradition = 70 }
                
                add_treasury = 200
                add_manpower = 10
                
                set_country_flag = po_destroy_nagas
            }
            
            continent_zandalar = {
                discover_country = ZNI
            }
        }
        ZNI = {
            declare_war_with_cb = {
                who = ROOT
                casus_belli = cb_naga_invasion_on_zandalar
            }
        }
        
        set_global_flag = zandalari_no_naga_attack
        set_country_flag = zandalari_no_naga_attack_always
    }

    option = {
        name = "wwu_zandalar.18.op2"
        
        custom_tooltip = zandalari_event_naga_lose
        
        hidden_effect = {
            # Backwater Beach
            2745 = {
                cede_province = ---
                remove_core = ZNI
            }
            # Seeker's Outpost
            2744 = {
                cede_province = ---
                remove_core = ZNI
            }
            # Dreadpearl Shallows
            1133 = {
                cede_province = ---
                remove_core = ZNI
            }
            # Covescale Rise
            2616 = {
                cede_province = ---
                remove_core = ZNI
            }
        }
        
        add_prestige = -10
        add_legitimacy = -10
        
        if = {
            limit = {   
                tag = A78 # Zandalar
                has_country_flag = prophet_zul_here_already
            }
            zul_power_5_a = yes
        }
    }
}

# Nagas Driven Out!
country_event = {
	id = wwu_zandalar.19
    title = "wwu_zandalar.19.title"
	desc = "wwu_zandalar.19.desc"
	picture = HUNGRY_NAGA_eventPicture
    
    is_triggered_only = yes
    
	immediate = {
        clr_country_flag = zandalari_no_naga_attack_always
	}
        
    option = {
        name = "wwu_zandalar.19.op1"
        
        hidden_effect = {
            # Backwater Beach
            2745 = {
                cede_province = ---
                remove_core = ZNI
            }
            # Seeker's Outpost
            2744 = {
                cede_province = ---
                remove_core = ZNI
            }
            # Dreadpearl Shallows
            1133 = {
                cede_province = ---
                remove_core = ZNI
            }
            # Covescale Rise
            2616 = {
                cede_province = ---
                remove_core = ZNI
            }
        }
        
        custom_tooltip = zandalari_event_naga_win
        
        add_treasury = 200
        add_prestige = 5
        add_legitimacy = 5
        
        if = {
            limit = {
                tag = A78 # Zandalar
                has_country_flag = prophet_zul_here_already
            }
            zul_power_5_b = yes
        }
    }
}

# Defeated by the Nagas
country_event = {
	id = wwu_zandalar.20
    title = "wwu_zandalar.20.title"
	desc = "wwu_zandalar.20.desc"
	picture = HUNGRY_NAGA_eventPicture
    
	trigger = {
        has_country_flag = zandalari_no_naga_attack_always
        NOT = { war_with = ZNI }
	}
    
	immediate = {
		hidden_effect = {
            clr_country_flag = zandalari_no_naga_attack_always
            clr_global_flag = zandalari_no_naga_attack
		}
	}
    
    mean_time_to_happen = { 
        days = 1
    }
    
    option = {
        name = "wwu_zandalar.20.op1"
        
        custom_tooltip = zandalari_event_naga_lose
        
        hidden_effect = {
            # Backwater Beach
            2745 = {
                cede_province = ---
                remove_core = ZNI
            }
            # Seeker's Outpost
            2744 = {
                cede_province = ---
                remove_core = ZNI
            }
            # Dreadpearl Shallows
            1133 = {
                cede_province = ---
                remove_core = ZNI
            }
            # Covescale Rise
            2616 = {
                cede_province = ---
                remove_core = ZNI
            }
        }

        add_prestige = -10
        add_legitimacy = -10
        
        if = {
            limit = {
                tag = A78 # Zandalar
                has_country_flag = prophet_zul_here_already
            }
            zul_power_5_a = yes
        }
    }
}

# Vilescale Naga invasion!
country_event = {
	id = wwu_zandalar.21
    title = "wwu_zandalar.21.title"
	desc = "wwu_zandalar.21.desc"
	picture = HUNGRY_NAGA_eventPicture
    
    fire_only_once = yes
    
	trigger = {
        OR = {
            # Nazwatha
            1129 = {
                OR = {
                    colonysize = 20
                    owned_by = ROOT
                }
            }
            # Naz'agal
            2713 = {
                OR = {
                    colonysize = 20
                    owned_by = ROOT
                }
            }
            # Sundered Span
            2714 = {
                OR = {
                    colonysize = 20
                    owned_by = ROOT
                }
            }
        }
        
        NOT = { has_global_flag = nazmir_no_naga_attack }
	}
    
    mean_time_to_happen = { 
        days = 1
    }
    
    option = {
        name = "wwu_zandalar.21.op1"
        
        custom_tooltip = zandalari_event_naga_start
        
        hidden_effect = {
            # Nazwatha
            1129 = {
                cede_province = NNI
                add_core = NNI
            }
            # Naz'agal
            2713 = {
                cede_province = NNI
                add_core = NNI
            }
            # Sundered Span
            2714 = {
                cede_province = NNI
                add_core = NNI
            }

            NNI = {
                capital_scope = {
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                    infantry = NNI
                }
            }
            
            NNI = {
                add_country_modifier = {
                    name = zandalar_naga_invasion
                    duration = -1
                }
                
                create_general = { tradition = 70 }
                add_treasury = 200
                add_manpower = 10
                
                set_country_flag = po_destroy_nagas_N
            }
            
            continent_zandalar = {
                discover_country = NNI
            }
        }
        
        NNI = {
            declare_war_with_cb = {
                who = ROOT
                casus_belli = cb_naga_invasion_on_nazmir
            }
        }

        set_global_flag = nazmir_no_naga_attack
        set_country_flag = nazmir_no_naga_attack_always
    }
    
    option = {
        name = "wwu_zandalar.21.op2"
        
        custom_tooltip = zandalari_event_naga_lose
        
        hidden_effect = {
            # Nazwatha
            1129 = {
                cede_province = ---
                remove_core = NNI
            }
            # Naz'agal
            2713 = {
                cede_province = ---
                remove_core = NNI
            }
            # Sundered Span
            2714 = {
                cede_province = ---
                remove_core = NNI
            }
        }
        
        add_prestige = -10
        add_legitimacy = -10
        
        if = {
            limit = {
                tag = A78
                has_country_flag = prophet_zul_here_already
            }
            zul_power_5_a = yes
        }
    }
}

# Vilescale Driven Out!
country_event = {
	id = wwu_zandalar.22
    title = "wwu_zandalar.22.title"
	desc = "wwu_zandalar.21.desc"
	picture = HUNGRY_NAGA_eventPicture
    
    is_triggered_only = yes
    
	immediate = {
        clr_country_flag = nazmir_no_naga_attack_always
	}
        
    option = {
        name = "wwu_zandalar.22.op1"
        
        hidden_effect = {
            # Nazwatha
            1129 = {
                cede_province = ---
                remove_core = NNI
            }
            # Naz'agal
            2713 = {
                cede_province = ---
                remove_core = NNI
            }
            # Sundered Span
            2714 = {
                cede_province = ---
                remove_core = NNI
            }
        }
        custom_tooltip = zandalari_event_naga_win
        
        add_treasury = 200
        add_prestige = 5
        add_legitimacy = 5
        
        if = {
            limit = {
                tag = A78
                has_country_flag = prophet_zul_here_already
            }
            
            zul_power_5_b = yes
        }
    }
}

# Defeated by the Vilescale
country_event = {
	id = wwu_zandalar.23
    title = "wwu_zandalar.23.title"
	desc = "wwu_zandalar.23.desc"
	picture = HUNGRY_NAGA_eventPicture
    
	trigger = {
        has_country_flag = nazmir_no_naga_attack_always
        NOT = { war_with = NNI }
	}
    
	immediate = {
		hidden_effect = {
            clr_country_flag = nazmir_no_naga_attack_always
            clr_global_flag = nazmir_no_naga_attack
		}
	}
    
    mean_time_to_happen = { 
        days = 1
    }
    
    option = {
        name = "wwu_zandalar.23.op1"
        
        custom_tooltip = zandalari_event_naga_lose_z
        hidden_effect = {
            # Nazwatha
            1129 = {
                cede_province = ---
                remove_core = NNI
            }
            # Naz'agal
            2713 = {
                cede_province = ---
                remove_core = NNI
            }
            # Sundered Span
            2714 = {
                cede_province = ---
                remove_core = NNI
            }
        }

        add_prestige = -10
        add_legitimacy = -10
        
        if = {
            limit = {
                tag = A78
                has_country_flag = prophet_zul_here_already
            }
            
            zul_power_5_a = yes
        }
    }
}


# Port of Zem'lan
country_event = {
	id = wwu_zandalar.24
    title = "wwu_zandalar.24.title"
	desc = "wwu_zandalar.24.desc"
	picture = ZANDALAR_10_eventPicture
    
    fire_only_once = yes
    
	trigger = {
        NOT = { has_global_flag = skeleton_troll_pirate_attack }
        # Port of Zem'lan
        1114 = {
            OR = {
                colonysize = 20
                owned_by = ROOT
            }
        }
	}
    
    mean_time_to_happen = { 
        days = 1
    }
    
    # Let us finish their service!
    option = {
        name = "wwu_zandalar.24.op1"
        
        custom_tooltip = zandalari_event_naga_start
        
        hidden_effect = {
            # Port of Zem'lan
            1114 = {
                cede_province = TSP
                add_core = TSP
            }
            
            # Zem'lan Isles
            2759 = {
                cede_province = TSP
                add_core = TSP
            }
            
            TSP = {
                capital_scope = {
                    spawn_infantry = {
                        AMOUNT = 36
                        TAG = TSP
                    }
                    spawn_cavalry = {
                        AMOUNT = 8
                        TAG = TSP
                    }
                    spawn_artillery = {
                        AMOUNT = 6
                        TAG = TSP
                    }
                }
                add_country_modifier = {
                    name = skeleton_troll_invasion
                    duration = -1
                }
                
                define_ruler = {
                    name = "Zem'lan"
                    adm = 4
                    dip = 4
                    mil = 4
                    age = 55
                    claim = 95
                }
                
                define_general = {
                    name = "Pirate-King Zem'lan"
                    shock = 5
                    fire = 5
                    manuever = 4
                    siege = 2
                }
                
                add_treasury = 1000
                add_manpower = 50
                add_prestige = 200
                
                set_country_flag = po_skeleton_troll_pirate
            }
            
            continent_zandalar = {
                discover_country = TSP
            }
            continent_pandaria = {
                discover_country = TSP
            }
            region_zandalar_seas = {
                discover_country = TSP
            }
            region_pandaria_seas = {
                discover_country = TSP
            }
            region_paradise_seas = {
                discover_country = TSP
            }
            region_darkspear_isles = {
                discover_country = TSP
            }
        }
        
        TSP = {
            declare_war_with_cb = {
                who = ROOT
                casus_belli = cb_skeleton_troll_pirate
            }
        }

        set_global_flag = skeleton_troll_pirate_attack
        set_country_flag = skeleton_troll_pirate_attack_always
    }

    # Let's join the Zem'lan crew!
    option = {
        name = "wwu_zandalar.24.op2"
        
        custom_tooltip = zandalari_event_skeleton_troll_play
        
        # Port of Zem'lan
        1114 = {
            cede_province = TSP
            add_core = TSP
            change_trade_goods = gemstones
            
            add_permanent_province_modifier = {
                name = troll_skeleton_pirate
                duration = -1
                desc = troll_skeleton_pirate_desc
            }
        }
        
        # Zem'lan Isles
        2759 = {
            cede_province = TSP
            add_core = TSP
            change_province_name = "Golden Isle"
            rename_capital = "Golden Isle"
            change_trade_goods = gold
        }
        
        TSP = {
            define_ruler = {
                name = "Zem'lan"
                adm = 4
                dip = 4
                mil = 4
                age = 55
                claim = 100
            }
            add_treasury = 500
            add_prestige = 100

            set_country_flag = skeleton_troll_pirate_player
        }

        hidden_effect = {
            TSP = {
                add_manpower = 10
                
                capital_scope = {
                    galley = TSP
                    galley = TSP
                    galley = TSP
                    light_ship = TSP
                    light_ship = TSP
                    light_ship = TSP
                }
            }
            continent_zandalar = {
                discover_country = TSP
            }
            continent_pandaria = {
                discover_country = TSP
            }
            region_zandalar_seas = {
                discover_country = TSP
            }
            region_pandaria_seas = {
                discover_country = TSP
            }
            region_paradise_seas = {
                discover_country = TSP
            }
            region_darkspear_isles = {
                discover_country = TSP
            }
            
            switch_tag = TSP
        }
        
        set_global_flag = skeleton_troll_pirate_attack
    }
    
    option = {
        name = "wwu_zandalar.24.op3"
        
        custom_tooltip = zandalari_event_naga_lose
        
        hidden_effect = {
            # Port of Zem'lan
            1114 = {
                cede_province = ---
                remove_core = TSP
            }
            
            # Zem'lan Isles
            2759 = {
                cede_province = ---
                remove_core = TSP
            }
        }
        
        add_prestige = -5
    }
}

# Port of Zem'lan has been cleared
country_event = {
	id = wwu_zandalar.25
    title = "wwu_zandalar.25.title"
	desc = "wwu_zandalar.25.desc"
	picture = ZANDALAR_10_eventPicture
    
    is_triggered_only = yes
    
	immediate = {
        clr_country_flag = skeleton_troll_pirate_attack_always
	}
        
    option = {
        name = "wwu_zandalar.25.op1"
        
        hidden_effect = {
            # Port of Zem'lan
            1114 = {
                cede_province = ---
                remove_core = TSP
            }
            # Zem'lan Isles
            2759 = {
                cede_province = ---
                remove_core = TSP
            }
        }
        
        custom_tooltip = zandalari_event_naga_win
        add_treasury = 500
        add_prestige = 10
        add_legitimacy = 10
        
        # Port of Zem'lan
        1114 = {
            cede_province = ROOT
            add_core = ROOT
            change_trade_goods = gemstones 
        }
        
        if = {
            limit = {
                tag = A78
                has_country_flag = prophet_zul_here_already
            }
            zul_power_10_b = yes
        }
    }
}

# Defeated by the Pirate-king
country_event = {
	id = wwu_zandalar.26
    title = "wwu_zandalar.26.title"
	desc = "wwu_zandalar.26.desc"
	picture = ZANDALAR_10_eventPicture
    
	trigger = {
        has_country_flag = skeleton_troll_pirate_attack_always
        NOT = { war_with = TSP }
	}
    
	immediate = {
		hidden_effect = {
            clr_country_flag = skeleton_troll_pirate_attack_always
            clr_global_flag = skeleton_troll_pirate_attack
		}
	}
    
    mean_time_to_happen = { 
        days = 1
    }
    
    option = {
        name = "wwu_zandalar.26.op1"
        
        custom_tooltip = zandalari_event_naga_lose
        
        hidden_effect = {
            # Port of Zem'lan
            1114 = {
                cede_province = ---
                remove_core = TSP
            }
            # Zem'lan Isles
            2759 = {
                cede_province = ---
                remove_core = TSP
            }
        }

        add_prestige = -5
        
        if = {
            limit = {
                tag = A78
                has_country_flag = prophet_zul_here_already
            }
            add_prestige = -5
            zul_power_5_a = yes
        }
    }
}

# Zem'lan Revenants - Handle Ruler State
country_event = {
	id = wwu_zandalar.27
    title = "wwu_zandalar.27.title"
	desc = "wwu_zandalar.27.desc"
	picture = EAGLEHORN_BOW_eventPicture
    
	trigger = {
        tag = TSP
        
        # Port of Zem'lan
        1114 = {
            owned_by = TSP
            has_province_modifier = troll_skeleton_pirate
        }
        
        OR = {
            NOT = { has_ruler_flag = is_immortal }
            adm = 5
            dip = 5
            mil = 5
        }
    }
    
    mean_time_to_happen = { 
        days = 1
    }
    
    option = {
        name = wwu_zandalar.27.option.a

        if = {
            limit = {
                NOT = { has_ruler_flag = is_immortal }
            }
            
            set_ruler_flag = is_immortal
            
            if = {
                limit = {
                    adm = 7
                }
                change_adm = -3
            }
            else_if = {
                limit = {
                    adm = 6
                }
                change_adm = -2
            }
            else_if = {
                limit = {
                    adm = 5
                }
                change_adm = -1
            }
            
            if = {
                limit = {
                    dip = 7
                }
                change_dip = -3
            }
            else_if = {
                limit = {
                    dip = 6
                }
                change_dip = -2
            }
            else_if = {
                limit = {
                    dip = 5
                }
                change_dip = -1
            }
            
            if = {
                limit = {
                    mil = 7
                }
                change_mil = -3
            }
            else_if = {
                limit = {
                    mil = 6
                }
                change_mil = -2
            }
            else_if = {
                limit = {
                    mil = 5
                }
                change_mil = -1
            }
        }
    }
}

# Zem'lan Revenants - Handle Ruler State - Improved Curse
country_event = {
	id = wwu_zandalar.28
    title = "wwu_zandalar.28.title"
	desc = "wwu_zandalar.28.desc"
	picture = ZANDALAR_10_eventPicture
    
	hidden = yes
    
	trigger = {
        tag = TSP
            
        # Port of Zem'lan
        1114 = {
            owned_by = TSP
            has_province_modifier = troll_skeleton_pirate_better
        }
        
        OR = {
            NOT = {has_ruler_flag = is_immortal}
            adm = 7
            dip = 7
            mil = 7
        }
    }
    
    mean_time_to_happen = { 
        days = 1
    }
    
    option = {
        name = "wwu_zandalar.28.op1"

        if = {
            limit = {
                adm = 7
            }
            change_adm = -1
        }
        
        if = {
            limit = {
                dip = 7
            }
            change_dip = -1
        }
        
        if = {
            limit = {
                mil = 7
            }
            change_mil = -1
        }
    }
}

# No access to the curse!
country_event = {
	id = wwu_zandalar.29
    title = "wwu_zandalar.29.title"
	desc = "wwu_zandalar.29.desc"
	picture = ZANDALAR_10_eventPicture
    
    fire_only_once = yes
    
	trigger = {
        tag = TSP
        has_ruler_flag = is_immortal
        
        # Port of Zem'lan
        1114 = {
            NOT = { owned_by = TSP }
        }
    }
    
    mean_time_to_happen = { 
        days = 1
    }
    
    option = {
        name = "wwu_zandalar.29.op1"
        
        kill_ruler = yes
    }
}

# Amani Destroyed
country_event = {
	id = wwu_zandalar.30
    title = "wwu_zandalar.30.title"
	desc = "wwu_zandalar.30.desc"
	picture = ZANDALAR_3_eventPicture
    goto = target_province
    
	fire_only_once = yes
    
	trigger = {
        tag = A78 # Zandalar
        NOT = { exists = A58 } # Amani
        
        NOT = {
            any_owned_province = {
                region = region_zulaman
            }
        }
        
        any_owned_province = {
            has_port = yes
            region = region_zuldazar
        }
    }
    
    immediate = {
        hidden_effect = {
            random_owned_province = {
                limit = {
                    has_port = yes
                    region = region_zuldazar
                }
                save_event_target_as = target_province
            }
        }
    }
    
    mean_time_to_happen = { 
        days = 1
    }
    
    option = {
        name = "wwu_zandalar.30.op1"
        
        event_target:target_province = {
            add_base_tax = 3
            add_base_production = 3
            add_base_manpower = 3
            cede_province = A58 # Amani
            add_core = A58 # Amani
            change_culture = culture_forest_troll
        }
        
        # Amani
        A58 = {
            override_country_name = amani_refugees
            add_country_modifier = {
                name = amani_refugees
                duration = -1
            }
        }
        
        create_march = A58 # Amani
        area_zul_aman = {
            add_core = A58 # Amani
        }
        
        add_country_modifier = {
            name = amani_refugees_boom
            duration = 3650
        }
    }

    option = {
        name = "wwu_zandalar.30.op2"

        event_target:target_province = {
            add_base_tax = 3
            add_base_production = 3
            add_base_manpower = 3
            set_local_autonomy = 75
            change_culture = culture_forest_troll
        }
        
        add_manpower = 25
        add_country_modifier = {
            name = amani_refugees_boom
            duration = 9125
        }
    }
    
    option = {
        name = "wwu_zandalar.30.op3"
        
        add_prestige = -25
        
        reverse_add_opinion = {
            who = A66 # Gurubashi
            modifier = refused_troll_refugees
        }
        reverse_add_opinion = {
            who = A74 # Drakkari
            modifier = refused_troll_refugees
        }
        reverse_add_opinion = {
            who = A73 # Sandfury
            modifier = refused_troll_refugees
        }
    }

}

# Gurubashi Destroyed
country_event = {
	id = wwu_zandalar.31
    title = "wwu_zandalar.31.title"
	desc = "wwu_zandalar.31.desc"
	picture = ZANDALAR_3_eventPicture
    
	fire_only_once = yes
    
    trigger = {
        tag = A78 # Zandalar
        NOT = { exists = A66 } # Gurubashi
        
        NOT = {
            any_owned_province = {
                region = region_stranglethorn_vale
            }
        }
        
        any_owned_province = {
            has_port = yes
            region = region_zuldazar
        }
    }
    
    immediate = {
        hidden_effect = {
            random_owned_province = {
                limit = {
                    has_port = yes
                    region = region_zuldazar
                }
                save_event_target_as = target_province
            }
        }
    }
    
    mean_time_to_happen = { 
        days = 1
    }
    
    option = {
        name = "wwu_zandalar.31.op1"
        
        event_target:target_province = {
            add_base_tax = 3
            add_base_production = 3
            add_base_manpower = 3
            cede_province = A66 # Gurubashi
            add_core = A66 # Gurubashi
            change_culture = culture_jungle_troll
        }
        
        # Gurubashi
        A66 = {
            override_country_name = gurubashi_refugees
            add_country_modifier = {
                name = gurubashi_refugees
                duration = -1
            }
        }
        
        create_march = A66 # Gurubashi
        area_zul_gurub = {
            add_core = A66 # Gurubashi
        }
        
        add_country_modifier = {
            name = gurubashi_refugees_boom
            duration = 3650
        }
    }
    
    option = {
        name = "wwu_zandalar.31.op2"

        event_target:target_province = {
            add_base_tax = 3
            add_base_production = 3
            add_base_manpower = 3
            set_local_autonomy = 75
            change_culture = culture_jungle_troll
        }
        
        add_manpower = 25
        add_country_modifier = {
            name = gurubashi_refugees_boom
            duration = 9125
        }
    }
    
    option = {
        name = "wwu_zandalar.31.op3"
        
        add_prestige = -25
        
        reverse_add_opinion = {
            who = A58 # Amani
            modifier = refused_troll_refugees
        }
        reverse_add_opinion = {
            who = A74 # Drakkari
            modifier = refused_troll_refugees
        }
        reverse_add_opinion = {
            who = A73 # Sandfury
            modifier = refused_troll_refugees
        }
    }
}

# Drakkari Destroyed
country_event = {
	id = wwu_zandalar.32
    title = "wwu_zandalar.32.title"
	desc = "wwu_zandalar.32.desc"
	picture = ZANDALAR_3_eventPicture
    
	fire_only_once = yes
    
    trigger = {
        tag = A78 # Zandalar
        NOT = { exists = A74 } # Drakkari
        
        NOT = {
            any_owned_province = {
                region = region_zuldrak
            }
        }
        
        any_owned_province = {
            has_port = yes
            region = region_zuldazar
        }
    }
    
    immediate = {
        hidden_effect = {
            random_owned_province = {
                limit = {
                    has_port = yes
                    region = region_zuldazar
                }
                save_event_target_as = target_province
            }
        }
    }
    
    mean_time_to_happen = { 
        days = 1
    }
    
    option = {
        name = "wwu_zandalar.32.op1"
        
        event_target:target_province = {
            add_base_tax = 3
            add_base_production = 3
            add_base_manpower = 3
            cede_province = A74 # Drakkari
            add_core = A74 # Drakkari
            change_culture = culture_frost_troll
        }
        
        # Drakkari
        A74 = {
            override_country_name = drakkari_refugees
            add_country_modifier = {
                name = drakkari_refugees
                duration = -1
            }
        }
        
        create_march = A74 # Drakkari
        area_gundrak_raid = {
            add_core = A74 # Drakkari
        }
        
        add_country_modifier = {
            name = drakkari_refugees_boom
            duration = 3650
        }
    }
    
    option = {
        name = "wwu_zandalar.32.op2"

        event_target:target_province = {
            add_base_tax = 3
            add_base_production = 3
            add_base_manpower = 3
            set_local_autonomy = 75
            change_culture = culture_frost_troll
        }
        
        add_manpower = 25
        add_country_modifier = {
            name = drakkari_refugees_boom
            duration = 9125
        }
    }
    
    option = {
        name = "wwu_zandalar.32.op3"
        
        add_prestige = -25
        
        reverse_add_opinion = {
            who = A66 # Gurubashi
            modifier = refused_troll_refugees
        }
        reverse_add_opinion = {
            who = A66 # Gurubashi
            modifier = refused_troll_refugees
        }
        reverse_add_opinion = {
            who = A73 # Sandfury
            modifier = refused_troll_refugees
        }
    }
}

# Farraki Destroyed
country_event = {
	id = wwu_zandalar.33
    title = "wwu_zandalar.33.title"
	desc = "wwu_zandalar.33.desc"
	picture = ZANDALAR_3_eventPicture
    
	fire_only_once = yes
    
    trigger = {
        tag = A78 # Zandalar
        NOT = { exists = A73 } # Sandfury
        
        NOT = {
            any_owned_province = {
                region = region_tanaris
            }
        }
        
        any_owned_province = {
            has_port = yes
            region = region_zuldazar
        }
    }
    
     immediate = {
        hidden_effect = {
            random_owned_province = {
                limit = {
                    has_port = yes
                    region = region_zuldazar
                }
                save_event_target_as = target_province
            }
        }
    }
    
    mean_time_to_happen = { 
        days = 1
    }
    
    option = {
        name = "wwu_zandalar.33.op1"
        
        event_target:target_province = {
            add_base_tax = 3
            add_base_production = 3
            add_base_manpower = 3
            cede_province = A73 # Sandfury
            add_core = A73 # Sandfury
            change_culture = culture_sand_troll
        }
        
        # Sandfury
        A73 = {
            override_country_name = farraki_refugees
            add_country_modifier = {
                name = farraki_refugees
                duration = -1
            }
        }
        
        create_march = A73 # Sandfury
        area_zulfarrak = {
            add_core = A73 # Sandfury
        }
        
        add_country_modifier = {
            name = farraki_refugees_boom
            duration = 3650
        }
    }
    
    option = {
        name = "wwu_zandalar.33.op2"

        event_target:target_province = {
            add_base_tax = 3
            add_base_production = 3
            add_base_manpower = 3
            set_local_autonomy = 75
            change_culture = culture_sand_troll
        }
        
        add_manpower = 25
        add_country_modifier = {
            name = farraki_refugees_boom
            duration = 9125
        }
    }
    
    option = {
        name = "wwu_zandalar.33.op3"
        
        add_prestige = -25
        
        reverse_add_opinion = {
            who = A66 # Gurubashi
            modifier = refused_troll_refugees
        }
        reverse_add_opinion = {
            who = A74 # Drakkari
            modifier = refused_troll_refugees
        }
        reverse_add_opinion = {
            who = A58 # Amani
            modifier = refused_troll_refugees
        }
    }
}

# Reclaim Amani - Fired via decision
country_event = {
	id = wwu_zandalar.34
    title = "wwu_zandalar.34.title"
	desc = "wwu_zandalar.34.desc"
	picture = ZANDALAR_3_eventPicture
    
	fire_only_once = yes
    
	is_triggered_only = yes
    
    option = {
        name = "wwu_zandalar.34.op1"
        
        add_absolutism = 10
        reverse_add_opinion = {
            who = A58 # Amani
            modifier = troll_no_refugees_2
        }
    }
    
    option = {
        name = "wwu_zandalar.34.op2"
        
        # Amani
        A58 = {
            grant_independence = yes
        }
        
        create_alliance = A58 # Amani
        
        reverse_add_opinion = {
            who = A58 # Amani
            modifier = troll_no_refugees_1
        }
        add_trust = {
            who = A58 # Amani
            value = 100
            mutual = yes
        }
        add_favors = {
           who = A58 # Amani
           amount = 100
        }
    }
}

# Reclaim Gurubashi - Fired via decision
country_event = {
	id = wwu_zandalar.35
    title = "wwu_zandalar.35.title"
	desc = "wwu_zandalar.35.desc"
	picture = ZANDALAR_3_eventPicture
    
	fire_only_once = yes
    
	is_triggered_only = yes
    
    option = {
        name = "wwu_zandalar.35.op1"
        
        add_absolutism = 10
        
        reverse_add_opinion = {
            who = A66 # Gurubashi
            modifier = troll_no_refugees_2
        }
    }
    
    option = {
        name = "wwu_zandalar.35.op2"
        
        # Gurubashi
        A66 = {
            grant_independence = yes
        }
        create_alliance = A66 # Gurubashi
        
        reverse_add_opinion = {
            who = A66 # Gurubashi
            modifier = troll_no_refugees_1
        }
        add_trust = {
            who = A66 # Gurubashi
            value = 100
            mutual = yes
        }
        add_favors = {
           who = A66 # Gurubashi
           amount = 100
        }
    }
}

# Reclaim Drakkari - Fired via decision
country_event = {
	id = wwu_zandalar.36
    title = "wwu_zandalar.36.title"
	desc = "wwu_zandalar.36.desc"
	picture = ZANDALAR_3_eventPicture
    
	fire_only_once = yes
    
	is_triggered_only = yes
    
    option = {
        name = "wwu_zandalar.36.op1"
        
        add_absolutism = 10
        reverse_add_opinion = {
            who = A74 # Drakkari
            modifier = troll_no_refugees_2
        }
    }
    
    option = {
        name = "wwu_zandalar.36.op2"
        
        # Drakkari
        A74 = {
            grant_independence = yes
        }
        
        create_alliance = A74 # Drakkari
        
        reverse_add_opinion = {
            who = A74 # Drakkari
            modifier = troll_no_refugees_1
        }
        add_trust = {
            who = A74 # Drakkari
            value = 100
            mutual = yes
        }
        add_favors = {
           who = A74 # Drakkari
           amount = 100
        }
    }
}

# Reclaim Farraki - Fired via decision
country_event = {
	id = wwu_zandalar.37
    title = "wwu_zandalar.37.title"
	desc = "wwu_zandalar.37.desc"
	picture = ZANDALAR_3_eventPicture
    
	fire_only_once = yes
    
	is_triggered_only = yes
    
    option = {
        name = "wwu_zandalar.37.op1"
        
        add_absolutism = 10
        
        reverse_add_opinion = {
            who = A73 # Sandfury
            modifier = troll_no_refugees_2
        }
    }
    
    option = {
        name = "wwu_zandalar.37.op2"
        
        # Sandfury
        A73 = {
            grant_independence = yes
        }
        
        create_alliance = A73 # Sandfury
        
        reverse_add_opinion = {
            who = A73 # Sandfury
            modifier = troll_no_refugees_1
        }
        add_trust = {
            who = A73 # Sandfury
            value = 100
            mutual = yes
        }
        add_favors = {
           who = A73 # Sandfury
           amount = 100
        }
    }
}

# Startup Event
country_event = {
	id = wwu_zandalar.100
    title = wwu_zandalar.100.title
	desc = wwu_zandalar.100.desc
	picture = ZANDALAR_3_eventPicture
    
	is_triggered_only = yes
    hidden = yes
    
    trigger = {
        tag = A78
    }
    
    option = {
        name = wwu_zandalar.100.option.a
        
        change_estate_land_share = {
            estate = estate_clergy
            share = 20
        }
        
        add_treasury = 200
        
        set_variable = {            
            which = zul_influence 
            value = 30
        }
    }
}


