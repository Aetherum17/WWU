namespace = wwu_faction_system_leader_assignment

# Alliance - Random Leader if existing one is removed
country_event = {
	id = wwu_faction_system_leader_assignment.1
	title = wwu_faction_system_leader_assignment.1.title
	desc = wwu_faction_system_leader_assignment.1.desc
	picture = VARIAN_WRYNN_eventPicture
    
    hidden = yes
    
    trigger = {
        NOT = { has_global_flag = alliance_dismantled }
        has_global_flag = enabled_faction_mechanics
        has_global_flag = alliance_exists
        calc_true_if = {
            amount = 2
            all_country = {
                has_country_modifier = member_of_alliance
            }
        }
        
        has_country_modifier = member_of_alliance
        NOT = { has_country_modifier = head_of_alliance }
        all_country = {
            NOT = { has_country_modifier = head_of_alliance }
        }
    }
    
    immediate = {
        random_country = {
            limit = {
                has_country_modifier = member_of_alliance
            }
            
            set_head_of_faction = {
                faction = alliance
            }
        }
    }
	
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system_leader_assignment.1.option.a
	}
}

# Hotde - Random Leader if existing one is removed
country_event = {
	id = wwu_faction_system_leader_assignment.2
	title = wwu_faction_system_leader_assignment.2.title
	desc = wwu_faction_system_leader_assignment.2.desc
	picture = VARIAN_WRYNN_eventPicture
    
    hidden = yes
    
    trigger = {
        NOT = { has_global_flag = horde_dismantled }
        has_global_flag = enabled_faction_mechanics
        has_global_flag = horde_exists
        
        calc_true_if = {
            amount = 2
            all_country = {
                has_country_modifier = member_of_horde
            }
        }
        
        has_country_modifier = member_of_horde
        NOT = { has_country_modifier = head_of_horde }
        all_country = {
            NOT = { has_country_modifier = head_of_horde }
        }
    }
    
    immediate = {
        random_country = {
            limit = {
                has_country_modifier = member_of_horde
            }
            
            set_head_of_faction = {
                faction = horde
            }
        }
    }
	
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system_leader_assignment.2.option.a
	}
}

# Old Horde - Random Leader if existing one is removed
country_event = {
	id = wwu_faction_system_leader_assignment.3
	title = wwu_faction_system_leader_assignment.3.title
	desc = wwu_faction_system_leader_assignment.3.desc
	picture = VARIAN_WRYNN_eventPicture
    
    hidden = yes
    
    trigger = {
        NOT = { has_global_flag = old_horde_dismantled }
        has_global_flag = enabled_faction_mechanics
        has_global_flag = old_horde_exists
        
        calc_true_if = {
            amount = 2
            all_country = {
                has_country_modifier = member_of_old_horde
            }
        }
        
        has_country_modifier = member_of_old_horde
        NOT = { has_country_modifier = head_of_old_horde }
        all_country = {
            NOT = { has_country_modifier = head_of_old_horde }
        }
    }
    
    immediate = {
        random_country = {
            limit = {
                has_country_modifier = member_of_old_horde
            }
            
            set_head_of_faction = {
                faction = old_horde
            }
        }
    }
	
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system_leader_assignment.3.option.a
	}
}

# Trade Coalition - Random Leader if existing one is removed
country_event = {
	id = wwu_faction_system_leader_assignment.4
	title = wwu_faction_system_leader_assignment.4.title
	desc = wwu_faction_system_leader_assignment.4.desc
	picture = VARIAN_WRYNN_eventPicture
    
    hidden = yes
    
    trigger = {
        NOT = { has_global_flag = trade_coalition_dismantled }
        has_global_flag = enabled_faction_mechanics
        has_global_flag = trade_coalition_exists
        calc_true_if = {
            amount = 2
            all_country = {
                has_country_modifier = member_of_trade_coalition
            }
        }
        
        has_country_modifier = member_of_trade_coalition
        NOT = { has_country_modifier = head_of_trade_coalition }
        all_country = {
            NOT = { has_country_modifier = head_of_trade_coalition }
        }
    }
    
    immediate = {
        random_country = {
            limit = {
                has_country_modifier = member_of_trade_coalition
            }
            
            set_head_of_faction = {
                faction = trade_coalition
            }
        }
    }
	
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system_leader_assignment.4.option.a
	}
}

