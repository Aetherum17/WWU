#---------------------------------------
# Discovery
#---------------------------------------
namespace = wwu_discovery

# Compendium of Azeroth
country_event = {
	id = wwu_discovery.1
	title = wwu_discovery.1.title
	desc = wwu_discovery.1.desc
	picture = GATHER_YOUR_PARTY_eventPicture
    
    trigger = {
        OR = {
            is_year = 700
            AND = {
                ai = yes
                is_year = 600
            }
        }
        NOT = { has_country_flag = automatic_discovery_completed }
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = automatic_discovery_completed
        }
    }
	
    mean_time_to_happen = {
		days = 1
    }
    
	option = {
		name = wwu_discovery.1.option.a
	
        custom_tooltip = WORLD_DISCOVERED
    
        hidden_effect = {
            reveal_all_discovery = yes
        }
	}
}

# Discovery to apply to new nations
country_event = {
	id = wwu_discovery.2
	title = wwu_discovery.2.title
	desc = wwu_discovery.2.desc
	picture = GATHER_YOUR_PARTY_eventPicture
    
    is_triggered_only = yes
    hidden = yes
    
    mean_time_to_happen = {
		days = 1
    }
    
	option = {
		name = wwu_discovery.1.option.a
	
        setup_world_discovery = yes
	}
}

# Scourge Discovery
country_event = {
	id = wwu_discovery.3
	title = wwu_discovery.3.title
	desc = wwu_discovery.3.desc
	picture = GATHER_YOUR_PARTY_eventPicture
    
    hidden = yes
    
    trigger = {
        NOT = { has_country_flag = scourge_discovery_done }
        
        OR = {
            tag = P11
            tag = P12
            tag = P13
            tag = P52
            tag = F21
        }
    }
    
	mean_time_to_happen = { 
        days = 1
    }
    
	option = {
		name = wwu_discovery.3.option.a
		
        set_country_flag = scourge_discovery_done
        
        discover_eastern_kingdoms = yes
        discover_northrend = yes
        discover_broken_isles = yes
        discover_outland = yes
        discover_draenor = yes
	}
}

# Discovery of Draenor
country_event = {
	id = wwu_discovery.4
	title = wwu_discovery.4.title
	desc = wwu_discovery.4.desc
	picture = EXPLORERS_HAT_eventPicture
    
    trigger = {
        NOT = { has_country_flag = discovery_of_draenor }
        
        capital_scope = {
            continent = continent_eastern_kingdoms
        }
        
        # Dark Portal has been built
        3792 = {
            has_great_project = {
                type = dark_portal_draenor
            }
        }
    }
    
	mean_time_to_happen = { 
        months = 12
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = discovery_of_draenor
        }
    }
    
	option = {
		name = wwu_discovery.4.option.a
		
        discover_draenor = yes
	}
}

# Discovery of Outland
country_event = {
	id = wwu_discovery.5
	title = wwu_discovery.5.title
	desc = wwu_discovery.5.desc
	picture = EXPLORERS_HAT_eventPicture
    
    trigger = {
        NOT = { has_country_flag = discovery_of_outland }
        
        capital_scope = {
            continent = continent_eastern_kingdoms
        }
        
        # Dark Portal has been built
        1586 = {
            has_great_project = {
                type = dark_portal_outland
            }
        }
    }
    
	mean_time_to_happen = { 
        months = 12
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = discovery_of_outland
        }
    }
    
	option = {
		name = wwu_discovery.5.option.a
		
        discover_outland = yes
	}
}

# Discovery of Azeroth
country_event = {
	id = wwu_discovery.6
	title = wwu_discovery.6.title
	picture = EXPLORERS_HAT_eventPicture
    
    desc = {
        trigger = {
            primary_culture = culture_orc
        }
        desc = wwu_discovery.6.desc.orc
    }
    desc = {
        trigger = {
            primary_culture = culture_orc
        }
        desc = wwu_discovery.6.desc
    }
    
    trigger = {
        primary_culture = culture_orc
        NOT = { has_country_flag = discovery_of_azeroth }
        
        capital_scope = {
            OR = {
                continent = continent_draenor
                continent = continent_outland
            }
        }
        
        # Dark Portal has been built
        OR = {
            1586 = {
                has_great_project = {
                    type = dark_portal_outland
                }
            }
            # Dark Portal has been built
            3792 = {
                has_great_project = {
                    type = dark_portal_draenor
                }
            }
        }
    }
    
	mean_time_to_happen = { 
        months = 12
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = discovery_of_azeroth
        }
    }
    
	option = {
		name = wwu_discovery.6.option.a
		
        discover_eastern_kingdoms = yes
        discover_plunder_isle = yes
        discover_kul_tiras = yes
	}
}