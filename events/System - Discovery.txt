#---------------------------------------
# Discovery
#---------------------------------------
namespace = wwu_discovery

# Compendium of Azeroth
country_event = {
	id = wwu_discovery.1
	title = wwu_discovery.1.title
	desc = wwu_discovery.1.desc
	picture = GATHER_YOUR_PARTY_eventPicture
    
    is_triggered_only = yes
    
    trigger = {
        NOT = { has_country_flag = automatic_discovery_completed }
        current_age = age_eternal_conflict
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = automatic_discovery_completed
        }
    }
	
    mean_time_to_happen = {
		days = 1
    }
    
	option = {
		name = wwu_discovery.1.option.a
	
        custom_tooltip = WORLD_DISCOVERED
    
        hidden_effect = {
            reveal_all_discovery = yes
            discover_dragon_isles = yes
        }
	}
}

# Discovery to apply to new nations
country_event = {
	id = wwu_discovery.2
	title = wwu_discovery.2.title
	desc = wwu_discovery.2.desc
	picture = GATHER_YOUR_PARTY_eventPicture
    
    is_triggered_only = yes
    hidden = yes
    
    mean_time_to_happen = {
		days = 1
    }
    
	option = {
		name = wwu_discovery.1.option.a
	
        setup_world_discovery = yes
	}
}

# Scourge Discovery
country_event = {
	id = wwu_discovery.3
	title = wwu_discovery.3.title
	desc = wwu_discovery.3.desc
	picture = GATHER_YOUR_PARTY_eventPicture
    
    hidden = yes
    is_triggered_only = yes
    
    trigger = {
        NOT = { has_country_flag = scourge_discovery_done }
        
        OR = {
            tag = P11
            tag = P12
            tag = P13
            tag = P52
            tag = F21
        }
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = scourge_discovery_done
        }
    }
    
	mean_time_to_happen = { 
        days = 1
    }
    
	option = {
		name = wwu_discovery.3.option.a
        
        discover_eastern_kingdoms = yes
        discover_northrend = yes
        discover_broken_isles = yes
        discover_kul_tiras = yes
	}
}

# Discovery of Azeroth - For Human/Orc story
country_event = {
	id = wwu_discovery.6
	title = wwu_discovery.6.title
	picture = DARK_PORTAL_eventPicture
    
    desc = {
        trigger = {
            primary_culture = culture_orc
        }
        desc = wwu_discovery.6.desc.orc
    }
    desc = {
        trigger = {
            NOT = { primary_culture = culture_orc }
        }
        desc = wwu_discovery.6.desc
    }
    
    is_triggered_only = yes
    
    trigger = {
        NOT = { has_country_flag = discovery_of_azeroth }
        
        OR = {
            # Covers Orcish Horde having its capital on Azeroth
            any_owned_province = {
                superregion = eastern_kingdom_superregion
            }
            # Covers the other clans
            capital_scope = {
                OR = {
                    superregion = draenor_superregion
                    superregion = outland_superregion
                }
            }
        }
        
        # Dark Portal has been built
        OR = {
            1586 = {
                has_great_project = {
                    type = dark_portal_outland
                }
            }
            # Dark Portal has been built
            3792 = {
                has_great_project = {
                    type = dark_portal_draenor
                }
            }
        }
    }
    
	mean_time_to_happen = { 
        days = 1
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = discovery_of_azeroth
        }
    }
    
	option = {
		name = wwu_discovery.6.option.a
		
        discover_eastern_kingdoms = yes
        discover_plunder_isle = yes
        discover_kul_tiras = yes
	}
}

# Discovery of Argus
country_event = {
	id = wwu_discovery.7
	title = wwu_discovery.7.title
    desc = wwu_discovery.7.desc
	picture = ARGUS_eventPicture
    
    is_triggered_only = yes
    
    trigger = {
        NOT = { has_country_flag = discovery_of_argus }
        
        capital_scope = {
            NOT = { superregion = argus_superregion }
        }
        
        # ROOT is at war with a country from Argus
        any_country = {
            capital_scope = {
                superregion = argus_superregion
            }
            OR = {
                is_subject_of = ROOT
                alliance_with = ROOT
                war_with = ROOT
            }
        }
    }
    
	mean_time_to_happen = { 
        days = 1
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = discovery_of_argus
        }
    }
    
	option = {
		name = wwu_discovery.7.option.a
		
        discover_argus = yes
	}
}

# Discovery of Skywall
country_event = {
	id = wwu_discovery.8
	title = wwu_discovery.8.title
    desc = wwu_discovery.8.desc
	picture = ALAKIR_THE_WINDLORD_eventPicture
    
    is_triggered_only = yes
    
    trigger = {
        NOT = { has_country_flag = discovery_of_skywall }
        
        capital_scope = {
            NOT = { region = region_skywall }
        }
        
        # ROOT is at war with a country from Skywall
        any_country = {
            capital_scope = {
                region = region_skywall
            }
            OR = {
                is_subject_of = ROOT
                alliance_with = ROOT
                war_with = ROOT
            }
        }
    }
    
	mean_time_to_happen = { 
        days = 1
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = discovery_of_skywall
        }
    }
    
	option = {
		name = wwu_discovery.8.option.a
		
        discover_skywall = yes
	}
}

# Discovery of Abyssal Maw
country_event = {
	id = wwu_discovery.9
	title = wwu_discovery.9.title
    desc = wwu_discovery.9.desc
	picture = NEPTULON_eventPicture
    
    is_triggered_only = yes
    
    trigger = {
        NOT = { has_country_flag = discovery_of_abyssal_maw }
        
        capital_scope = {
            NOT = { region = region_abyssal_maw }
        }
        
        # ROOT is at war with a country from Abyssal Maw
        any_country = {
            capital_scope = {
                region = region_abyssal_maw
            }
            OR = {
                is_subject_of = ROOT
                alliance_with = ROOT
                war_with = ROOT
            }
        }
    }
    
	mean_time_to_happen = { 
        days = 1
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = discovery_of_abyssal_maw
        }
    }
    
	option = {
		name = wwu_discovery.9.option.a
		
        discover_abyssal_maw = yes
	}
}

# Discovery of Firelands
country_event = {
	id = wwu_discovery.10
	title = wwu_discovery.10.title
    desc = wwu_discovery.10.desc
	picture = RAGNAROS_eventPicture
    
    is_triggered_only = yes
    
    trigger = {
        NOT = { has_country_flag = discovery_of_firelands }
        
        capital_scope = {
            NOT = { region = region_firelands }
        }
        
        # ROOT is at war with a country from Firelands
        any_country = {
            capital_scope = {
                region = region_firelands
            }
            OR = {
                is_subject_of = ROOT
                alliance_with = ROOT
                war_with = ROOT
            }
        }
    }
    
	mean_time_to_happen = { 
        days = 1
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = discovery_of_firelands
        }
    }
    
	option = {
		name = wwu_discovery.10.option.a
		
        discover_firelands = yes
	}
}

# Discovery of Deepholm
country_event = {
	id = wwu_discovery.11
	title = wwu_discovery.11.title
    desc = wwu_discovery.11.desc
	picture = THERAZANE_eventPicture
    
    is_triggered_only = yes
    
    trigger = {
        NOT = { has_country_flag = discovery_of_deepholm }
        
        capital_scope = {
            NOT = { region = region_deepholm }
        }
        
        # ROOT is at war with a country from Deepholm
        any_country = {
            capital_scope = {
                region = region_deepholm
            }
            OR = {
                is_subject_of = ROOT
                alliance_with = ROOT
                war_with = ROOT
            }
        }
    }
    
	mean_time_to_happen = { 
        days = 1
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = discovery_of_deepholm
        }
    }
    
	option = {
		name = wwu_discovery.11.option.a
		
        discover_deepholm = yes
	}
}

# Discovery of Shadowlands
country_event = {
	id = wwu_discovery.12
	title = wwu_discovery.12.title
    desc = wwu_discovery.12.desc
	picture = ORIBOS_eventPicture
    
    is_triggered_only = yes
    
    trigger = {
        NOT = { has_country_flag = discovery_of_shadowlands }
        
        capital_scope = {
            NOT = { superregion = shadowlands_superregion }
        }
        
        # ROOT is at war with a country from shadowlands
        any_country = {
            capital_scope = {
                superregion = shadowlands_superregion
            }
            OR = {
                is_subject_of = ROOT
                alliance_with = ROOT
                war_with = ROOT
            }
        }
    }
    
	mean_time_to_happen = { 
        days = 1
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = discovery_of_shadowlands
        }
    }
    
	option = {
		name = wwu_discovery.12.option.a
		
        discover_shadowlands = yes
	}
}

# Discovery of Draenor 
country_event = {
	id = wwu_discovery.13
	title = wwu_discovery.13.title
    desc = wwu_discovery.13.desc
	picture = DARK_PORTAL_eventPicture
    
    is_triggered_only = yes
    
    trigger = {
        NOT = { has_country_flag = discovery_of_draenor }
        
        capital_scope = {
            NOT = { superregion = draenor_superregion }
        }
        
        # ROOT is at war with a country from draenor
        any_country = {
            capital_scope = {
                superregion = draenor_superregion
            }
            OR = {
                is_subject_of = ROOT
                alliance_with = ROOT
                war_with = ROOT
            }
        }
    }
    
	mean_time_to_happen = { 
        days = 1
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = discovery_of_draenor
        }
    }
    
	option = {
		name = wwu_discovery.13.option.a
		
        discover_draenor = yes
	}
}

# Discovery of Outland 
country_event = {
	id = wwu_discovery.14
	title = wwu_discovery.14.title
    desc = wwu_discovery.14.desc
	picture = DARK_PORTAL_eventPicture
    
    is_triggered_only = yes
    
    trigger = {
        NOT = { has_country_flag = discovery_of_outland }
        
        capital_scope = {
            NOT = { superregion = outland_superregion }
        }
        
        # ROOT is at war with a country from outland
        any_country = {
            capital_scope = {
                superregion = outland_superregion
            }
            OR = {
                is_subject_of = ROOT
                alliance_with = ROOT
                war_with = ROOT
            }
        }
    }
    
	mean_time_to_happen = { 
        days = 1
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = discovery_of_outland
        }
    }
    
	option = {
		name = wwu_discovery.14.option.a
		
        discover_outland = yes
	}
}
