namespace = scourge_events

# "Nerzhul's Arrival to Icecrown Citadel"
country_event = {
	id = scourge_events.1
	title = scourge_events.1.title
	desc = scourge_events.1.desc
	picture = FROZENTHRONE_eventPicture

    major = yes
    
	trigger = {
        ai = no
		is_year = 605
		NOT = { is_year = 618 }
		NOT = { has_global_flag = nerzhul_arrived }
	}
	
	mean_time_to_happen = { 
        months = 1 
    }
    
	immediate = {
		hidden_effect = { set_global_flag = nerzhul_arrived }
    }
	
	option = {
		name = scourge_events.1.option.a
		
        custom_tooltip = scourge_appears_tt
        hidden_effect = {
            if = {
                limit = {
                    NOT = { exists = P11 }
                }
                
                # Icecrown Citadel
                1268 = {
					cede_province = P11
					add_base_tax = 8
                    add_base_production = 8
                    add_base_manpower = 8
                    add_building = wow_fort_1
					change_religion = cult_of_the_damned
                    change_culture = culture_scourge
					change_trade_goods = saronite
					add_core = P11
                }
                1267 = {
                    cede_province = P11
					add_base_tax = 1
                    add_base_production = 1
                    add_base_manpower = 2
                    change_religion = cult_of_the_damned
                    change_culture = culture_scourge
					change_trade_goods = saronite
					add_core = P11
                }
                P11 = {
					define_ruler = {
						name = "Ner'zhul"
						dynasty = "Shadowmoon" 	
						adm = 6
						dip = 6	
						mil = 6	
						age = 80
						claim = 100
					}
					add_ruler_personality = immortal_personality
					add_ruler_personality = warlock_personality
					set_capital = 1268
				}
				P17 = {
					change_religion = cult_of_the_damned
					set_ruler_religion = cult_of_the_damned
					set_heir_religion = cult_of_the_damned
					every_owned_province = {
						change_religion = cult_of_the_damned
					}
                }
				B08 = {
					change_religion = cult_of_the_damned
					set_ruler_religion = cult_of_the_damned
					set_heir_religion = cult_of_the_damned
					every_owned_province = {
						change_religion = cult_of_the_damned
					}
                }
				P11 = {
					create_march = P17
					create_alliance = B08
				}
				continent_eastern_kingdoms = {
					discover_country = P11
				}
				continent_northrend = {
					discover_country = P11
				}
				continent_broken_isles = {
					discover_country = P11
				}
				continent_outland = {
					discover_country = P11
				}
            }
		}
	}
}
