namespace = scourge_events

# "Nerzhul's Arrival to Icecrown Citadel"
country_event = {
	id = scourge_events.1
	title = scourge_events.1.title
	desc = scourge_events.1.desc
	picture = FROZENTHRONE_eventPicture

    major = yes
    
	trigger = {
        ai = no
		is_year = 605
		NOT = { is_year = 618 }
		NOT = { has_global_flag = nerzhul_arrived }
	}
	
	mean_time_to_happen = { 
        months = 1 
    }
    
	immediate = {
		hidden_effect = { set_global_flag = nerzhul_arrived }
    }
	
	option = {
		name = scourge_events.1.option.a
		
        custom_tooltip = scourge_appears_tt
        hidden_effect = {
            if = {
                limit = {
                    NOT = { exists = P11 }
                }
                
                # Icecrown Citadel
                1268 = {
					cede_province = P11
					set_base_tax = 10
                    set_base_production = 10
                    set_base_manpower = 10
                    set_building = wow_fort_3
					change_religion = cult_of_the_damned
                    change_culture = culture_scourge
					change_trade_good = saronite
                }
                1267 = {
                    cede_province = P11
					set_base_tax = 3
                    set_base_production = 3
                    set_base_manpower = 4
                    change_religion = cult_of_the_damned
                    change_culture = culture_scourge
					change_trade_good = saronite
                }
                P11 = {
					define_ruler = {
						name = "Ner'zhul"
						dynasty = "Shadowmoon" 	
						adm = 6
						dip = 6	
						mil = 6	
						age = 80
						claim = 100
					}
					set_ruler_personality = immortal_personality
					set_ruler_personality = warlock
                }
            }
        }
	}
}
