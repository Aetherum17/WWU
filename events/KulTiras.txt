namespace = kul_tiras

country_event = {
	id = kul_tiras.1
	title = dynasty_change.title
	desc = dynasty_change.desc
	picture = ELECTION_REPUBLICAN_eventPicture
	
	trigger = {
		primary_culture = culture_kul_tiran
		religion = religion_water
		OR = { 
			has_country_modifier = kul_tiras_proudmoore
			has_country_modifier = kul_tiras_stormsong
			has_country_modifier = kul_tiras_waycrest
			has_country_modifier = kul_tiras_ashvane
		}
		has_heir = no
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	option = {
		name = dynasty_change.opt1 # Leave the throne to the influental family.
		add_prestige = -10
		if = {
			limit = {
				has_country_modifier = kul_tiras_proudmoore
			}
			define_heir = {
				max_random_mil = 5
				max_random_adm = 5
				max_random_dip = 5
				age = 15
				claim = 90
				dynasty = "Proudmoore"
			}
		}
		if = {
			limit = {
				has_country_modifier = kul_tiras_stormsong
			}
			define_heir = {
				max_random_mil = 4
				max_random_adm = 4
				max_random_dip = 7
				age = 15
				claim = 50
				dynasty = "Stormsong"
			}
		}
		if = {
			limit = {
				has_country_modifier = kul_tiras_waycrest
			}
			define_heir = {
				max_random_mil = 7
				max_random_adm = 4
				max_random_dip = 4
				age = 15
				claim = 50
				dynasty = "Waycrest"
			}
		}
		if = {
			limit = {
				has_country_modifier = kul_tiras_ashvane
			}
			define_heir = {
				max_random_mil = 4
				max_random_adm = 7
				max_random_dip = 4
				age = 15
				claim = 50
				dynasty = "Ashvane"
			}
		}
	}
	
	option = {
		name = dynasty_change.opt2
		add_prestige = 10
		define_heir = {
			max_random_mil = 6
			max_random_adm = 6
			max_random_dip = 6
			age = 15
			claim = 50
			dynasty = "Proudmoore"
		}
		if = {
			limit = { corruption = 10 }
			random = { 
				chance = 90 
				
				capital_scope = {
					pretender_rebels = 2
				}
			}
		}
		else_if = {
			limit = { corruption = 8 }
			random = { 
				chance = 80 
				
				capital_scope = {
					pretender_rebels = 2
				}
			}
		}
		else_if = {
			limit = { corruption = 6 }
			random = { 
				chance = 70 
				
				capital_scope = {
					pretender_rebels = 2
				}
			}
		}
		else_if = {
			limit = { corruption = 4 }
			random = { 
				chance = 60 
				
				capital_scope = {
					pretender_rebels = 2
				}
			}
		}
		else_if = {
			limit = { corruption = 2 }
			random = { 
				chance = 50 
				
				capital_scope = {
					pretender_rebels = 2
				}
			}
		}
		else = {
			random = { 
				chance = 40 
				
				capital_scope = {
					pretender_rebels = 2
				}
			}
		}
	}
}