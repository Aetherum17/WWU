namespace = wwu_gilneas

# Build the Wall
country_event = {
	id = wwu_gilneas.1
	title = wwu_gilneas.1.title
	desc = wwu_gilneas.1.desc
	picture = GRAYMANE_WALL_eventPicture
    
    fire_only_once = yes
    
	trigger = {
		current_age = age_scourge
        
		tag = A12 # Gilneas
		exists = A08 # Lordaeron
        
		owns = 914 # Greymane Gate
		
        # Greymane Gate
        914 = {
            NOT = {
                OR = {
					has_building = wow_fort_1
					has_building = wow_fort_2
					has_building = wow_fort_3
					has_building = wow_fort_4
				}
            }
        }
	}
	
	mean_time_to_happen = {
		months = 120
	}
	
	option = {
		name = wwu_gilneas.1.option.a
		
		add_prestige = -25
        
        # Grant Lordaeron all non Gilnea provinces
		every_owned_province = {
			limit = {
				NOT = { region = region_gilneas }
			}
			cede_province = A08 
			add_core = A08
			remove_core = A12
		}
		
        # Greymane Gate
		914 = {
			add_building = wow_fort_4
		}
        
		ai_chance = { factor = 100 }
	}
	
	option = {
		name = wwu_gilneas.1.option.b
		
		add_prestige = 20
        
		ai_chance = { factor = 0 }
	}
}

# Archmage's Offer
country_event = {
	id = wwu_gilneas.2
	title = wwu_gilneas.2.title
	desc = wwu_gilneas.2.desc
	picture = ANCIENT_MAGE_eventPicture
    
	fire_only_once = yes
	
	trigger = {
		tag = A12 # Gilneas
        
		any_country = {
			culture_group = culture_group_scourge
            war_with = ROOT
		}
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	option = {
		name = wwu_gilneas.2.option.a
		
		add_manpower = 25
		add_army_tradition = -25
        
		add_country_modifier = { 
			name = curse_of_the_worgen
			duration = -1  
		}
        
		custom_tooltip = wwu_gilneas.2.option.a.tt
        
        hidden_effect = {
            every_owned_province = {
                add_base_manpower = 1
                
                hidden_effect = {
                    ROOT = {
                        capital_scope = {
                            ROOT = {
                                infantry = PREV
                            }
                        }
                    }
                }
            }
        }
	}
	
	option = {
		name = wwu_gilneas.2.option.b
		
		add_prestige = 10
	}
}

# Curse of the Worgen
country_event = {
	id = wwu_gilneas.3
	title = wwu_gilneas.3.title
	desc = wwu_gilneas.3.desc
	picture = RAGING_WORGEN_eventPicture
    
	fire_only_once = yes

	trigger = {
		has_country_flag = curse_of_the_worgen
	}
	
	mean_time_to_happen = {
		months = 120
	}
	
	option = {
		name = wwu_gilneas.3.option.a
		
		remove_country_modifier = curse_of_the_worgen
        
		change_primary_culture = culture_gilnean_worgen
		change_technology_group = tech_worgen
	}
}
