namespace = wwu_gilneas

# Build the Wall
country_event = {
	id = wwu_gilneas.1
	title = wwu_gilneas.1.title
	desc = wwu_gilneas.1.desc
	picture = GRAYMANE_WALL_eventPicture
    
    fire_only_once = yes
    
	trigger = {
		any_country = {
			culture_group = culture_group_scourge
            war_with = ROOT
		}
        
		tag = A12 # Gilneas
		owns = 914 # Greymane Gate
        
        914 = {
            NOT = {
                has_great_project = {
                    type = gp_greymane_wall
                }
            }
        }
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	option = {
		name = wwu_gilneas.1.option.a
		
        custom_tooltip = ALLOW_GREYMANE_WALL_TT
        hidden_effect = {
            set_country_flag = can_build_greymane_wall
        }
        
		add_prestige = -25
        
        # Pyrewood
        if = {
            limit = {
                owns = 2962
            }
            2962 = {
                spawn_rebels = {
                    type = nobel_rebels
                    size = 5
                }
            }
        }
        
        # Ambermill
        if = {
            limit = {
                owns = 720
            }
            720 = {
                spawn_rebels = {
                    type = nobel_rebels
                    size = 5
                }
            }
        }
		
        # Greymane Gate
		914 = {
			add_building = wow_fort_4
		}
        
		ai_chance = { factor = 100 }
	}
	
	option = {
		name = wwu_gilneas.1.option.b
		
		add_prestige = 25
        
		ai_chance = { factor = 0 }
	}
}

# Archmage's Offer
country_event = {
	id = wwu_gilneas.2
	title = wwu_gilneas.2.title
	desc = wwu_gilneas.2.desc
	picture = ANCIENT_MAGE_eventPicture
    
	fire_only_once = yes
	
	trigger = {
		tag = A12 # Gilneas
        
		any_country = {
			culture_group = culture_group_scourge
            war_with = ROOT
		}
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	option = {
		name = wwu_gilneas.2.option.a
		
		add_manpower = 25
		add_army_tradition = -25
        
		add_country_modifier = { 
			name = curse_of_the_worgen
			duration = -1  
		}
        
		custom_tooltip = wwu_gilneas.2.option.a.tt
        
        hidden_effect = {
            every_owned_province = {
                add_base_manpower = 1
                
                hidden_effect = {
                    ROOT = {
                        capital_scope = {
                            ROOT = {
                                infantry = PREV
                            }
                        }
                    }
                }
            }
        }
	}
	
	option = {
		name = wwu_gilneas.2.option.b
		
		add_prestige = 10
	}
}

# Curse of the Worgen
country_event = {
	id = wwu_gilneas.3
	title = wwu_gilneas.3.title
	desc = wwu_gilneas.3.desc
	picture = RAGING_WORGEN_eventPicture
    
	fire_only_once = yes

	trigger = {
		has_country_modifier = curse_of_the_worgen
	}
	
	mean_time_to_happen = {
		months = 120
	}
	
	option = {
		name = wwu_gilneas.3.option.a
		
		remove_country_modifier = curse_of_the_worgen
        
		change_primary_culture = culture_gilnean_worgen
		change_technology_group = tech_worgen
	}
}
