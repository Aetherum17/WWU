namespace = wwu_archavon

# An start setup event for Vault of Archavon
country_event = {
  id = wwu_archavon.0
  title = wwu_archavon.0.title
  desc = wwu_archavon.0.desc
  picture = NAZMIR_1_eventPicture
  hidden = yes
  is_triggered_only = yes

  option = {
    name = wwu_archavon.0.op1
    swap_non_generic_missions = yes
  }
}


# An start setup event for Vault of Archavon
country_event = {
  id = wwu_archavon.1
  title = wwu_archavon.1.title
  desc = wwu_archavon.1.desc
  picture = NAZMIR_1_eventPicture

  fire_only_once = yes
  is_triggered_only = yes

  trigger = {

        tag = VAV # Vault of Archavon

  }

  immediate = {
    hidden_effect = {
      VAV = {
        set_country_flag = archavon_start_modifiers
        set_variable = {
          which = archavon_trap_1_army # Size of spawned army
          value = 0
        }
        set_variable = {
          which = archavon_trap_2_army # Size of spawned army
          value = 0
        }
        set_variable = {
          which = archavon_trap_3_army # Size of spawned army
          value = 0
        }
        set_variable = {
          which = archavon_trap_4_army # Size of spawned army
          value = 0
        }
        set_variable = {
          which = archavon_trap_1_bonus_power # Strenght of added modifier
          value = 0
        }
        set_variable = {
          which = archavon_trap_2_bonus_power # Strenght of added modifier
          value = 0
        }
        set_variable = {
          which = archavon_trap_3_bonus_power # Strenght of added modifier
          value = 0
        }
        set_variable = {
          which = archavon_trap_4_bonus_power # Strenght of added modifier
          value = 0
        }
        set_variable = {
          which = archavon_trap_1_siege # Reverse siege progress by value
          value = 0
        }
        set_variable = {
          which = archavon_trap_2_siege # Reverse siege progress by value
          value = 0
        }
        set_variable = {
          which = archavon_trap_3_siege # Reverse siege progress by value
          value = 0
        }
        set_variable = {
          which = archavon_trap_4_siege # Reverse siege progress by value
          value = 0
        }
        set_variable = {
          which = archavon_trap_1_cooldown # Cooldown after activate trap
          value = 0
        }
        set_variable = {
          which = archavon_trap_2_cooldown # Cooldown after activate trap
          value = 0
        }
        set_variable = {
          which = archavon_trap_3_cooldown # Cooldown after activate trap
          value = 0
        }
        set_variable = {
          which = archavon_trap_4_cooldown # Cooldown after activate trap
          value = 0
        }
      }

    }
  }

  option = {
    name = wwu_archavon.1.op1
    custom_tooltip = event_1_archavon_tt

                change_variable = {
                    which = archavon_titans_facility
                    value = 10
                }

  }
}

country_event = {
  id = wwu_archavon.2
  title = wwu_archavon.2.title
  desc = wwu_archavon.2.desc
  picture = NAZMIR_1_eventPicture

  is_triggered_only = yes

	major = yes
	major_trigger = { 
  is_at_war = yes
      any_known_country = {
        war_with = ROOT
      }
	}

  trigger = {
        OR = {
          tag = VAV
          has_country_flag = archavon_start_modifiers
        }
        3224 = {
          owned_by = ROOT
          has_siege = yes
		      NOT = { sieged_by = ROOT }
          OR = {
          NOT = { has_province_modifier = archavon_trap_1_grey }
          NOT = { has_province_modifier = archavon_trap_2_grey }
          NOT = { has_province_modifier = archavon_trap_3_grey }
          NOT = { has_province_modifier = archavon_trap_4_grey }
          }
        }
        


  }

  after = {
			if = {
        limit = {
          3224 = {
            NOT = {
            has_province_modifier = archavon_trap_1_grey
            has_province_modifier = archavon_trap_2_grey
            has_province_modifier = archavon_trap_3_grey
            has_province_modifier = archavon_trap_4_grey
            }
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_cooldown
                value = 0
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_1_grey
                duration = 9125                       
                hidden = no                          
                desc = archavon_trap_1_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_cooldown
                value = 1
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_1_grey
                duration = 8395                      
                hidden = no                          
                desc = archavon_trap_1_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_cooldown
                value = 2
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_1_grey
                duration = 7665                      
                hidden = no                          
                desc = archavon_trap_1_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_cooldown
                value = 3
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_1_grey
                duration = 6935                     
                hidden = no                          
                desc = archavon_trap_1_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_cooldown
                value = 4
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_1_grey
                duration = 6205                     
                hidden = no                          
                desc = archavon_trap_1_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_cooldown
                value = 5
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_1_grey
                duration = 5475                    
                hidden = no                          
                desc = archavon_trap_1_grey_desc                       
            }
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_army
                value = 0
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_army
                value = 1
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_army
                value = 2
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_army
                value = 3
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_army
                value = 4
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_army
                value = 5
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_bonus_power
                value = 0
            }
          }
          add_country_modifier = {
              name = archavon_trap_1_boost_0
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_bonus_power
                value = 1
            }
          }
          add_country_modifier = {
              name = archavon_trap_1_boost_1
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_bonus_power
                value = 2
            }
          }
          add_country_modifier = {
              name = archavon_trap_1_boost_2
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_bonus_power
                value = 3
            }
          }
          add_country_modifier = {
              name = archavon_trap_1_boost_3
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_bonus_power
                value = 4
            }
          }
          add_country_modifier = {
              name = archavon_trap_1_boost_4
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_bonus_power
                value = 5
            }
          }
          add_country_modifier = {
              name = archavon_trap_1_boost_5
              duration = 30                       
              hidden = no                                                    
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_siege
                value = 0
            }
          }
          3224 = {
          change_siege = -10
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_siege
                value = 1
            }
          }
          3224 = {
          change_siege = -13
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_siege
                value = 2
            }
          }
          3224 = {
          change_siege = -16
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_siege
                value = 3
            }
          }
          3224 = {
          change_siege = -19
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_siege
                value = 4
            }
          }
          3224 = {
          change_siege = -22
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_1_siege
                value = 5
            }
          }
          3224 = {
          change_siege = -25
          }
        }
      }

			else_if = {
        limit = {
          3224 = {
            has_province_modifier = archavon_trap_1_grey
            NOT = {
            has_province_modifier = archavon_trap_2_grey
            has_province_modifier = archavon_trap_3_grey
            has_province_modifier = archavon_trap_4_grey
            }
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_cooldown
                value = 0
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_2_grey
                duration = 9125                       
                hidden = no                          
                desc = archavon_trap_2_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_cooldown
                value = 1
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_2_grey
                duration = 8395                      
                hidden = no                          
                desc = archavon_trap_2_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_cooldown
                value = 2
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_2_grey
                duration = 7665                      
                hidden = no                          
                desc = archavon_trap_2_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_cooldown
                value = 3
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_2_grey
                duration = 6935                     
                hidden = no                          
                desc = archavon_trap_2_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_cooldown
                value = 4
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_2_grey
                duration = 6205                     
                hidden = no                          
                desc = archavon_trap_2_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_cooldown
                value = 5
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_2_grey
                duration = 5475                    
                hidden = no                          
                desc = archavon_trap_2_grey_desc                       
            }
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_army
                value = 0
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_army
                value = 1
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_army
                value = 2
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_army
                value = 3
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_army
                value = 4
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_army
                value = 5
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_bonus_power
                value = 0
            }
          }
          add_country_modifier = {
              name = archavon_trap_2_boost_0
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_bonus_power
                value = 1
            }
          }
          add_country_modifier = {
              name = archavon_trap_2_boost_1
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_bonus_power
                value = 2
            }
          }
          add_country_modifier = {
              name = archavon_trap_2_boost_2
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_bonus_power
                value = 3
            }
          }
          add_country_modifier = {
              name = archavon_trap_2_boost_3
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_bonus_power
                value = 4
            }
          }
          add_country_modifier = {
              name = archavon_trap_2_boost_4
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_bonus_power
                value = 5
            }
          }
          add_country_modifier = {
              name = archavon_trap_2_boost_5
              duration = 30                       
              hidden = no                                                    
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_siege
                value = 0
            }
          }
          3224 = {
          change_siege = -10
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_siege
                value = 1
            }
          }
          3224 = {
          change_siege = -13
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_siege
                value = 2
            }
          }
          3224 = {
          change_siege = -16
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_siege
                value = 3
            }
          }
          3224 = {
          change_siege = -19
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_siege
                value = 4
            }
          }
          3224 = {
          change_siege = -22
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_2_siege
                value = 5
            }
          }
          3224 = {
          change_siege = -25
          }
        }
      }

			else_if = {
        limit = {
          3224 = {
            has_province_modifier = archavon_trap_1_grey
            has_province_modifier = archavon_trap_2_grey
            NOT = {
            has_province_modifier = archavon_trap_3_grey
            has_province_modifier = archavon_trap_4_grey
            }
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_cooldown
                value = 0
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_3_grey
                duration = 9125                       
                hidden = no                          
                desc = archavon_trap_3_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_cooldown
                value = 1
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_3_grey
                duration = 8395                      
                hidden = no                          
                desc = archavon_trap_3_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_cooldown
                value = 2
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_3_grey
                duration = 7665                      
                hidden = no                          
                desc = archavon_trap_3_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_cooldown
                value = 3
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_3_grey
                duration = 6935                     
                hidden = no                          
                desc = archavon_trap_3_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_cooldown
                value = 4
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_3_grey
                duration = 6205                     
                hidden = no                          
                desc = archavon_trap_3_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_cooldown
                value = 5
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_3_grey
                duration = 5475                    
                hidden = no                          
                desc = archavon_trap_3_grey_desc                       
            }
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_army
                value = 0
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_army
                value = 1
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_army
                value = 2
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_army
                value = 3
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_army
                value = 4
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_army
                value = 5
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_bonus_power
                value = 0
            }
          }
          add_country_modifier = {
              name = archavon_trap_3_boost_0
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_bonus_power
                value = 1
            }
          }
          add_country_modifier = {
              name = archavon_trap_3_boost_1
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_bonus_power
                value = 2
            }
          }
          add_country_modifier = {
              name = archavon_trap_3_boost_2
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_bonus_power
                value = 3
            }
          }
          add_country_modifier = {
              name = archavon_trap_3_boost_3
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_bonus_power
                value = 4
            }
          }
          add_country_modifier = {
              name = archavon_trap_3_boost_4
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_bonus_power
                value = 5
            }
          }
          add_country_modifier = {
              name = archavon_trap_3_boost_5
              duration = 30                       
              hidden = no                                                    
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_siege
                value = 0
            }
          }
          3224 = {
          change_siege = -10
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_siege
                value = 1
            }
          }
          3224 = {
          change_siege = -13
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_siege
                value = 2
            }
          }
          3224 = {
          change_siege = -16
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_siege
                value = 3
            }
          }
          3224 = {
          change_siege = -19
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_siege
                value = 4
            }
          }
          3224 = {
          change_siege = -22
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_3_siege
                value = 5
            }
          }
          3224 = {
          change_siege = -25
          }
        }
      }

			else_if = {
        limit = {
          3224 = {
            has_province_modifier = archavon_trap_1_grey
            has_province_modifier = archavon_trap_2_grey
            has_province_modifier = archavon_trap_3_grey
            NOT = {
            has_province_modifier = archavon_trap_4_grey
            }
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_cooldown
                value = 0
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_4_grey
                duration = 9125                       
                hidden = no                          
                desc = archavon_trap_4_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_cooldown
                value = 1
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_4_grey
                duration = 8395                      
                hidden = no                          
                desc = archavon_trap_4_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_cooldown
                value = 2
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_4_grey
                duration = 7665                      
                hidden = no                          
                desc = archavon_trap_4_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_cooldown
                value = 3
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_4_grey
                duration = 6935                     
                hidden = no                          
                desc = archavon_trap_4_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_cooldown
                value = 4
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_4_grey
                duration = 6205                     
                hidden = no                          
                desc = archavon_trap_4_grey_desc                       
            }
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_cooldown
                value = 5
            }
          }
          3224 = {
            add_permanent_province_modifier = {
                name = archavon_trap_4_grey
                duration = 5475                    
                hidden = no                          
                desc = archavon_trap_4_grey_desc                       
            }
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_army
                value = 0
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_army
                value = 1
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_army
                value = 2
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_army
                value = 3
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_army
                value = 4
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_army
                value = 5
            }
          }
          3224 = {
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
            infantry = ROOT
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_bonus_power
                value = 0
            }
          }
          add_country_modifier = {
              name = archavon_trap_4_boost_0
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_bonus_power
                value = 1
            }
          }
          add_country_modifier = {
              name = archavon_trap_4_boost_1
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_bonus_power
                value = 2
            }
          }
          add_country_modifier = {
              name = archavon_trap_4_boost_2
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_bonus_power
                value = 3
            }
          }
          add_country_modifier = {
              name = archavon_trap_4_boost_3
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_bonus_power
                value = 4
            }
          }
          add_country_modifier = {
              name = archavon_trap_4_boost_4
              duration = 30                       
              hidden = no                                                    
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_bonus_power
                value = 5
            }
          }
          add_country_modifier = {
              name = archavon_trap_4_boost_5
              duration = 30                       
              hidden = no                                                    
          }
        }
        if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_siege
                value = 0
            }
          }
          3224 = {
          change_siege = -10
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_siege
                value = 1
            }
          }
          3224 = {
          change_siege = -13
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_siege
                value = 2
            }
          }
          3224 = {
          change_siege = -16
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_siege
                value = 3
            }
          }
          3224 = {
          change_siege = -19
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_siege
                value = 4
            }
          }
          3224 = {
          change_siege = -22
          }
        }
        else_if = {
          limit = {
            is_variable_equal = {
                which = archavon_trap_4_siege
                value = 5
            }
          }
          3224 = {
          change_siege = -25
          }
        }
      }
  }

  option = {
    name = wwu_archavon.1.op1
    if = {
      limit = {
          3224 = {
            NOT = {
            has_province_modifier = archavon_trap_1_grey
            has_province_modifier = archavon_trap_2_grey
            has_province_modifier = archavon_trap_3_grey
            has_province_modifier = archavon_trap_4_grey
            }
          }
      }
          custom_tooltip = event_2_archavon_1_tt
          custom_tooltip = archavon_trap_army_custom_1_tt
          custom_tooltip = archavon_trap_bonus_power_custom_1_tt
          custom_tooltip = archavon_trap_siege_custom_1_tt
          custom_tooltip = archavon_trap_cooldown_custom_1_tt
      }
    
    else_if = {
      limit = {
          3224 = {
            has_province_modifier = archavon_trap_1_grey
            NOT = {
            has_province_modifier = archavon_trap_2_grey
            has_province_modifier = archavon_trap_3_grey
            has_province_modifier = archavon_trap_4_grey
            }
          }
      }
          custom_tooltip = event_2_archavon_2_tt
          custom_tooltip = archavon_trap_army_custom_2_tt
          custom_tooltip = archavon_trap_bonus_power_custom_2_tt
          custom_tooltip = archavon_trap_siege_custom_2_tt
          custom_tooltip = archavon_trap_cooldown_custom_2_tt
      }
    
    else_if = {
      limit = {
          3224 = {
            has_province_modifier = archavon_trap_1_grey
            has_province_modifier = archavon_trap_2_grey
            NOT = {
            has_province_modifier = archavon_trap_3_grey
            has_province_modifier = archavon_trap_4_grey
            }
          }
      }
          custom_tooltip = event_2_archavon_3_tt
          custom_tooltip = archavon_trap_army_custom_3_tt
          custom_tooltip = archavon_trap_bonus_power_custom_3_tt
          custom_tooltip = archavon_trap_siege_custom_3_tt
          custom_tooltip = archavon_trap_cooldown_custom_3_tt
      }
    
    else_if = {
      limit = {
          3224 = {
            has_province_modifier = archavon_trap_1_grey
            has_province_modifier = archavon_trap_2_grey
            has_province_modifier = archavon_trap_3_grey
            NOT = {
            has_province_modifier = archavon_trap_4_grey
            }
          }
      }
          custom_tooltip = event_2_archavon_3_tt
          custom_tooltip = archavon_trap_army_custom_4_tt
          custom_tooltip = archavon_trap_bonus_power_custom_4_tt
          custom_tooltip = archavon_trap_siege_custom_4_tt
          custom_tooltip = archavon_trap_cooldown_custom_4_tt
      }
    }
  }

country_event = {
  id = wwu_archavon.3
  title = wwu_archavon.3.title
  desc = wwu_archavon.3.desc
  picture = NAZMIR_1_eventPicture

  is_triggered_only = yes

  after = {
    clr_country_flag = archavon_upgrade_trap_decision_open
  }

  option = {
    name = wwu_archavon.3.op1
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_1_army
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_1_army
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_1_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_1_tt
    custom_tooltip = archavon_trap_army_custom_1_tt
  }
  option = {
    name = wwu_archavon.3.op2
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_1_bonus_power
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_1_bonus_power
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_1_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_2_tt
    custom_tooltip = archavon_trap_bonus_power_custom_1_tt
  }
  option = {
    name = wwu_archavon.3.op3
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_1_siege
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_1_siege
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_1_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_3_tt
    custom_tooltip = archavon_trap_siege_custom_1_tt
  }
  option = {
    name = wwu_archavon.3.op4
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_1_cooldown
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_1_cooldown
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_1_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_4_tt
    custom_tooltip = archavon_trap_cooldown_custom_1_tt
  }

  option = {
    name = wwu_archavon.3.op5
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_2_army
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_2_army
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_2_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_5_tt
    custom_tooltip = archavon_trap_army_custom_2_tt
  }
  option = {
    name = wwu_archavon.3.op6
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_2_bonus_power
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_2_bonus_power
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_2_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_6_tt
    custom_tooltip = archavon_trap_bonus_power_custom_2_tt
  }
  option = {
    name = wwu_archavon.3.op7
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_2_siege
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_2_siege
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_2_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_7_tt
    custom_tooltip = archavon_trap_siege_custom_2_tt
  }
  option = {
    name = wwu_archavon.3.op8
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_2_cooldown
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_2_cooldown
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_2_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_8_tt
    custom_tooltip = archavon_trap_cooldown_custom_2_tt
  }

  option = {
    name = wwu_archavon.3.op9
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_3_army
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_3_army
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_3_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_9_tt
    custom_tooltip = archavon_trap_army_custom_3_tt
  }
  option = {
    name = wwu_archavon.3.op10
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_3_bonus_power
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_3_bonus_power
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_3_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_10_tt
    custom_tooltip = archavon_trap_bonus_power_custom_3_tt
  }
  option = {
    name = wwu_archavon.3.op11
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_3_siege
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_3_siege
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_3_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_11_tt
    custom_tooltip = archavon_trap_siege_custom_3_tt
  }
  option = {
    name = wwu_archavon.3.op12
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_3_cooldown
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_3_cooldown
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_3_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_12_tt
    custom_tooltip = archavon_trap_cooldown_custom_3_tt
  }

  option = {
    name = wwu_archavon.3.op13
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_4_army
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_4_army
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_4_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_13_tt
    custom_tooltip = archavon_trap_army_custom_4_tt
  }
  option = {
    name = wwu_archavon.3.op14
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_4_bonus_power
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_4_bonus_power
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_4_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_14_tt
    custom_tooltip = archavon_trap_bonus_power_custom_4_tt
  }
  option = {
    name = wwu_archavon.3.op15
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_4_siege
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_4_siege
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_4_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_15_tt
    custom_tooltip = archavon_trap_siege_custom_4_tt
  }
  option = {
    name = wwu_archavon.3.op16
    trigger = {
        VAV = {
              NOT = {
                is_variable_equal = {
                    which = archavon_trap_4_cooldown
                    value = 5
                }
              }
        }
    }
    hidden_effect = {
                change_variable = {
                    which = archavon_trap_4_cooldown
                    value = 1
                }
                change_variable = {
                    which = archavon_trap_4_extra
                    value = 1
                }
    }
    custom_tooltip = event_3_archavon_16_tt
    custom_tooltip = archavon_trap_cooldown_custom_4_tt
  }

}














#change_siege = <int>
#3224