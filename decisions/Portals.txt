country_decisions = {
   portal_passage = {
        potential = {
            calc_true_if = { 
                all_owned_province = { has_building = wow_portal } 
                amount = 2 
            }
        }
        allow = {
			any_owned_province = {
				has_building = wow_portal
				controlled_by = ROOT
				num_of_units_in_province = {
					who = ROOT
					amount = 1
				}
			}
            custom_trigger_tooltip = {
                tooltip = RECENTLY_USED_TELEPORT
                
                NOT = { has_country_modifier = portal_fatigue }
            }
        }
        effect = {
            random_owned_province = {
				limit = {
					has_building = wow_portal
					num_of_units_in_province = {
						who = ROOT
						amount = 1
					}
				}
				save_event_target_as = sender
				set_province_flag = sender_province
			}
            random_owned_province = {
				limit = {
					NOT = { has_province_flag = sender_province }
					has_building = wow_portal
				}
				save_event_target_as = receiver
			}
			
            teleport_unit_with_any_amount = yes
            
			every_owned_province = {
				limit = {
					has_province_flag = sender_province
				}
				clr_province_flag = sender_province
			}
            
            if = {
                limit = {
                    NOT = { has_estate_privilege = estate_invention_dimensional_ripper }
                }
                add_country_modifier = {
                    name = portal_fatigue
                    duration = 365
                    hidden = yes
                }
            }
        }
        ai_will_do = {
            factor = 0
        }
    }
}
