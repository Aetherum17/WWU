#--------------------------------------
# Stormwind
#--------------------------------------
STW_stormwind_column_1 = {
	slot = 1
	generic = no
	ai = yes
    has_country_shield = yes
    
	potential = {
		tag = STW
		has_country_flag = stormwind_one_finished
	}

	STW_stormwind_army_reform = {
		icon = mission_titan_spirits
		position = 1

		trigger = {
			army_size = 50
			army_tradition = 50
			army_professionalism = 0.25
		}

		effect = {
			country_event = { id = wwu_mission_stw_main.1 }
		}
	}

	STW_stormwind_order_of_knights = {
		icon = mission_titan_spirits
		position = 2

		required_missions = { STW_stormwind_army_reform }

		trigger = {
			army_professionalism = 0.5
			army_tradition = 75
			cavalry_fraction = 0.2
			has_global_modifier_value = {
				which = cavalry_power
				value = 0.15
			}
		}

		effect = {
			custom_tooltip = SPECIALIST_BROTHERHOOD_TT
			set_country_flag = stormwind_avalable_horsebrothers

			custom_tooltip = ENABLE_PRIVILIEGE_LORDS_ON_HORSES_TT
			set_country_flag = stormwind_enable_privilige_lords_on_horses

			add_country_modifier = {
				name = mission_cavalry_expansion
				duration = -1
			}
		}
	}

    STW_stormwind_faith_and_magic = {
        icon = mission_titan_spirits
        position = 3

        required_missions = { STW_stormwind_order_of_knights }

        trigger = {
			2204 = {
				has_great_project = {
					type = gp_cathedral_of_light
					tier = 2
				}
			}
			2205 = {
				has_great_project = {
					type = gp_stormwind_mage_tower
					tier = 2
				}
			}
            OR = {
                innovativeness = 75
                religious_unity = 0.9
            }
        }

        provinces_to_highlight = {
            OR = {
                province_id = 2205
                province_id = 2204
            }
        }

        effect = {
            country_event = { id = wwu_mission_stw_main.2 }
        }
    }
}

STW_stormwind_column_2 = {
	slot = 2
	generic = no
	ai = yes
    has_country_shield = yes
    
	potential = {
		tag = STW
		has_country_flag = stormwind_one_finished
	}
    


}

STW_stormwind_column_3 = {
	slot = 3
	generic = no
	ai = yes
    has_country_shield = yes
    
	potential = {
		tag = STW
		has_country_flag = stormwind_one_finished
	}

	STW_stormwind_m_reestablish_order = { 
		icon = mission_paladin_empowered_seals_righteous
        position = 1

		trigger = {
			WST = {
				OR = {
					NOT = { exists = WST}
					OR = {
						has_opinion = {
							who = STW
							value = 175
						}
						NOT = { liberty_desire = 20 }
					}
				}
			}
			DKS = {
				OR = {
					NOT = { exists = DKS}
					OR = {
						has_opinion = {
							who = STW
							value = 175
						}
						NOT = { liberty_desire = 20 }
					}
				}
			}
			RRG = {
				OR = {
					NOT = { exists = RRG}
					OR = {
						has_opinion = {
							who = STW
							value = 175
						}
						NOT = { liberty_desire = 20 }
					}
				}
			}
			stability = 1
			legitimacy = 90
		}

		provinces_to_highlight = {
			OR = {
				is_capital_of = RRG
				is_capital_of = WST
				is_capital_of = DKS
			}
		}

		effect = {
			add_country_modifier = {
				name = mission_satisfied_subjects
				duration = -1
			}

			add_adm_power = 100
			add_dip_power = 100
		}
	}

	STW_stormwind_m_stormwind_ironforge_pact = {
		icon = mission_titan_spirits
		position = 2
		
		required_missions = { STW_stormwind_m_reestablish_order}

		trigger = {
			OR = {
				NOT = { exists = A29 }
				A29 = {
					exists = yes
					has_opinion = {
						who = STW
						value = 180
					}
				}
			}
		}

		provinces_to_highlight = {
			OR = {
				is_capital_of = A29
				area = area_ironforge
			}
		}

		effect = {
			if = {
				limit = {
					exists = A29
				}
				create_alliance = A29
				add_historical_friend = A29
				add_accepted_culture = culture_ironforge
				A29 = {
					add_historical_friend = STW
					add_accepted_culture = culture_stormwindian
				}
			}
			else = {
				area_ironforge = {
					add_permanent_claim = ROOT
				}
				add_mil_power = 100
			}
		}
	}

	STW_stormwind_m_gnomish_allies = {
		icon = mission_titan_spirits
		position = 3

		required_missions = { STW_stormwind_m_stormwind_ironforge_pact }

		trigger = {
			OR = {
				NOT = {exists = A32 }
				A32 = {
					exists = yes
					has_opinion = {
						who = STW
						value = 165
					}
				}
			}
		}

		provinces_to_highlight = {
			OR = {
				is_capital_of = A32
				area = area_gnomeregan
			}
		}

		effect = {
			if = {
				limit = {
					exists = A32
				}
				create_alliance = A32
				add_historical_friend = A32
				add_accepted_culture = culture_gnome
				add_country_modifier = {
					name = mission_gnomish_guests
					duration = -1
				}
				A32 = {
					add_historical_friend = STW
					add_accepted_culture = culture_stormwindian
					add_country_modifier = {
						name = mission_stormwindian_engineers
						duration = -1
					}
				}
			}
			else = {
				area_ironforge = {
					add_permanent_claim = ROOT
				}
				add_mil_power = 100
			}
		}
	}
        
		
    
    
}

STW_stormwind_column_4 = { 
	slot = 4
	generic = no
	ai = yes
    has_country_shield = yes
    
	potential = {
		tag = STW
		has_country_flag = stormwind_one_finished
	} 
    
    
}

STW_stormwind_column_5 = {
	slot = 5
	generic = no
	ai = yes
    has_country_shield = yes
    
	potential = {
		tag = STW
		has_country_flag = stormwind_one_finished
	} 
    
    
}