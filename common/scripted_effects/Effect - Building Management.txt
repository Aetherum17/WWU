#-----------------------------------
# On Actions
#-----------------------------------
on_yearly_pulse__building_management = {
    auto_build_effect = yes
    auto_destroy_effect = yes
}

#-----------------------------------
# Custom GUI
#-----------------------------------
# Gold Buffer Limit
reset_construction_limit = {
    clr_country_flag = construction_limit_1
    clr_country_flag = construction_limit_2
    clr_country_flag = construction_limit_3
    clr_country_flag = construction_limit_4
    clr_country_flag = construction_limit_5
    clr_country_flag = construction_limit_10
    clr_country_flag = construction_limit_15
    clr_country_flag = construction_limit_max
}
set_construction_limit_1 = {
    custom_tooltip = SET_CONSTRUCTION_LIMIT_1
    
    hidden_effect = {
        set_country_flag = construction_limit_1
    }
}
set_construction_limit_2 = {
    custom_tooltip = SET_CONSTRUCTION_LIMIT_2
    
    hidden_effect = {
        set_country_flag = construction_limit_2
    }
}
set_construction_limit_3 = {
    custom_tooltip = SET_CONSTRUCTION_LIMIT_3
    
    hidden_effect = {
        set_country_flag = construction_limit_3
    }
}
set_construction_limit_4 = {
    custom_tooltip = SET_CONSTRUCTION_LIMIT_4
    
    hidden_effect = {
        set_country_flag = construction_limit_4
    }
}
set_construction_limit_5 = {
    custom_tooltip = SET_CONSTRUCTION_LIMIT_5
    
    hidden_effect = {
        set_country_flag = construction_limit_5
    }
}
set_construction_limit_10 = {
    custom_tooltip = SET_CONSTRUCTION_LIMIT_10
    
    hidden_effect = {
        set_country_flag = construction_limit_10
    }
}
set_construction_limit_15 = {
    custom_tooltip = SET_CONSTRUCTION_LIMIT_15
    
    hidden_effect = {
        set_country_flag = construction_limit_15
    }
}
set_construction_limit_max = {
    custom_tooltip = SET_CONSTRUCTION_LIMIT_MAX
    
    hidden_effect = {
        set_country_flag = construction_limit_max
    }
}

# Automatic Construction Targets
reset_auto_build_targets = {
    clr_country_flag = auto_build_target_all
    clr_country_flag = auto_build_target_state_only
    clr_country_flag = auto_build_target_territory_only
}
set_auto_build_target_all = {
    custom_tooltip = SET_AUTO_BUILD_TARGET_all
    
    hidden_effect = {
        set_country_flag = auto_build_target_all
    }
}
set_auto_build_target_state_only = {
    custom_tooltip = SET_AUTO_BUILD_TARGET_state_only
    
    hidden_effect = {
        set_country_flag = auto_build_target_state_only
    }
}
set_auto_build_target_territory_only = {
    custom_tooltip = SET_AUTO_BUILD_TARGET_territory_only
    
    hidden_effect = {
        set_country_flag = auto_build_target_territory_only
    }
}

# Automatic Destruction Targets
reset_auto_destroy_targets = {
    clr_country_flag = auto_destroy_target_all
    clr_country_flag = auto_destroy_target_state_only
    clr_country_flag = auto_destroy_target_territory_only
}
set_auto_destroy_target_all = {
    custom_tooltip = SET_AUTO_DESTROY_TARGET_all
    
    hidden_effect = {
        set_country_flag = auto_destroy_target_all
    }
}
set_auto_destroy_target_state_only = {
    custom_tooltip = SET_AUTO_DESTROY_TARGET_state_only
    
    hidden_effect = {
        set_country_flag = auto_destroy_target_state_only
    }
}
set_auto_destroy_target_territory_only = {
    custom_tooltip = SET_AUTO_DESTROY_TARGET_territory_only
    
    hidden_effect = {
        set_country_flag = auto_destroy_target_territory_only
    }
}

# Building Status
toggle_barracks_status = {
    # Idle -> Build
    if = {
        limit = {
            NOT = { has_country_flag = barracks_building_status_1 }
            NOT = { has_country_flag = barracks_building_status_2 }
        }
        
        hidden_effect = { 
            set_country_flag = barracks_building_status_1 
        }
        
        custom_tooltip = START_AUTO_BUILD_barracks
        hidden_effect = { 
            clr_country_flag = auto_destroy_barracks 
            set_country_flag = auto_build_barracks 
        }
    }
    
    # Build -> Destroy
    else_if = {
        limit = {
            has_country_flag = barracks_building_status_1
        }
        
        hidden_effect = { 
            clr_country_flag = barracks_building_status_1
            set_country_flag = barracks_building_status_2 
        }
        
        custom_tooltip = START_AUTO_DESTROY_barracks
        hidden_effect = { 
            clr_country_flag = auto_build_barracks
            set_country_flag = auto_destroy_barracks 
        }
    }
    
    # Destroy -> Idle
    else_if = {
        limit = {
            has_country_flag = barracks_building_status_2
        }
        
        hidden_effect = { 
            clr_country_flag = barracks_building_status_1
            clr_country_flag = barracks_building_status_2 
        }
        
        custom_tooltip = START_IDLE_barracks
        hidden_effect = { 
            clr_country_flag = auto_destroy_barracks 
            clr_country_flag = auto_build_barracks 
        }
    }
}
toggle_arsenal_status = {
    # Idle -> Build
    if = {
        limit = {
            NOT = { has_country_flag = arsenal_building_status_1 }
            NOT = { has_country_flag = arsenal_building_status_2 }
        }
        
        hidden_effect = { 
            set_country_flag = arsenal_building_status_1 
        }
        
        custom_tooltip = START_AUTO_BUILD_arsenal
        hidden_effect = { 
            clr_country_flag = auto_destroy_arsenal 
            set_country_flag = auto_build_arsenal 
        }
    }
    
    # Build -> Destroy
    else_if = {
        limit = {
            has_country_flag = arsenal_building_status_1
        }
        
        hidden_effect = { 
            clr_country_flag = arsenal_building_status_1
            set_country_flag = arsenal_building_status_2 
        }
        
        custom_tooltip = START_AUTO_DESTROY_arsenal
        hidden_effect = { 
            clr_country_flag = auto_build_arsenal
            set_country_flag = auto_destroy_arsenal 
        }
    }
    
    # Destroy -> Idle
    else_if = {
        limit = {
            has_country_flag = arsenal_building_status_2
        }
        
        hidden_effect = { 
            clr_country_flag = arsenal_building_status_1
            clr_country_flag = arsenal_building_status_2 
        }
        
        custom_tooltip = START_IDLE_arsenal
        hidden_effect = { 
            clr_country_flag = auto_destroy_arsenal 
            clr_country_flag = auto_build_arsenal 
        }
    }
}
toggle_shipyard_status = {
    # Idle -> Build
    if = {
        limit = {
            NOT = { has_country_flag = shipyard_building_status_1 }
            NOT = { has_country_flag = shipyard_building_status_2 }
        }
        
        hidden_effect = { 
            set_country_flag = shipyard_building_status_1 
        }
        
        custom_tooltip = START_AUTO_BUILD_shipyard
        hidden_effect = { 
            clr_country_flag = auto_destroy_shipyard 
            set_country_flag = auto_build_shipyard 
        }
    }
    
    # Build -> Destroy
    else_if = {
        limit = {
            has_country_flag = shipyard_building_status_1
        }
        
        hidden_effect = { 
            clr_country_flag = shipyard_building_status_1
            set_country_flag = shipyard_building_status_2 
        }
        
        custom_tooltip = START_AUTO_DESTROY_shipyard
        hidden_effect = { 
            clr_country_flag = auto_build_shipyard
            set_country_flag = auto_destroy_shipyard 
        }
    }
    
    # Destroy -> Idle
    else_if = {
        limit = {
            has_country_flag = shipyard_building_status_2
        }
        
        hidden_effect = { 
            clr_country_flag = shipyard_building_status_1
            clr_country_flag = shipyard_building_status_2 
        }
        
        custom_tooltip = START_IDLE_shipyard
        hidden_effect = { 
            clr_country_flag = auto_destroy_shipyard 
            clr_country_flag = auto_build_shipyard 
        }
    }
}
toggle_dockyard_status = {
    # Idle -> Build
    if = {
        limit = {
            NOT = { has_country_flag = dockyard_building_status_1 }
            NOT = { has_country_flag = dockyard_building_status_2 }
        }
        
        hidden_effect = { 
            set_country_flag = dockyard_building_status_1 
        }
        
        custom_tooltip = START_AUTO_BUILD_dockyard
        hidden_effect = { 
            clr_country_flag = auto_destroy_dockyard 
            set_country_flag = auto_build_dockyard 
        }
    }
    
    # Build -> Destroy
    else_if = {
        limit = {
            has_country_flag = dockyard_building_status_1
        }
        
        hidden_effect = { 
            clr_country_flag = dockyard_building_status_1
            set_country_flag = dockyard_building_status_2 
        }
        
        custom_tooltip = START_AUTO_DESTROY_dockyard
        hidden_effect = { 
            clr_country_flag = auto_build_dockyard
            set_country_flag = auto_destroy_dockyard 
        }
    }
    
    # Destroy -> Idle
    else_if = {
        limit = {
            has_country_flag = dockyard_building_status_2
        }
        
        hidden_effect = { 
            clr_country_flag = dockyard_building_status_1
            clr_country_flag = dockyard_building_status_2 
        }
        
        custom_tooltip = START_IDLE_dockyard
        hidden_effect = { 
            clr_country_flag = auto_destroy_dockyard 
            clr_country_flag = auto_build_dockyard 
        }
    }
}
toggle_tower_status = {
    # Idle -> Build
    if = {
        limit = {
            NOT = { has_country_flag = tower_building_status_1 }
            NOT = { has_country_flag = tower_building_status_2 }
        }
        
        hidden_effect = { 
            set_country_flag = tower_building_status_1 
        }
        
        custom_tooltip = START_AUTO_BUILD_tower
        hidden_effect = { 
            clr_country_flag = auto_destroy_tower 
            set_country_flag = auto_build_tower 
        }
    }
    
    # Build -> Destroy
    else_if = {
        limit = {
            has_country_flag = tower_building_status_1
        }
        
        hidden_effect = { 
            clr_country_flag = tower_building_status_1
            set_country_flag = tower_building_status_2 
        }
        
        custom_tooltip = START_AUTO_DESTROY_tower
        hidden_effect = { 
            clr_country_flag = auto_build_tower
            set_country_flag = auto_destroy_tower 
        }
    }
    
    # Destroy -> Idle
    else_if = {
        limit = {
            has_country_flag = tower_building_status_2
        }
        
        hidden_effect = { 
            clr_country_flag = tower_building_status_1
            clr_country_flag = tower_building_status_2 
        }
        
        custom_tooltip = START_IDLE_tower
        hidden_effect = { 
            clr_country_flag = auto_destroy_tower 
            clr_country_flag = auto_build_tower 
        }
    }
}
toggle_training_ground_status = {
    # Idle -> Build
    if = {
        limit = {
            NOT = { has_country_flag = training_ground_building_status_1 }
            NOT = { has_country_flag = training_ground_building_status_2 }
        }
        
        hidden_effect = { 
            set_country_flag = training_ground_building_status_1 
        }
        
        custom_tooltip = START_AUTO_BUILD_training_ground
        hidden_effect = { 
            clr_country_flag = auto_destroy_training_ground 
            set_country_flag = auto_build_training_ground 
        }
    }
    
    # Build -> Destroy
    else_if = {
        limit = {
            has_country_flag = training_ground_building_status_1
        }
        
        hidden_effect = { 
            clr_country_flag = training_ground_building_status_1
            set_country_flag = training_ground_building_status_2 
        }
        
        custom_tooltip = START_AUTO_DESTROY_training_ground
        hidden_effect = { 
            clr_country_flag = auto_build_training_ground
            set_country_flag = auto_destroy_training_ground 
        }
    }
    
    # Destroy -> Idle
    else_if = {
        limit = {
            has_country_flag = training_ground_building_status_2
        }
        
        hidden_effect = { 
            clr_country_flag = training_ground_building_status_1
            clr_country_flag = training_ground_building_status_2 
        }
        
        custom_tooltip = START_IDLE_training_ground
        hidden_effect = { 
            clr_country_flag = auto_destroy_training_ground 
            clr_country_flag = auto_build_training_ground 
        }
    }
}
toggle_road_status = {
    # Idle -> Build
    if = {
        limit = {
            NOT = { has_country_flag = road_building_status_1 }
            NOT = { has_country_flag = road_building_status_2 }
        }
        
        hidden_effect = { 
            set_country_flag = road_building_status_1 
        }
        
        custom_tooltip = START_AUTO_BUILD_road
        hidden_effect = { 
            clr_country_flag = auto_destroy_road 
            set_country_flag = auto_build_road 
        }
    }
    
    # Build -> Destroy
    else_if = {
        limit = {
            has_country_flag = road_building_status_1
        }
        
        hidden_effect = { 
            clr_country_flag = road_building_status_1
            set_country_flag = road_building_status_2 
        }
        
        custom_tooltip = START_AUTO_DESTROY_road
        hidden_effect = { 
            clr_country_flag = auto_build_road
            set_country_flag = auto_destroy_road 
        }
    }
    
    # Destroy -> Idle
    else_if = {
        limit = {
            has_country_flag = road_building_status_2
        }
        
        hidden_effect = { 
            clr_country_flag = road_building_status_1
            clr_country_flag = road_building_status_2 
        }
        
        custom_tooltip = START_IDLE_road
        hidden_effect = { 
            clr_country_flag = auto_destroy_road 
            clr_country_flag = auto_build_road 
        }
    }
}
toggle_temple_status = {
    # Idle -> Build
    if = {
        limit = {
            NOT = { has_country_flag = temple_building_status_1 }
            NOT = { has_country_flag = temple_building_status_2 }
        }
        
        hidden_effect = { 
            set_country_flag = temple_building_status_1 
        }
        
        custom_tooltip = START_AUTO_BUILD_temple
        hidden_effect = { 
            clr_country_flag = auto_destroy_temple 
            set_country_flag = auto_build_temple 
        }
    }
    
    # Build -> Destroy
    else_if = {
        limit = {
            has_country_flag = temple_building_status_1
        }
        
        hidden_effect = { 
            clr_country_flag = temple_building_status_1
            set_country_flag = temple_building_status_2 
        }
        
        custom_tooltip = START_AUTO_DESTROY_temple
        hidden_effect = { 
            clr_country_flag = auto_build_temple
            set_country_flag = auto_destroy_temple 
        }
    }
    
    # Destroy -> Idle
    else_if = {
        limit = {
            has_country_flag = temple_building_status_2
        }
        
        hidden_effect = { 
            clr_country_flag = temple_building_status_1
            clr_country_flag = temple_building_status_2 
        }
        
        custom_tooltip = START_IDLE_temple
        hidden_effect = { 
            clr_country_flag = auto_destroy_temple 
            clr_country_flag = auto_build_temple 
        }
    }
}
toggle_marketplace_status = {
    # Idle -> Build
    if = {
        limit = {
            NOT = { has_country_flag = marketplace_building_status_1 }
            NOT = { has_country_flag = marketplace_building_status_2 }
        }
        
        hidden_effect = { 
            set_country_flag = marketplace_building_status_1 
        }
        
        custom_tooltip = START_AUTO_BUILD_marketplace
        hidden_effect = { 
            clr_country_flag = auto_destroy_marketplace 
            set_country_flag = auto_build_marketplace 
        }
    }
    
    # Build -> Destroy
    else_if = {
        limit = {
            has_country_flag = marketplace_building_status_1
        }
        
        hidden_effect = { 
            clr_country_flag = marketplace_building_status_1
            set_country_flag = marketplace_building_status_2 
        }
        
        custom_tooltip = START_AUTO_DESTROY_marketplace
        hidden_effect = { 
            clr_country_flag = auto_build_marketplace
            set_country_flag = auto_destroy_marketplace 
        }
    }
    
    # Destroy -> Idle
    else_if = {
        limit = {
            has_country_flag = marketplace_building_status_2
        }
        
        hidden_effect = { 
            clr_country_flag = marketplace_building_status_1
            clr_country_flag = marketplace_building_status_2 
        }
        
        custom_tooltip = START_IDLE_marketplace
        hidden_effect = { 
            clr_country_flag = auto_destroy_marketplace 
            clr_country_flag = auto_build_marketplace 
        }
    }
}
toggle_mine_status = {
    # Idle -> Build
    if = {
        limit = {
            NOT = { has_country_flag = mine_building_status_1 }
            NOT = { has_country_flag = mine_building_status_2 }
        }
        
        hidden_effect = { 
            set_country_flag = mine_building_status_1 
        }
        
        custom_tooltip = START_AUTO_BUILD_mine
        hidden_effect = { 
            clr_country_flag = auto_destroy_mine 
            set_country_flag = auto_build_mine 
        }
    }
    
    # Build -> Destroy
    else_if = {
        limit = {
            has_country_flag = mine_building_status_1
        }
        
        hidden_effect = { 
            clr_country_flag = mine_building_status_1
            set_country_flag = mine_building_status_2 
        }
        
        custom_tooltip = START_AUTO_DESTROY_mine
        hidden_effect = { 
            clr_country_flag = auto_build_mine
            set_country_flag = auto_destroy_mine 
        }
    }
    
    # Destroy -> Idle
    else_if = {
        limit = {
            has_country_flag = mine_building_status_2
        }
        
        hidden_effect = { 
            clr_country_flag = mine_building_status_1
            clr_country_flag = mine_building_status_2 
        }
        
        custom_tooltip = START_IDLE_mine
        hidden_effect = { 
            clr_country_flag = auto_destroy_mine 
            clr_country_flag = auto_build_mine 
        }
    }
}
toggle_farm_status = {
    # Idle -> Build
    if = {
        limit = {
            NOT = { has_country_flag = farm_building_status_1 }
            NOT = { has_country_flag = farm_building_status_2 }
        }
        
        hidden_effect = { 
            set_country_flag = farm_building_status_1 
        }
        
        custom_tooltip = START_AUTO_BUILD_farm
        hidden_effect = { 
            clr_country_flag = auto_destroy_farm 
            set_country_flag = auto_build_farm 
        }
    }
    
    # Build -> Destroy
    else_if = {
        limit = {
            has_country_flag = farm_building_status_1
        }
        
        hidden_effect = { 
            clr_country_flag = farm_building_status_1
            set_country_flag = farm_building_status_2 
        }
        
        custom_tooltip = START_AUTO_DESTROY_farm
        hidden_effect = { 
            clr_country_flag = auto_build_farm
            set_country_flag = auto_destroy_farm 
        }
    }
    
    # Destroy -> Idle
    else_if = {
        limit = {
            has_country_flag = farm_building_status_2
        }
        
        hidden_effect = { 
            clr_country_flag = farm_building_status_1
            clr_country_flag = farm_building_status_2 
        }
        
        custom_tooltip = START_IDLE_farm
        hidden_effect = { 
            clr_country_flag = auto_destroy_farm 
            clr_country_flag = auto_build_farm 
        }
    }
}
toggle_internment_camp_status = {
    # Idle -> Build
    if = {
        limit = {
            NOT = { has_country_flag = internment_camp_building_status_1 }
            NOT = { has_country_flag = internment_camp_building_status_2 }
        }
        
        hidden_effect = { 
            set_country_flag = internment_camp_building_status_1 
        }
        
        custom_tooltip = START_AUTO_BUILD_internment_camp
        hidden_effect = { 
            clr_country_flag = auto_destroy_internment_camp 
            set_country_flag = auto_build_internment_camp 
        }
    }
    
    # Build -> Destroy
    else_if = {
        limit = {
            has_country_flag = internment_camp_building_status_1
        }
        
        hidden_effect = { 
            clr_country_flag = internment_camp_building_status_1
            set_country_flag = internment_camp_building_status_2 
        }
        
        custom_tooltip = START_AUTO_DESTROY_internment_camp
        hidden_effect = { 
            clr_country_flag = auto_build_internment_camp
            set_country_flag = auto_destroy_internment_camp 
        }
    }
    
    # Destroy -> Idle
    else_if = {
        limit = {
            has_country_flag = internment_camp_building_status_2
        }
        
        hidden_effect = { 
            clr_country_flag = internment_camp_building_status_1
            clr_country_flag = internment_camp_building_status_2 
        }
        
        custom_tooltip = START_IDLE_internment_camp
        hidden_effect = { 
            clr_country_flag = auto_destroy_internment_camp 
            clr_country_flag = auto_build_internment_camp 
        }
    }
}
toggle_tavern_status = {
    # Idle -> Build
    if = {
        limit = {
            NOT = { has_country_flag = tavern_building_status_1 }
            NOT = { has_country_flag = tavern_building_status_2 }
        }
        
        hidden_effect = { 
            set_country_flag = tavern_building_status_1 
        }
        
        custom_tooltip = START_AUTO_BUILD_tavern
        hidden_effect = { 
            clr_country_flag = auto_destroy_tavern 
            set_country_flag = auto_build_tavern 
        }
    }
    
    # Build -> Destroy
    else_if = {
        limit = {
            has_country_flag = tavern_building_status_1
        }
        
        hidden_effect = { 
            clr_country_flag = tavern_building_status_1
            set_country_flag = tavern_building_status_2 
        }
        
        custom_tooltip = START_AUTO_DESTROY_tavern
        hidden_effect = { 
            clr_country_flag = auto_build_tavern
            set_country_flag = auto_destroy_tavern 
        }
    }
    
    # Destroy -> Idle
    else_if = {
        limit = {
            has_country_flag = tavern_building_status_2
        }
        
        hidden_effect = { 
            clr_country_flag = tavern_building_status_1
            clr_country_flag = tavern_building_status_2 
        }
        
        custom_tooltip = START_IDLE_tavern
        hidden_effect = { 
            clr_country_flag = auto_destroy_tavern 
            clr_country_flag = auto_build_tavern 
        }
    }
}
toggle_town_hall_status = {
    # Idle -> Build
    if = {
        limit = {
            NOT = { has_country_flag = town_hall_building_status_1 }
            NOT = { has_country_flag = town_hall_building_status_2 }
        }
        
        hidden_effect = { 
            set_country_flag = town_hall_building_status_1 
        }
        
        custom_tooltip = START_AUTO_BUILD_town_hall
        hidden_effect = { 
            clr_country_flag = auto_destroy_town_hall 
            set_country_flag = auto_build_town_hall 
        }
    }
    
    # Build -> Destroy
    else_if = {
        limit = {
            has_country_flag = town_hall_building_status_1
        }
        
        hidden_effect = { 
            clr_country_flag = town_hall_building_status_1
            set_country_flag = town_hall_building_status_2 
        }
        
        custom_tooltip = START_AUTO_DESTROY_town_hall
        hidden_effect = { 
            clr_country_flag = auto_build_town_hall
            set_country_flag = auto_destroy_town_hall 
        }
    }
    
    # Destroy -> Idle
    else_if = {
        limit = {
            has_country_flag = town_hall_building_status_2
        }
        
        hidden_effect = { 
            clr_country_flag = town_hall_building_status_1
            clr_country_flag = town_hall_building_status_2 
        }
        
        custom_tooltip = START_IDLE_town_hall
        hidden_effect = { 
            clr_country_flag = auto_destroy_town_hall 
            clr_country_flag = auto_build_town_hall 
        }
    }
}
toggle_manufactory_status = {
    # Idle -> Build
    if = {
        limit = {
            NOT = { has_country_flag = manufactory_building_status_1 }
            NOT = { has_country_flag = manufactory_building_status_2 }
        }
        
        hidden_effect = { 
            set_country_flag = manufactory_building_status_1 
        }
        
        custom_tooltip = START_AUTO_BUILD_manufactory
        hidden_effect = { 
            clr_country_flag = auto_destroy_manufactory 
            set_country_flag = auto_build_manufactory 
        }
    }
    
    # Build -> Destroy
    else_if = {
        limit = {
            has_country_flag = manufactory_building_status_1
        }
        
        hidden_effect = { 
            clr_country_flag = manufactory_building_status_1
            set_country_flag = manufactory_building_status_2 
        }
        
        custom_tooltip = START_AUTO_DESTROY_manufactory
        hidden_effect = { 
            clr_country_flag = auto_build_manufactory
            set_country_flag = auto_destroy_manufactory 
        }
    }
    
    # Destroy -> Idle
    else_if = {
        limit = {
            has_country_flag = manufactory_building_status_2
        }
        
        hidden_effect = { 
            clr_country_flag = manufactory_building_status_1
            clr_country_flag = manufactory_building_status_2 
        }
        
        custom_tooltip = START_IDLE_manufactory
        hidden_effect = { 
            clr_country_flag = auto_destroy_manufactory 
            clr_country_flag = auto_build_manufactory 
        }
    }
}


#-----------------------------------
# Misc
#-----------------------------------
init_building_management_defaults = {
    # Building Management Settings
    set_country_flag = construction_limit_1
    set_country_flag = auto_build_target_all
    set_country_flag = auto_destroy_target_all
}

auto_build_effect = {
    # Buffer is double the listed amount to account for usage before termination
    
    set_country_flag = auto_build_process
    
    set_variable = {
        which = automatic_construction_counter
        value = 0
    }
    
    if = {
        limit = {
            any_automatic_construction_selected = yes
        }
        
        if = {
            limit = {
                has_country_flag = construction_limit_1
            }
            
            while = {
                limit = {
                    treasury = 0
                    NOT = {
                        check_variable = {
                            which = automatic_construction_counter
                            value = 1
                        }
                    }
                    has_country_flag = auto_build_process
                }
                
                auto_building_construction = yes
            }
        }
        else_if = {
            limit = {
                has_country_flag = construction_limit_2
            }
            
            while = {
                limit = {
                    treasury = 0
                    NOT = {
                        check_variable = {
                            which = automatic_construction_counter
                            value = 2
                        }
                    }
                    has_country_flag = auto_build_process
                }
                
                auto_building_construction = yes
            }
        }
        else_if = {
            limit = {
                has_country_flag = construction_limit_3
            }
            
            while = {
                limit = {
                    treasury = 0
                    NOT = {
                        check_variable = {
                            which = automatic_construction_counter
                            value = 3
                        }
                    }
                    has_country_flag = auto_build_process
                }
                
                auto_building_construction = yes
            }
        }
        else_if = {
            limit = {
                has_country_flag = construction_limit_4
            }
            
            while = {
                limit = {
                    treasury = 0
                    NOT = {
                        check_variable = {
                            which = automatic_construction_counter
                            value = 4
                        }
                    }
                    has_country_flag = auto_build_process
                }
                
                auto_building_construction = yes
            }
        }
        else_if = {
            limit = {
                has_country_flag = construction_limit_5
            }
            
            while = {
                limit = {
                    treasury = 0
                    NOT = {
                        check_variable = {
                            which = automatic_construction_counter
                            value = 5
                        }
                    }
                    has_country_flag = auto_build_process
                }
                
                auto_building_construction = yes
            }
        }
        else_if = {
            limit = {
                has_country_flag = construction_limit_10
            }
            
            while = {
                limit = {
                    treasury = 0
                    NOT = {
                        check_variable = {
                            which = automatic_construction_counter
                            value = 10
                        }
                    }
                    has_country_flag = auto_build_process
                }
                
                auto_building_construction = yes
            }
        }
        else_if = {
            limit = {
                has_country_flag = construction_limit_15
            }
            
            while = {
                limit = {
                    treasury = 0
                    NOT = {
                        check_variable = {
                            which = automatic_construction_counter
                            value = 15
                        }
                    }
                    has_country_flag = auto_build_process
                }
                
                auto_building_construction = yes
            }
        }
        else_if = {
            limit = {
                has_country_flag = construction_limit_max
            }
            
            while = {
                limit = {
                    treasury = 0
                    has_country_flag = auto_build_process
                }
                
                auto_building_construction = yes
            }
        }
    }
}

auto_building_construction = {
    # End early conditions
    if = {
        limit = {
            OR = {
                # All provinces have an active process ongoing
                NOT = {
                    any_owned_province = {  
                        if = {
                            limit = {
                                owner = {
                                    has_country_flag = auto_build_target_state_only
                                }
                            }
                            is_state = yes
                        }
                        else_if = {
                            limit = {
                                owner = {
                                    has_country_flag = auto_build_target_territory_only
                                }
                            }
                            is_territory = yes
                        }
                        
                        NOT = { has_construction = any }
                    }
                }
                # No building slots in any province
                NOT = {
                    any_owned_province = {
                        if = {
                            limit = {
                                owner = {
                                    has_country_flag = auto_build_target_state_only
                                }
                            }
                            is_state = yes
                        }
                        else_if = {
                            limit = {
                                owner = {
                                    has_country_flag = auto_build_target_territory_only
                                }
                            }
                            is_territory = yes
                        }
                        
                        num_free_building_slots = 1
                    }
                }
                
            }
        }
        
        clr_country_flag = auto_build_process
    }

    change_variable = {
        which = automatic_construction_counter
        value = 1
    }
    
    # Farm
    if = {
        limit = {
            has_country_flag = auto_build_farm
        }
        
        if = {
            limit = {
                NOT = { adm_tech = 7 }
                treasury = 100
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_farm_1 }
                    can_build = wow_farm_1
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                add_building_construction = {
                    building = wow_farm_1
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                NOT = { adm_tech = 15 }
                treasury = 300
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_farm_2 }
                    can_build = wow_farm_2
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_farm_1
                    }
                    
                    remove_building = wow_farm_1
                }
                
                add_building_construction = {
                    building = wow_farm_2
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                treasury = 500
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_farm_3 }
                    can_build = wow_farm_3
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_farm_1
                    }
                    
                    remove_building = wow_farm_1
                }
                if = {
                    limit = {
                        has_building = wow_farm_2
                    }
                    
                    remove_building = wow_farm_2
                }
                
                add_building_construction = {
                    building = wow_farm_3
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
    }
    # Internment Camp
    if = {
        limit = {
            has_country_flag = auto_build_interment_camp
        }
        
        if = {
            limit = {
                NOT = { dip_tech = 7 }
                treasury = 100
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_internment_camp_1 }
                    can_build = wow_internment_camp_1
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                add_building_construction = {
                    building = wow_internment_camp_1
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                NOT = { dip_tech = 15 }
                treasury = 300
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_internment_camp_2 }
                    can_build = wow_internment_camp_2
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_internment_camp_1
                    }
                    
                    remove_building = wow_internment_camp_1
                }
                
                add_building_construction = {
                    building = wow_internment_camp_2
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                treasury = 500
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_internment_camp_3 }
                    can_build = wow_internment_camp_3
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_internment_camp_1
                    }
                    
                    remove_building = wow_internment_camp_1
                }
                if = {
                    limit = {
                        has_building = wow_internment_camp_2
                    }
                    
                    remove_building = wow_internment_camp_2
                }
                
                add_building_construction = {
                    building = wow_internment_camp_3
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
    }
    # Temple
    if = {
        limit = {
            has_country_flag = auto_build_temple
        }
        
        if = {
            limit = {
                NOT = { adm_tech = 7 }
                treasury = 100
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_temple_1 }
                    can_build = wow_temple_1
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                
                add_building_construction = {
                    building = wow_temple_1
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                NOT = { adm_tech = 15 }
                treasury = 300
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_temple_2 }
                    can_build = wow_temple_2
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_temple_1
                    }
                    
                    remove_building = wow_temple_1
                }
                
                add_building_construction = {
                    building = wow_temple_2
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                treasury = 500
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_temple_3 }
                    can_build = wow_temple_3
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_temple_1
                    }
                    
                    remove_building = wow_temple_1
                }
                if = {
                    limit = {
                        has_building = wow_temple_2
                    }
                    
                    remove_building = wow_temple_2
                }
                
                add_building_construction = {
                    building = wow_temple_3
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
    }
    # Mine
    if = {
        limit = {
            has_country_flag = auto_build_mine
        }
        
        if = {
            limit = {
                NOT = { adm_tech = 7 }
                treasury = 100
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_mine_1 }
                    can_build = wow_mine_1
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                add_building_construction = {
                    building = wow_mine_1
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                NOT = { adm_tech = 15 }
                treasury = 300
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_mine_2 }
                    can_build = wow_mine_2
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_mine_1
                    }
                    
                    remove_building = wow_mine_1
                }
                
                add_building_construction = {
                    building = wow_mine_2
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                treasury = 500
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_mine_3 }
                    can_build = wow_mine_3
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_mine_1
                    }
                    
                    remove_building = wow_mine_1
                }
                if = {
                    limit = {
                        has_building = wow_mine_2
                    }
                    
                    remove_building = wow_mine_2
                }
                
                add_building_construction = {
                    building = wow_mine_3
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
    }
    # Marketplace
    if = {
        limit = {
            has_country_flag = auto_build_marketplace
        }
        
        if = {
            limit = {
                NOT = { dip_tech = 7 }
                treasury = 100
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_market_1 }
                    can_build = wow_market_1
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                add_building_construction = {
                    building = wow_market_1
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                NOT = { dip_tech = 15 }
                treasury = 300
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_market_2 }
                    can_build = wow_market_2
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_market_1
                    }
                    
                    remove_building = wow_market_1
                }
                
                add_building_construction = {
                    building = wow_market_2
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                treasury = 500
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_market_3 }
                    can_build = wow_market_3
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_market_1
                    }
                    
                    remove_building = wow_market_1
                }
                if = {
                    limit = {
                        has_building = wow_market_2
                    }
                    
                    remove_building = wow_market_2
                }
                
                add_building_construction = {
                    building = wow_market_3
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
    }
    # Tavern
    if = {
        limit = {
            has_country_flag = auto_build_tavern
        }
        
        if = {
            limit = {
                NOT = { adm_tech = 7 }
                treasury = 100
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_tavern_1 }
                    can_build = wow_tavern_1
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                add_building_construction = {
                    building = wow_tavern_1
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                NOT = { adm_tech = 15 }
                treasury = 300
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_tavern_2 }
                    can_build = wow_tavern_2
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_tavern_1
                    }
                    
                    remove_building = wow_tavern_1
                }
                
                add_building_construction = {
                    building = wow_tavern_2
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                treasury = 500
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_tavern_3 }
                    can_build = wow_tavern_3
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_tavern_1
                    }
                    
                    remove_building = wow_tavern_1
                }
                if = {
                    limit = {
                        has_building = wow_tavern_2
                    }
                    
                    remove_building = wow_tavern_2
                }
                
                add_building_construction = {
                    building = wow_tavern_3
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
    }
    # Barracks
    if = {
        limit = {
            has_country_flag = auto_build_barracks
        }
        
        if = {
            limit = {
                NOT = { mil_tech = 7 }
                treasury = 100
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_barracks_1 }
                    can_build = wow_barracks_1
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                add_building_construction = {
                    building = wow_barracks_1
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                NOT = { mil_tech = 15 }
                treasury = 300
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_barracks_2 }
                    can_build = wow_barracks_2
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_barracks_1
                    }
                    
                    remove_building = wow_barracks_1
                }
                
                add_building_construction = {
                    building = wow_barracks_2
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                treasury = 500
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_barracks_3 }
                    can_build = wow_barracks_3
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_barracks_1
                    }
                    
                    remove_building = wow_barracks_1
                }
                if = {
                    limit = {
                        has_building = wow_barracks_2
                    }
                    
                    remove_building = wow_barracks_2
                }
                
                add_building_construction = {
                    building = wow_barracks_3
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
    }
    # Arsenal
    if = {
        limit = {
            has_country_flag = auto_build_arsenal
        }
        
        if = {
            limit = {
                NOT = { mil_tech = 7 }
                treasury = 100
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_arsenal_1 }
                    can_build = wow_arsenal_1
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                add_building_construction = {
                    building = wow_arsenal_1
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                NOT = { mil_tech = 15 }
                treasury = 300
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_arsenal_2 }
                    can_build = wow_arsenal_2
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_arsenal_1
                    }
                    
                    remove_building = wow_arsenal_1
                }
                
                add_building_construction = {
                    building = wow_arsenal_2
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                treasury = 500
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_arsenal_3 }
                    can_build = wow_arsenal_3
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_arsenal_1
                    }
                    
                    remove_building = wow_arsenal_1
                }
                if = {
                    limit = {
                        has_building = wow_arsenal_2
                    }
                    
                    remove_building = wow_arsenal_2
                }
                
                add_building_construction = {
                    building = wow_arsenal_3
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
    }
    # Shipyard
    if = {
        limit = {
            has_country_flag = auto_build_shipyard
        }
        
        if = {
            limit = {
                NOT = { dip_tech = 7 }
                treasury = 100
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_shipyard_1 }
                    can_build = wow_shipyard_1
                    num_free_building_slots = 1
                    has_port = yes
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                add_building_construction = {
                    building = wow_shipyard_1
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                NOT = { dip_tech = 15 }
                treasury = 300
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_shipyard_2 }
                    can_build = wow_shipyard_2
                    num_free_building_slots = 1
                    has_port = yes
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_shipyard_1
                    }
                    
                    remove_building = wow_shipyard_1
                }
                
                add_building_construction = {
                    building = wow_shipyard_2
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                treasury = 500
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_shipyard_3 }
                    can_build = wow_shipyard_3
                    num_free_building_slots = 1
                    has_port = yes
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_shipyard_1
                    }
                    
                    remove_building = wow_shipyard_1
                }
                if = {
                    limit = {
                        has_building = wow_shipyard_2
                    }
                    
                    remove_building = wow_shipyard_2
                }
                
                add_building_construction = {
                    building = wow_shipyard_3
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
    }
    # Dockyard
    if = {
        limit = {
            has_country_flag = auto_build_dockyard
        }
        
        if = {
            limit = {
                NOT = { dip_tech = 7 }
                treasury = 100
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_dockyard_1 }
                    can_build = wow_dockyard_1
                    num_free_building_slots = 1
                    has_port = yes
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                add_building_construction = {
                    building = wow_dockyard_1
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                NOT = { dip_tech = 15 }
                treasury = 300
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_dockyard_2 }
                    can_build = wow_dockyard_2
                    num_free_building_slots = 1
                    has_port = yes
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_dockyard_1
                    }
                    
                    remove_building = wow_dockyard_1
                }
                
                add_building_construction = {
                    building = wow_dockyard_2
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                treasury = 500
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_dockyard_3 }
                    can_build = wow_dockyard_3
                    num_free_building_slots = 1
                    has_port = yes
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }

                if = {
                    limit = {
                        has_building = wow_dockyard_1
                    }
                    
                    remove_building = wow_dockyard_1
                }
                if = {
                    limit = {
                        has_building = wow_dockyard_2
                    }
                    
                    remove_building = wow_dockyard_2
                }
                
                add_building_construction = {
                    building = wow_dockyard_3
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
    }
    # Tower
    if = {
        limit = {
            has_country_flag = auto_build_tower
        }
        
        if = {
            limit = {
                NOT = { mil_tech = 7 }
                treasury = 100
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_tower_1 }
                    can_build = wow_tower_1
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                add_building_construction = {
                    building = wow_tower_1
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                NOT = { mil_tech = 15 }
                treasury = 300
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_tower_2 }
                    can_build = wow_tower_2
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_tower_1
                    }
                    
                    remove_building = wow_tower_1
                }
                
                add_building_construction = {
                    building = wow_tower_2
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                treasury = 500
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_tower_3 }
                    can_build = wow_tower_3
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_tower_1
                    }
                    
                    remove_building = wow_tower_1
                }
                if = {
                    limit = {
                        has_building = wow_tower_2
                    }
                    
                    remove_building = wow_tower_2
                }
                
                add_building_construction = {
                    building = wow_tower_3
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
    }
    # Training Ground
    if = {
        limit = {
            has_country_flag = auto_build_training_ground
        }
        
        if = {
            limit = {
                NOT = { mil_tech = 7 }
                treasury = 100
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_training_ground_1 }
                    can_build = wow_training_ground_1
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                add_building_construction = {
                    building = wow_training_ground_1
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                NOT = { mil_tech = 15 }
                treasury = 300
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_training_ground_2 }
                    can_build = wow_training_ground_2
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_training_ground_1
                    }
                    
                    remove_building = wow_training_ground_1
                }
                
                add_building_construction = {
                    building = wow_training_ground_2
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                treasury = 500
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_training_ground_3 }
                    can_build = wow_training_ground_3
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }

                if = {
                    limit = {
                        has_building = wow_training_ground_1
                    }
                    
                    remove_building = wow_training_ground_1
                }
                if = {
                    limit = {
                        has_building = wow_training_ground_2
                    }
                    
                    remove_building = wow_training_ground_2
                }
                
                add_building_construction = {
                    building = wow_training_ground_3
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
    }
    # Road
    if = {
        limit = {
            has_country_flag = auto_build_road
        }
        
        if = {
            limit = {
                NOT = { dip_tech = 7 }
                treasury = 100
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_road_1 }
                    can_build = wow_road_1
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                add_building_construction = {
                    building = wow_road_1
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                NOT = { dip_tech = 15 }
                treasury = 300
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_road_2 }
                    can_build = wow_road_2
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_road_1
                    }
                    
                    remove_building = wow_road_1
                }
                
                add_building_construction = {
                    building = wow_road_2
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                treasury = 500
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_road_3 }
                    can_build = wow_road_3
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_road_1
                    }
                    
                    remove_building = wow_road_1
                }
                if = {
                    limit = {
                        has_building = wow_road_2
                    }
                    
                    remove_building = wow_road_2
                }
                
                add_building_construction = {
                    building = wow_road_3
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
    }
    
    # Town Hall
    if = {
        limit = {
            has_country_flag = auto_build_town_hall
        }
        
        if = {
            limit = {
                NOT = { adm_tech = 7 }
                treasury = 100
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_town_hall_1 }
                    can_build = wow_town_hall_1
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                add_building_construction = {
                    building = wow_town_hall_1
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                NOT = { adm_tech = 15 }
                treasury = 300
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_town_hall_2 }
                    can_build = wow_town_hall_2
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_town_hall_1
                    }
                    
                    remove_building = wow_town_hall_1
                }
                
                
                add_building_construction = {
                    building = wow_town_hall_2
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
        else_if = {
            limit = {
                treasury = 500
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_town_hall_3 }
                    can_build = wow_town_hall_3
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                if = {
                    limit = {
                        has_building = wow_town_hall_1
                    }
                    
                    remove_building = wow_town_hall_1
                }
                if = {
                    limit = {
                        has_building = wow_town_hall_2
                    }
                    
                    remove_building = wow_town_hall_2
                }
                
                add_building_construction = {
                    building = wow_town_hall_3
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
    }
    
    # Manufactory
    if = {
        limit = {
            has_country_flag = auto_build_manufactory
        }
        
        if = {
            limit = {
                dip_tech = 15
                treasury = 500
            }
            random_owned_province = {
                limit = {
                    NOT = { has_building = wow_manufactory }
                    can_build = wow_manufactory
                    num_free_building_slots = 1
                    
                    if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_state_only
                            }
                        }
                        is_state = yes
                    }
                    else_if = {
                        limit = {
                            owner = {
                                has_country_flag = auto_build_target_territory_only
                            }
                        }
                        is_territory = yes
                    }
                }
                
                add_building_construction = {
                    building = wow_manufactory
                    speed = 1.0
                    cost = 1.0
                }
            }
        }
    }
}

auto_destroy_effect = {
    # Farm
    if = {
        limit = {
            has_country_flag = auto_destroy_farm
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_farm_3
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_farm_3
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_farm_2
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_farm_2
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_farm_1
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_farm_1
        }
    }
    
    # Internment Camp
    if = {
        limit = {
            has_country_flag = auto_destroy_internment_camp
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_internment_camp_1
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_internment_camp_1
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_internment_camp_2
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_internment_camp_2
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_internment_camp_3
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_internment_camp_3
        }
    }
    
    # Temple
    if = {
        limit = {
            has_country_flag = auto_destroy_temple
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_temple_1
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_temple_1
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_temple_2
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_temple_2
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_temple_3
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_temple_3
        }
    }
    
    # Mine
    if = {
        limit = {
            has_country_flag = auto_destroy_mine
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_mine_1
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_mine_1
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_mine_2
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_mine_2
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_mine_3
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_mine_3
        }
    }
    
    # Marketplace
    if = {
        limit = {
            has_country_flag = auto_destroy_marketplace
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_market_1
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_market_1
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_market_2
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_market_2
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_market_3
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_market_3
        }
    }
    
    # Tavern
    if = {
        limit = {
            has_country_flag = auto_destroy_tavern
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_tavern_1
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_tavern_1
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_tavern_2
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_tavern_2
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_tavern_3
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_tavern_3
        }
    }
    
    # Barracks
    if = {
        limit = {
            has_country_flag = auto_destroy_barracks
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_barracks_1
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_barracks_1
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_barracks_2
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_barracks_2
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_barracks_3
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_barracks_3
        }
    }
    
    # Arsenal
    if = {
        limit = {
            has_country_flag = auto_destroy_arsenal
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_arsenal_1
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_arsenal_1
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_arsenal_2
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_arsenal_2
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_arsenal_3
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_arsenal_3
        }
    }
    
    # Dockyard
    if = {
        limit = {
            has_country_flag = auto_destroy_dockyard
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_dockyard_1
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_dockyard_1
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_dockyard_2
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_dockyard_2
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_dockyard_3
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_dockyard_3
        }
    }
    
    # Shipyard
    if = {
        limit = {
            has_country_flag = auto_destroy_shipyard
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_shipyard_1
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_shipyard_1
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_shipyard_2
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_shipyard_2
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_shipyard_3
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_shipyard_3
        }
    }
    
    # Tower
    if = {
        limit = {
            has_country_flag = auto_destroy_tower
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_tower_1
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_tower_1
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_tower_2
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_tower_2
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_tower_3
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_tower_3
        }
    }
    
    # Training Ground
    if = {
        limit = {
            has_country_flag = auto_destroy_training_ground
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_training_ground_1
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_training_ground_1
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_training_ground_2
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_training_ground_2
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_training_ground_3
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_training_ground_3
        }
    }
    
    # Manufactory
    if = {
        limit = {
            has_country_flag = auto_destroy_manufactory
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_manufactory
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_manufactory
        }
    }
    
    # Road
    if = {
        limit = {
            has_country_flag = auto_destroy_road
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_road_1
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_road_1
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_road_2
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_road_2
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_road_3
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_road_3
        }
    }
    
    # Town Hall
    if = {
        limit = {
            has_country_flag = auto_destroy_town_hall
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_town_hall_1
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_town_hall_1
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_town_hall_2
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_town_hall_2
        }
        
        every_owned_province = {
            limit = {
                has_building = wow_town_hall_3
                
                if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_state_only
                        }
                    }
                    is_state = yes
                }
                else_if = {
                    limit = {
                        owner = {
                            has_country_flag = auto_destroy_target_territory_only
                        }
                    }
                    is_territory = yes
                }
            }
            
            remove_building = wow_town_hall_3
        }
    }
    
}
