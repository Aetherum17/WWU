set_alignments = {
	# Set alignment variables. Used to reset them every year.
	set_variable = {
		which = var_lawful_good
		value = 0
	}
	set_variable = {
		which = var_lawful_neutral
		value = 0
	}
	set_variable = {
		which = var_lawful_evil
		value = 0
	}
	set_variable = {
		which = var_neutral_good
		value = 0
	}
	set_variable = {
		which = var_true_neutral
		value = 0
	}
	set_variable = {
		which = var_neutral_evil
		value = 0
	}
	set_variable = {
		which = var_chaotic_good
		value = 0
	}
	set_variable = {
		which = var_chaotic_neutral
		value = 0
	}
	set_variable = {
		which = var_chaotic_evil
		value = 0
	}
}
# Government
calculate_government_alignment = {
	if = {
		limit = { lawful_good_government = yes }
		change_variable = {
			which = var_lawful_good
			value = 2
		}
	}
	if = {
		limit = { lawful_neutral_government = yes }
		change_variable = {
			which = var_lawful_neutral
			value = 1
		}
	}
	if = {
		limit = { lawful_evil_government = yes }
		change_variable = {
			which = var_lawful_evil
			value = 2
		}
	}
	if = {
		limit = { neutral_good_government = yes }
		change_variable = {
			which = var_neutral_good
			value = 1
		}
	}
	if = {
		limit = { true_neutral_government = yes }
		change_variable = {
			which = var_true_neutral
			value = 1
		}
	}
	if = {
		limit = { neutral_evil_government = yes }
		change_variable = {
			which = var_neutral_evil
			value = 2
		}
	}
	if = {
		limit = { chaotic_good_government = yes }
		change_variable = {
			which = var_chaotic_good
			value = 2
		}
	}
	if = {
		limit = { chaotic_neutral_government = yes }
		change_variable = {
			which = var_chaotic_neutral
			value = 2
		}
	}
	if = {
		limit = { chaotic_evil_government = yes }
		change_variable = {
			which = var_chaotic_evil
			value = 2
		}
	}
}
#Culture
calculate_culture_alignment = {
	if = {
		limit = { lawful_good_culture = yes }
		change_variable = {
			which = var_lawful_good
			value = 3
		}
	}
	if = {
		limit = { lawful_neutral_culture = yes }
		change_variable = {
			which = var_lawful_neutral
			value = 2
		}
	}
	if = {
		limit = { lawful_evil_culture = yes }
		change_variable = {
			which = var_lawful_evil
			value = 3
		}
	}
	if = {
		limit = { neutral_good_culture = yes }
		change_variable = {
			which = var_neutral_good
			value = 2
		}
	}
	if = {
		limit = { true_neutral_culture = yes }
		change_variable = {
			which = var_true_neutral
			value = 2
		}
	}
	if = {
		limit = { neutral_evil_culture = yes }
		change_variable = {
			which = var_neutral_evil
			value = 2
		}
	}
	if = {
		limit = { chaotic_good_culture = yes }
		change_variable = {
			which = var_chaotic_good
			value = 2
		}
	}
	if = {
		limit = { chaotic_neutral_culture = yes }
		change_variable = {
			which = var_chaotic_neutral
			value = 2
		}
	}
	if = {
		limit = { chaotic_evil_culture = yes }
		change_variable = {
			which = var_chaotic_evil
			value = 3
		}
	}
}
#Religion
calculate_religion_alignment = {
	if = {
		limit = { lawful_good_religion = yes }
		change_variable = {
			which = var_lawful_good
			value = 4
		}
	}
	if = {
		limit = { lawful_neutral_religion = yes }
		change_variable = {
			which = var_lawful_neutral
			value = 4
		}
	}
	if = {
		limit = { lawful_evil_religion = yes }
		change_variable = {
			which = var_lawful_evil
			value = 4
		}
	}
	if = {
		limit = { neutral_good_religion = yes }
		change_variable = {
			which = var_neutral_good
			value = 3
			value = 3
		}
	}
	if = {
		limit = { true_neutral_religion = yes }
		change_variable = {
			which = var_true_neutral
			value = 4
		}
	}
	if = {
		limit = { neutral_evil_religion = yes }
		change_variable = {
			which = var_neutral_evil
			value = 3
		}
	}
	if = {
		limit = { chaotic_good_religion = yes }
		change_variable = {
			which = var_chaotic_good
			value = 4
		}
	}
	if = {
		limit = { chaotic_neutral_religion = yes }
		change_variable = {
			which = var_chaotic_neutral
			value = 3
		}
	}
	if = {
		limit = { chaotic_evil_religion = yes }
		change_variable = {
			which = var_chaotic_evil
			value = 4
		}
	}
}
#personality
calculate_personality_alignment = {
	if = {
		limit = { lawful_good_personality = yes }
		change_variable = {
			which = var_lawful_good
			value = 2
		}
	}
	if = {
		limit = { lawful_neutral_personality = yes }
		change_variable = {
			which = var_lawful_neutral
			value = 2
		}
	}
	if = {
		limit = { lawful_evil_personality = yes }
		change_variable = {
			which = var_lawful_evil
			value = 2
		}
	}
	if = {
		limit = { neutral_good_personality = yes }
		change_variable = {
			which = var_neutral_good
			value = 2
		}
	}
	if = {
		limit = { true_neutral_personality = yes }
		change_variable = {
			which = var_true_neutral
			value = 2
		}
	}
	if = {
		limit = { neutral_evil_personality = yes }
		change_variable = {
			which = var_neutral_evil
			value = 2
		}
	}
	if = {
		limit = { chaotic_good_personality = yes }
		change_variable = {
			which = var_chaotic_good
			value = 2
		}
	}
	if = {
		limit = { chaotic_neutral_personality = yes }
		change_variable = {
			which = var_chaotic_neutral
			value = 2
		}
	}
	if = {
		limit = { chaotic_evil_personality = yes }
		change_variable = {
			which = var_chaotic_evil
			value = 2
		}
	}
}
#Lore
calculate_lore_alignment = {
	if = {
		limit = { lawful_good_lore = yes }
		change_variable = {
			which = var_lawful_good
			value = 7
		}
	}
	if = {
		limit = { lawful_neutral_lore = yes }
		change_variable = {
			which = var_lawful_neutral
			value = 7
		}
	}
	if = {
		limit = { lawful_evil_lore = yes }
		change_variable = {
			which = var_lawful_evil
			value = 7
		}
	}
	if = {
		limit = { neutral_good_lore = yes }
		change_variable = {
			which = var_neutral_good
			value = 7
		}
	}
	if = {
		limit = { true_neutral_lore = yes }
		change_variable = {
			which = var_true_neutral
			value = 7
		}
	}
	if = {
		limit = { neutral_evil_lore = yes }
		change_variable = {
			which = var_neutral_evil
			value = 7
		}
	}
	if = {
		limit = { chaotic_good_lore = yes }
		change_variable = {
			which = var_chaotic_good
			value = 5
		}
	}
	if = {
		limit = { chaotic_neutral_lore = yes }
		change_variable = {
			which = var_chaotic_neutral
			value = 5
		}
	}
	if = {
		limit = { chaotic_evil_lore = yes }
		change_variable = {
			which = var_chaotic_evil
			value = 5
		}
	}
}
#Special Cases
calculate_special_alignment = {
	#Corruption increases 'evil'ness
	if = {
		limit = { corruption = 3 }
		change_variable = {
			which = var_chaotic_evil
			value = 1
		}
		change_variable = {
			which = var_neutral_evil
			value = 1
		}
		change_variable = {
			which = var_lawful_evil
			value = 1
		}
	}
	if = {
		limit = { corruption = 6 }
		change_variable = {
			which = var_chaotic_evil
			value = 1
		}
		change_variable = {
			which = var_neutral_evil
			value = 1
		}
		change_variable = {
			which = var_lawful_evil
			value = 1
		}
	}
	if = {
		limit = { corruption = 9 }
		change_variable = {
			which = var_chaotic_evil
			value = 1
		}
		change_variable = {
			which = var_neutral_evil
			value = 1
		}
		change_variable = {
			which = var_lawful_evil
			value = 1
		}
	}
	#Government rank increases lawfulness.
	if = {
		limit = { government_rank = 6 }
		change_variable = {
			which = var_lawful_good
			value = 1
		}
		change_variable = {
			which = var_lawful_neutral
			value = 1
		}
		change_variable = {
			which = var_lawful_evil
			value = 1
		}
	}
	if = {
		limit = { government_rank = 8 }
		change_variable = {
			which = var_lawful_good
			value = 1
		}
		change_variable = {
			which = var_lawful_neutral
			value = 1
		}
		change_variable = {
			which = var_lawful_evil
			value = 1
		}
	}
	if = {
		limit = { government_rank = 10 }
		change_variable = {
			which = var_lawful_good
			value = 1
		}
		change_variable = {
			which = var_lawful_neutral
			value = 1
		}
		change_variable = {
			which = var_lawful_evil
			value = 1
		}
	}
	#Unstability brings chaos
	if = {
		limit = { NOT = { stability = 1 } }
		change_variable = {
			which = var_chaotic_good
			value = 1
		}
		change_variable = {
			which = var_chaotic_neutral
			value = 1
		}
		change_variable = {
			which = var_chaotic_evil
			value = 1
		}
	}
	if = {
		limit = { NOT = { stability = 0 } }
		change_variable = {
			which = var_chaotic_good
			value = 1
		}
		change_variable = {
			which = var_chaotic_neutral
			value = 1
		}
		change_variable = {
			which = var_chaotic_evil
			value = 1
		}
	}
	if = {
		limit = { NOT = { stability = -1 } }
		change_variable = {
			which = var_chaotic_good
			value = 1
		}
		change_variable = {
			which = var_chaotic_neutral
			value = 1
		}
		change_variable = {
			which = var_chaotic_evil
			value = 1
		}
	}
}
#All
calculate_alignment = {
	set_alignments = yes
	calculate_government_alignment = yes
	calculate_culture_alignment = yes
	calculate_religion_alignment = yes
	calculate_personality_alignment = yes
	calculate_lore_alignment = yes
	calculate_special_alignment = yes
}