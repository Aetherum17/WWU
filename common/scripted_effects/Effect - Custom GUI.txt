#-----------------------------------
# On Actions
#-----------------------------------
on_startup__custom_gui = {
    set_country_flag = gui_flag__national_identity_gui_open
    
    if = {
        limit = {
            ai = no
        }
        update_faction_gui_state = yes
        setup_clique_view = yes
        setup_archaeology_view = yes
        setup_achievements_view = yes
        fill_clique_influence_variables = yes
    }
}

on_country_released__custom_gui = {
    set_country_flag = gui_flag__national_identity_gui_open
    
    if = {
        limit = {
            ai = no
        }
        update_faction_gui_state = yes
        setup_clique_view = yes
        setup_archaeology_view = yes
        setup_achievements_view = yes
        fill_clique_influence_variables = yes
    }
}

on_country_creation__custom_gui = {
    set_country_flag = gui_flag__national_identity_gui_open
    
    if = {
        limit = {
            ai = no
        }
        update_faction_gui_state = yes
        setup_clique_view = yes
        setup_archaeology_view = yes
        setup_achievements_view = yes
        fill_clique_influence_variables = yes
    }
}

on_monthly_pulse__custom_gui = {
    if = {
        limit = {
            ai = no
        }
        
        update_faction_gui_state = yes
        setup_clique_view = yes
        fill_clique_influence_variables = yes
        
        if = {
            limit = {
                NOT = { has_country_flag = gui_flag__display_archaeology_view_page_1 }
                NOT = { has_country_flag = gui_flag__display_archaeology_view_page_2 }
            }
            
            set_country_flag = gui_flag__display_archaeology_view_page_1
        }
        
        if = {
            limit = {
                NOT = { has_country_flag = gui_flag__display_achievements_view_page_1 }
                NOT = { has_country_flag = gui_flag__display_achievements_view_page_2 }
            }
            
            set_country_flag = gui_flag__display_achievements_view_page_1
        }
    }
}

# Faction GUI
update_faction_gui_state = {
    # Add Custom GUI faction if not present
    if = {
        limit = {
            NOT = { has_faction = faction_custom_gui }
        }
        
        add_faction = faction_custom_gui
    }
}

#-----------------------------------
# Windows
#-----------------------------------
# Faction GUI
close_all_faction_windows = {
    close_national_identity_gui = yes
    close_game_configuration_gui = yes
    close_achievements_gui = yes
    
    close_national_mechanics_gui = yes
    close_building_management_gui = yes
    close_stratagem_gui = yes
    close_archaeology_gui = yes
    close_clique_gui = yes
}


# Ruler Information Panel
open_ruler_information_panel = {
    hidden_effect = { set_country_flag = gui_flag__court_view_ruler_information_panel_open }
}

close_ruler_information_panel = {
    hidden_effect = { clr_country_flag = gui_flag__court_view_ruler_information_panel_open }
}

# Magical Study
open_magical_study_gui = {
    hidden_effect = { set_country_flag = gui_flag__magic_study_gui_open }
}

close_magical_study_gui = {
    hidden_effect = { clr_country_flag = gui_flag__magic_study_gui_open }
}

# Spellbook
open_spellbook_gui = {
    hidden_effect = { set_country_flag = gui_flag__magic_usage_gui_open }
}

close_spellbook_gui = {
    hidden_effect = { clr_country_flag = gui_flag__magic_usage_gui_open }
}

# Magic School Selection Panel
open_magic_school_selection_panel = {
    hidden_effect = { set_country_flag = gui_flag__magic_school_selection_open }
}

close_magic_school_selection_panel = {
    hidden_effect = { clr_country_flag = gui_flag__magic_school_selection_open }
}

# Class Study
open_class_study_gui = {
    hidden_effect = { set_country_flag = gui_flag__class_study_gui_open }
}

close_class_study_gui = {
    hidden_effect = { clr_country_flag = gui_flag__class_study_gui_open }
}

# Class Abilities
open_class_abilities_gui = {
    hidden_effect = { set_country_flag = gui_flag__class_abilities_gui_open }
}

close_class_abilities_gui = {
    hidden_effect = { clr_country_flag = gui_flag__class_abilities_gui_open }
}

# Class Selection Panel
open_class_selection_panel = {
    hidden_effect = { set_country_flag = gui_flag__class_selection_gui_open }
}

close_class_selection_panel = {
    hidden_effect = { clr_country_flag = gui_flag__class_selection_gui_open }
}

# Stratagems
open_stratagem_gui = {
    hidden_effect = { set_country_flag = gui_flag__stratagem_gui_open }
}

close_stratagem_gui = {
    hidden_effect = { clr_country_flag = gui_flag__stratagem_gui_open }
}

# Archaeology
open_archaeology_gui = {
    hidden_effect = { set_country_flag = gui_flag__archaeology_gui_open }
}

close_archaeology_gui = {
    hidden_effect = { clr_country_flag = gui_flag__archaeology_gui_open }
}

# Clique
open_clique_gui = {
    hidden_effect = { set_country_flag = gui_flag__clique_gui_open }
}

close_clique_gui = {
    hidden_effect = { clr_country_flag = gui_flag__clique_gui_open }
}

# National Identity
open_national_identity_gui = {
    hidden_effect = { set_country_flag = gui_flag__national_identity_gui_open }
}

close_national_identity_gui = {
    hidden_effect = { clr_country_flag = gui_flag__national_identity_gui_open }
}

# Building Management
open_building_management_gui = {
    hidden_effect = { set_country_flag = gui_flag__building_management_gui_open }
}

close_building_management_gui = {
    hidden_effect = { clr_country_flag = gui_flag__building_management_gui_open }
}

# Achievements
open_achievements_gui = {
    hidden_effect = { set_country_flag = gui_flag__achievements_gui_open }
}

close_achievements_gui = {
    hidden_effect = { clr_country_flag = gui_flag__achievements_gui_open }
}

# National Mechanics
open_national_mechanics_gui = {
    hidden_effect = { set_country_flag = gui_flag__national_mechanics_gui_open }
}

close_national_mechanics_gui = {
    hidden_effect = { clr_country_flag = gui_flag__national_mechanics_gui_open }
}

# Game Configuration
open_game_configuration_gui = {
    hidden_effect = { set_country_flag = gui_flag__game_configuration_gui_open }
}

close_game_configuration_gui = {
    hidden_effect = { clr_country_flag = gui_flag__game_configuration_gui_open }
}

#-----------------------------------
# Clique Views
#-----------------------------------
