#------------------------
# Global
#------------------------
# General global settings
global_setup_init = {
    # Set first player country as executor tag
    save_global_event_target_as = executor
    
    # World State
    #hre_inheritable = yes
    #set_papacy_active = no
    
    # Initializes variables which are used in on_actions
    init_variables = yes
    
    # Religious and Cultural Unity for ALL NATIONS on start and Core creation.
    # This will override history files in default setting. See script file to see how to avoid overriding.
    # init_full_unity = yes

    # Invention Timer
    set_global_flag = game_duration_timer
    
    # Custom Pulses
    291 = {
        add_province_triggered_modifier = generic_daily_pulse
        add_province_triggered_modifier = generic_monthly_pulse
        add_province_triggered_modifier = generic_yearly_pulse
    }
}

# Story flags
global_setup_story_progress = {
    # Rise of the Horde
    if = { 
        limit = {
            is_year = 546
        }
        set_global_flag = rise_of_the_horde
    }
    
    # The First War
    if = {
        limit = {
            is_year = 592
        }
        set_global_flag = the_first_war
        set_global_flag = dark_portal_opened_flag
        set_global_flag = dark_portal_built
        
        set_global_flag = alliance_exists
        set_global_flag = setup_the_alliance
        
        set_global_flag = old_horde_exists
        set_global_flag = setup_the_old_horde
        
        # Disable Old Horde country setup events
        set_global_flag = old_horde_country_setup
        
        3792 = {
            add_great_project = {
                type = dark_portal_draenor
                instant = yes
            }
        }
    }

    # The Second War
    if = { 
        limit = {
            is_year = 598
        }
        set_global_flag = the_second_war
        set_global_flag = setup_outland
        
        # Disable Outland country setup events
        set_global_flag = outland_country_setup
        
        1586 = { 
            add_great_project = {
                type = dark_portal_outland
                instant = yes
            }
        }
    }
    
    # Beyond The Dark Portal
    if = { 
        limit = {
            is_year = 600
        }
        set_global_flag = beyond_the_dark_portal
        clr_global_flag = dark_portal_opened_flag
        set_global_flag = dark_portal_closed_firsttime
        set_global_flag = sonsoflothar
        set_global_flag = khadgar
        
        1586 = {
            destroy_great_project = {
                type = dark_portal_outland
            }
        }
    }
    
    # Rise of the Lich King
    if = { 
        limit = {
            is_year = 605
        }
        set_global_flag = setup_outland
        set_global_flag = fel_horde_spawned 
    }

    # The Third War
    if = { 
        limit = {
            is_year = 617
        }
        set_global_flag = the_third_war 
        set_global_flag = scourge_of_lordaeron_flag
        set_global_flag = scourge_invasion # Used for the secondary Scourge tree
        
        set_global_flag = setup_outland
    }

    # The Frozen Throne
    if = { 
        limit = {
            is_year = 618
        }
        set_global_flag = the_third_war 
        set_global_flag = scourge_of_lordaeron_flag
        set_global_flag = the_frozen_throne
        set_global_flag = archimonde_dead
        set_global_flag = nerzhul_arrived
    }

    # The Rise of the Qiraji
    if = { 
        limit = {
            is_year = 622
        }
        set_global_flag = rise_of_the_qiraji
        set_global_flag = illidan_frozen_throne
        
        set_global_flag = horde_exists
        set_global_flag = setup_the_horde
        
        clr_global_flag = old_horde_exists
        clr_global_flag = setup_the_old_horde
        
        set_global_flag = northgate_rebellion_happened
        
        set_global_flag = setup_bloodsail
        
        # Story events that should not occur after this date
        set_global_flag = kaelthas_uneasy_alliance
        set_global_flag = kaelthas_garithos_betrayal
        set_global_flag = lady_vashj_exodus_to_outland
        set_global_flag = kaelthas_exodus_to_outland
        set_global_flag = illidan_kiljaeden_bargain
        set_global_flag = illidan_naga
        set_global_flag = illidan_eye_of_sargeras_retrieved
        set_global_flag = scourge_response_eye_of_sargeras
        set_global_flag = illidan_used_eye_of_sargeras
        set_global_flag = scourge_frozen_throne_safe
        set_global_flag = scourge_frozen_throne_destroyed
        set_global_flag = eye_of_sargeras_disrupted
        set_global_flag = illidari_spawned
        set_global_flag = ashtongue_deathsworn_spawned
    }

    # The Burning Crusade
    if = { 
        limit = {
            is_year = 625
        }
        set_global_flag = the_burning_crusade
    }

    # Wrath of the Lich King
    if = { 
        limit = {
            is_year = 626
        }
        set_global_flag = wrath_of_the_lich_king
    }

    # Cataclysm
    if = { 
        limit = {
            is_year = 631
        }
        set_global_flag = cataclysm
    }

    # Mists of Pandaria
    if = { 
        limit = {
            is_year = 632
        }
        set_global_flag = mists_of_pandaria
    }
    if = { 
        limit = {
            is_year = 700
        }
        set_global_flag = doomed_world
    }
}

