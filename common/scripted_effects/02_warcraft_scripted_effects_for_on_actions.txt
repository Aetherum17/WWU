##########################

init_full_unity = {
	init_culture_unity = yes
	init_religion_unity = yes
	init_core_unity = yes
}
init_culture_unity = {
	every_owned_province = {
		limit = {
			NOT = { culture = ROOT }
			NOT = { has_province_flag = override_country_culture }  # Put this flag to province histories if you don't want to force province have country culture.
		}
		change_culture = ROOT
	}
}
init_religion_unity = {
	every_owned_province = {
		limit = {
			NOT = { religion = ROOT }
			NOT = { has_province_flag = override_country_religion }  # Put this flag to province histories if you don't want to force province have country religion.
		}
		change_religion = ROOT
	}
}
init_core_unity = {
	every_owned_province = {
		limit = {
			NOT = { is_core = ROOT }
			NOT = { has_province_flag = override_country_core }  # Put this flag to province histories if you don't want to force province have core.
		}
		add_core = ROOT
	}
}

set_government_ranks = {
	if = { 
		limit = {
			NOT = { total_development = $rank_2$ }
		}
		set_government_rank = 1
	}
	if = { 
		limit = { 
			total_development = $rank_2$
			NOT = { total_development = $rank_3$ }
		}
		set_government_rank = 2
	}
	if = { 
		limit = { 
			total_development = $rank_3$
		}
		set_government_rank = 3
	}
}

init_governments = {
	if = {
		limit = {
			not_have_any_reform = yes
		}
		if = {
			limit = {
				government = tribal
				has_dlc = "Dharma"
			}
			if  = { limit = { culture_group = culture_group_orc } add_government_reform = steppe_horde }
			else_if = { limit = { is_pure_evil = yes } add_government_reform = war_against_the_world_reform }
			else_if = { limit = { is_pirate = yes } add_government_reform = tribal_federation }
			else_if = { limit = { is_ancient = yes } add_government_reform = nomad_state_reform }
			else = {
				random_list = {
					35 = {
					add_government_reform = steppe_horde
					}
					15 = {
					add_government_reform = tribal_federation
					}
					5 = {
					add_government_reform = war_against_the_world_reform
					}
				}
			}
		}
		
		if = {
			limit = {
				government = tribal
				NOT = { 
					has_dlc = "Dharma"
				}
			}
			if = { limit = { culture_group = culture_group_orc } set_legacy_government = steppe_horde_legacy }
			else_if = { limit = { is_pure_evil = yes } set_legacy_government = war_against_the_world_legacy }
			else_if = { limit = { is_pirate = yes } set_legacy_government = tribal_federation_legacy }
			else_if = { limit = { is_ancient = yes } add_government_reform = nomad_state_reform }
			else = {
				random_list = {
					35 = {
					set_legacy_government = steppe_horde_legacy
					}
					15 = {
					set_legacy_government = tribal_federation_legacy
					}
					5 = {
					set_legacy_government = war_against_the_world_legacy
					}
				}
			}
		}	
	##########################################	
		if = {
			limit = {
				government = monarchy
				has_dlc = "Dharma"
			}
			if = { limit = { is_pirate = yes } add_government_reform = opportunism }
			else_if = { limit = { is_ancient = yes } add_government_reform = ancient_dynasty_reform }
			else_if = { limit = { tag = A14 } add_government_reform = admiralty_reform }
			else_if = { limit = { OR = { tag = A90 tag = A91 } } add_government_reform = hereditary_monarchy }
			else_if = { limit = { OR = { religion = religion_arcane tag = A18 } } add_government_reform = kingdom_of_magic }
			else_if = { limit = { OR = { culture_group = culture_group_scourge culture_group = culture_group_undead } } add_government_reform = scourge_reform }
			else = {
				random_list = {
					100 = {
						add_government_reform = autocracy_reform
					}
				}
			}
		}
		
		if = {
			limit = {
				government = monarchy
				NOT = { 
					has_dlc = "Dharma"
				}
			}
			if = { limit = { is_pirate = yes } set_legacy_government = opportunism_legacy }
			else_if = { limit = { is_ancient = yes } set_legacy_government = ancient_dynasty_legacy }
			else_if = { limit = { tag = A14 } set_legacy_government = admiralty_legacy }
			else_if = { limit = { OR = { tag = A90 tag = A91 } } set_legacy_government = hereditary_monarchy_legacy }
			else_if = { limit = { OR = { religion = religion_arcane tag = A18 } } set_legacy_government = kingdom_of_magic_legacy }
			else_if = { limit = { OR = { culture_group = culture_group_scourge culture_group = culture_group_undead } } set_legacy_government = scourge_legacy }
			else = {
				random_list = {
					100 = {
						set_legacy_government = despotic_monarchy
					}
				}
			}
		}
	##########################################	
		if = {
			limit = {
				government = theocracy
				has_dlc = "Dharma"
			}
			if = { limit = { is_ancient = yes } add_government_reform = ancient_divinity_reform }
			random_list = {
				100 = {
					add_government_reform = holy_republic_reform
				}
			}
		}
		
		if = {
			limit = {
				government = theocracy
				NOT = { 
					has_dlc = "Dharma"
				}
			}
			if = { limit = { is_ancient = yes } set_legacy_government = ancient_divinity_legacy }
			random_list = {
				100 = {
					set_legacy_government = holy_republic_government
				}
			}
		}
	##########################################	
		if = {
			limit = {
				has_country_modifier = alliance_head
			}
			change_government = monarchy
			add_government_reform = alliance_reform
		}
		if = {
			limit = {
				has_country_modifier = horde_head
			}
			change_government = monarchy
			add_government_reform = horde_reform
		}
	##########################################	
		if = {
			limit = {
				government = republic
				has_dlc = "Dharma"
			}
			if = { limit = { is_pirate = yes } add_government_reform = pirate_republic_reform }
			else_if = { limit = { is_merchant = yes } add_government_reform = merchants_reform }
			else_if = { limit = { is_ancient = yes } add_government_reform = ancient_civilization_reform }
			else = {
				random_list = {
					1 = {
						add_government_reform = peasants_republic
					}
					1 = {
						add_government_reform = noble_elite_reform
					}
					1 = {
						add_government_reform = bureaucratic_despotism_reform
					}
				}
			}
		}
		
		if = {
			limit = {
				government = republic
				NOT = { 
					has_dlc = "Dharma"
				}
			}
			if = { limit = { is_pirate = yes } set_legacy_government = pirate_republic }
			else_if = { limit = { is_merchant = yes } set_legacy_government = merchant_republic }
			else_if = { limit = { is_ancient = yes } set_legacy_government = ancient_civilization_legacy }
			else = {
				random_list = {
					1 = {
						set_legacy_government = peasants_republic_legacy
					}
					1 = {
						set_legacy_government = noble_republic
					}
					1 = {
						set_legacy_government = bureaucratic_despotism
					}
				}
			}
		}
	}
}