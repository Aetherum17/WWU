faction_authority_alliance_mechanic = {
	alert_icon_gfx = GFX_alerticons_government_mechanics
	alert_icon_index = 5
	available = {
		has_dlc = "Cradle of Civilization"
	}

	powers = {
		faction_authority_alliance = {
			max = 500
            default = 0
			base_monthly_growth = 0
		}
	}
	
	interactions = {
        faction_authority_alliance_priority_of_the_fair = {
			gui = six_slots_interaction_gui
			icon = GFX_faction_authority_alliance_ability_1
			cost_type = faction_authority_alliance
			cost = 100
            
			trigger = {
                NOT = { has_global_flag = faction_alliance_priority_of_the_fair_3 }
			}
            
			effect = {
                custom_tooltip = FACTION_AUTHORITY_ALLIANCE_SOURCES_TT
                
                hidden_effect = {
                    set_global_flag = faction_alliance_priority_of_the_fair
                }
                show_faction_modifier_leader = {
                    FACTION_MODIFIER_FLAG = faction_alliance_priority_of_the_fair
                    MODIFIER = priority_of_the_fair
                }
                custom_tooltip = ALLIANCE_MEMBERS_EFFECTED_TT
			}
            
			ai_chance = {
				factor = 1
			}
		}   
	
        faction_authority_alliance_alliance_garrisons = {
			gui = six_slots_interaction_gui
			icon = GFX_faction_authority_alliance_ability_2
			cost_type = faction_authority_alliance
			cost = 100
            
			trigger = {
                NOT = { has_global_flag = faction_alliance_garrisons_3 }
			}
            
			effect = {
                custom_tooltip = FACTION_AUTHORITY_ALLIANCE_SOURCES_TT
                
                hidden_effect = {
                    set_global_flag = faction_alliance_garrisons
                }
                show_faction_modifier_leader = {
                    FACTION_MODIFIER_FLAG = faction_alliance_garrisons
                    MODIFIER = alliance_garrisons
                }
                custom_tooltip = ALLIANCE_MEMBERS_EFFECTED_TT
			}
            
			ai_chance = {
				factor = 1
			}
		}   
        
        faction_authority_alliance_communal_support = {
			gui = six_slots_interaction_gui
			icon = GFX_faction_authority_alliance_ability_3
			cost_type = faction_authority_alliance
			cost = 100
            
			trigger = {
                NOT = { has_global_flag = faction_alliance_communal_support_3 }
			}
            
			effect = {
                custom_tooltip = FACTION_AUTHORITY_ALLIANCE_SOURCES_TT
                
                hidden_effect = {
                    set_global_flag = faction_alliance_communal_support
                }
                show_faction_modifier_leader = {
                    FACTION_MODIFIER_FLAG = faction_alliance_communal_support
                    MODIFIER = communal_support
                }
                custom_tooltip = ALLIANCE_MEMBERS_EFFECTED_TT
			}
            
			ai_chance = {
				factor = 1
			}
		}   
        
        faction_authority_alliance_freedom_of_information = {
			gui = six_slots_interaction_gui
			icon = GFX_faction_authority_alliance_ability_4
			cost_type = faction_authority_alliance
			cost = 100
            
			trigger = {
                NOT = { has_global_flag = faction_alliance_freedom_of_information_3 }
			}
            
			effect = {
                custom_tooltip = FACTION_AUTHORITY_ALLIANCE_SOURCES_TT
                
                hidden_effect = {
                    set_global_flag = faction_alliance_freedom_of_information
                }
                show_faction_modifier_leader = {
                    FACTION_MODIFIER_FLAG = faction_alliance_freedom_of_information
                    MODIFIER = freedom_of_information
                }
                custom_tooltip = ALLIANCE_MEMBERS_EFFECTED_TT
			}
            
			ai_chance = {
				factor = 1
			}
		} 
        
        faction_authority_alliance_extol_virtues = {
			gui = six_slots_interaction_gui
			icon = GFX_faction_authority_alliance_ability_5
			cost_type = faction_authority_alliance
			cost = 100
            
			trigger = {
                NOT = { has_global_flag = faction_alliance_virtues_of_the_alliance_3 }
			}
            
			effect = {
                custom_tooltip = FACTION_AUTHORITY_ALLIANCE_SOURCES_TT
                
                hidden_effect = {
                    set_global_flag = faction_alliance_virtues_of_the_alliance
                }
                show_faction_modifier_leader = {
                    FACTION_MODIFIER_FLAG = faction_alliance_virtues_of_the_alliance
                    MODIFIER = virtues_of_the_alliance
                }
                custom_tooltip = ALLIANCE_MEMBERS_EFFECTED_TT
			}
            
			ai_chance = {
				factor = 1
			}
		} 
        
        faction_authority_alliance_unite_the_faction = {
			gui = six_slots_interaction_gui
			icon = GFX_faction_authority_alliance_ability_6
			cost_type = faction_authority_alliance
			cost = 500
            
			trigger = { 
                NOT = { has_global_flag = annexed_the_alliance }
                has_global_flag = faction_alliance_priority_of_the_fair_1
                has_global_flag = faction_alliance_priority_of_the_fair_2
                has_global_flag = faction_alliance_priority_of_the_fair_3
                has_global_flag = faction_alliance_garrisons_1
                has_global_flag = faction_alliance_garrisons_2
                has_global_flag = faction_alliance_garrisons_3
                has_global_flag = faction_alliance_communal_support_1
                has_global_flag = faction_alliance_communal_support_2
                has_global_flag = faction_alliance_communal_support_3
                has_global_flag = faction_alliance_freedom_of_information_1
                has_global_flag = faction_alliance_freedom_of_information_2
                has_global_flag = faction_alliance_freedom_of_information_3
                has_global_flag = faction_alliance_virtues_of_the_alliance_1
                has_global_flag = faction_alliance_virtues_of_the_alliance_2
                has_global_flag = faction_alliance_virtues_of_the_alliance_3
			}
            
			effect = {
                custom_tooltip = FACTION_AUTHORITY_ALLIANCE_SOURCES_TT
                
                custom_tooltip = ALLIANCE_MEMBERS_ANNEXED_TT
                
                hidden_effect = {
                    set_global_flag = annexed_the_alliance
                    
                    every_country = {
                        limit = {
                            has_country_modifier = member_of_alliance
                            has_opinion = {
                                who = ROOT
                                value = 0
                            }
                            ai = yes
                        }
                        
                        ROOT = {
                            inherit = PREV
                        }
                    }
                    
                    country_event = { id = wwu_faction_system.2 }
                }
			}
            
			ai_chance = {
				factor = 1
			}
		}
	}
}