#----------------------------------------
# Magic GUI
#----------------------------------------
#--------------
# Court View
#--------------
# For rulers that do not have a class
custom_button = {
    name = ruler_class_study_button
    tooltip = RULER_CLASS_HOVER_TT
    
    potential = {
        NOT = { has_ruler_modifier = wisdom_of_the_warrior }
        NOT = { has_ruler_modifier = wisdom_of_the_paladin }
        NOT = { has_ruler_modifier = wisdom_of_the_priest }
        NOT = { has_ruler_modifier = wisdom_of_the_rogue }
        NOT = { has_ruler_modifier = wisdom_of_the_mage }
        NOT = { has_ruler_modifier = wisdom_of_the_warlock }
        NOT = { has_ruler_modifier = wisdom_of_the_druid }
        NOT = { has_ruler_modifier = wisdom_of_the_hunter }
        NOT = { has_ruler_modifier = wisdom_of_the_shaman }
        NOT = { has_ruler_modifier = wisdom_of_the_death_knight }
        NOT = { has_ruler_modifier = wisdom_of_the_monk }
        NOT = { has_ruler_modifier = wisdom_of_the_demon_hunter }
    }
    
    trigger = { 
        custom_trigger_tooltip = {
            tooltip = CLASS_GUI_NOT_OPEN_TT
            NOT = { has_class_study_window_open = yes }
        }
    }
    
    effect = { 
        hidden_effect = {
            set_country_flag = gui_flag__class_study_gui_open
        }
    }
}
# For rulers that have a class
custom_button = {
    name = ruler_class_abilities_button
    tooltip = RULER_CLASS_ABILITIES_HOVER_TT
    
    potential = {
        OR = {
            has_ruler_modifier = wisdom_of_the_warrior
            has_ruler_modifier = wisdom_of_the_paladin
            has_ruler_modifier = wisdom_of_the_priest
            has_ruler_modifier = wisdom_of_the_rogue
            has_ruler_modifier = wisdom_of_the_mage
            has_ruler_modifier = wisdom_of_the_warlock
            has_ruler_modifier = wisdom_of_the_druid
            has_ruler_modifier = wisdom_of_the_hunter
            has_ruler_modifier = wisdom_of_the_shaman
            has_ruler_modifier = wisdom_of_the_death_knight
            has_ruler_modifier = wisdom_of_the_monk
            has_ruler_modifier = wisdom_of_the_demon_hunter
        }
    }
    
    trigger = { 
        custom_trigger_tooltip = {
            tooltip = CLASS_ABILITIES_NOT_OPEN_TT
            NOT = { has_class_abilities_window_open = yes }
        }
    }
    
    effect = { 
        hidden_effect = {
            set_country_flag = gui_flag__class_abilities_gui_open
        }
    }
}

#--------------
# Class GUI 
#--------------
# Background
custom_icon = {
   name = class_gui_view_background
   potential = { 
        has_country_flag = gui_flag__class_study_gui_open
   }
}

# Background
custom_icon = {
   name = class_abilities_view_background
   potential = { 
        has_country_flag = gui_flag__class_abilities_gui_open
   }
}

# Back Button
custom_button = {
    name = class_gui_back_button
    
    potential = {
        OR = {
            has_country_flag = gui_flag__class_study_gui_open
            has_country_flag = gui_flag__class_abilities_gui_open
        }
    }
    
    trigger = { 
        
    }
    
    effect = { 
        hidden_effect = {
            clr_country_flag = gui_flag__class_study_gui_open
            clr_country_flag = gui_flag__class_abilities_gui_open
        }
    }
}

custom_text_box = {
   name = class_gui_study_title
   potential = { 
        has_country_flag = gui_flag__class_study_gui_open
   }
}

custom_text_box = {
   name = class_gui_study_selection
   potential = { 
        has_country_flag = gui_flag__class_study_gui_open
   }
}

custom_text_box = {
   name = class_gui_abilities_title
   potential = { 
        has_country_flag = gui_flag__class_abilities_gui_open
   }
}

# Start Study
custom_button = {
    name = class_gui_start_class_study
   tooltip = CLASS_STUDY_START_HOVER_TT
    
    potential = {
        has_class_study_window_open = yes
        NOT = { has_ruler_modifier = class_training }
    }
    
    trigger = { 
        has_class_study_cost = yes
    }
    
    effect = { 
        custom_tooltip = TOGGLE_CLASS_SELECTION_TT
        hidden_effect = {
            if = {
                limit = {
                    has_country_flag = gui_flag__class_selection_gui_open
                }
                
                clr_country_flag = gui_flag__class_selection_gui_open
            }
            else = {
                set_country_flag = gui_flag__class_selection_gui_open
            }
        }
    }
}

# Cancel Study
custom_button = {
    name = class_gui_cancel_class_study
    tooltip = CLASS_STUDY_CANCEL_HOVER_TT
    
    potential = {
        has_class_study_window_open = yes
        has_ruler_modifier = class_training
    }
    
    trigger = { 
        
    }
    
    effect = { 
        cancel_class_study = yes
    }
}

# Boost Study
custom_button = {
    name = class_gui_boost_class_study
   tooltip = CLASS_STUDY_BOOST_HOVER_TT
    
    potential = {
        has_class_study_window_open = yes
        has_ruler_modifier = class_training
    }
    
    trigger = {     
        has_not_completed_class_study = yes
        has_class_study_gold_cost = yes
    }
    
    effect = { 
        boost_class_study_action = yes
    }
}

custom_text_box = {
   name = class_gui_class_study_progress_text
   tooltip = CLASS_STUDY_PROGRESS_HOVER_TT
   
   potential = { 
        has_class_study_window_open = yes
   }
}

#--------------
# Class Selection
#--------------
# Background
custom_icon = {
   name = class_selection_background
   potential = { 
        has_country_flag = gui_flag__class_selection_gui_open
   }
}

# Title
custom_text_box = {
   name = class_gui_class_section_title
   
   potential = { 
        has_country_flag = gui_flag__class_selection_gui_open
   }
}

# Selection: Warrior
custom_button = {
    name = class_gui_select_button_1
    tooltip = RULER_CLASS_SPECIALIZATION_HOVER_WARRIOR_TT
    
    potential = {
        has_country_flag = gui_flag__class_selection_gui_open
    }
    
    trigger = { 
        has_class_study_cost = yes
        can_be_warrior = yes
    }
    
    effect = { 
        take_class_study_cost = yes
        start_class_study = yes
        
        hidden_effect = {
            set_ruler_flag = training_as_warrior
            reset_class_study = yes
            clr_country_flag = gui_flag__class_selection_gui_open
        }
    }
}
# Selection: Paladin
custom_button = {
    name = class_gui_select_button_2
    tooltip = RULER_CLASS_SPECIALIZATION_HOVER_PALADIN_TT
    
    potential = {
        has_country_flag = gui_flag__class_selection_gui_open
    }
    
    trigger = { 
        has_class_study_cost = yes
        can_be_paladin = yes
    }
    
    effect = { 
        take_class_study_cost = yes
        start_class_study = yes
        
        hidden_effect = {
            set_ruler_flag = training_as_paladin
            reset_class_study = yes
            clr_country_flag = gui_flag__class_selection_gui_open
        }
    }
}
# Selection: Priest
custom_button = {
    name = class_gui_select_button_3
    tooltip = RULER_CLASS_SPECIALIZATION_HOVER_PRIEST_TT
    
    potential = {
        has_country_flag = gui_flag__class_selection_gui_open
    }
    
    trigger = { 
        has_class_study_cost = yes
        can_be_priest = yes
    }
    
    effect = { 
        take_class_study_cost = yes
        start_class_study = yes
        
        hidden_effect = {
            set_ruler_flag = training_as_priest
            reset_class_study = yes
            clr_country_flag = gui_flag__class_selection_gui_open
        }
    }
}
# Selection: Rogue
custom_button = {
    name = class_gui_select_button_4
    tooltip = RULER_CLASS_SPECIALIZATION_HOVER_ROGUE_TT
    
    potential = {
        has_country_flag = gui_flag__class_selection_gui_open
    }
    
    trigger = { 
        has_class_study_cost = yes
        can_be_rogue = yes
    }
    
    effect = { 
        take_class_study_cost = yes
        start_class_study = yes
        
        hidden_effect = {
            set_ruler_flag = training_as_rogue
            reset_class_study = yes
            clr_country_flag = gui_flag__class_selection_gui_open
        }
    }
}
# Selection: Mage
custom_button = {
    name = class_gui_select_button_5
    tooltip = RULER_CLASS_SPECIALIZATION_HOVER_MAGE_TT
    
    potential = {
        has_country_flag = gui_flag__class_selection_gui_open
    }
    
    trigger = { 
        has_class_study_cost = yes
        can_be_mage = yes
    }
    
    effect = { 
        take_class_study_cost = yes
        start_class_study = yes
        
        hidden_effect = {
            set_ruler_flag = training_as_mage
            reset_class_study = yes
            clr_country_flag = gui_flag__class_selection_gui_open
        }
    }
}
# Selection: Warlock
custom_button = {
    name = class_gui_select_button_6
    tooltip = RULER_CLASS_SPECIALIZATION_HOVER_WARLOCK_TT
    
    potential = {
        has_country_flag = gui_flag__class_selection_gui_open
    }
    
    trigger = { 
        has_class_study_cost = yes
        can_be_warlock = yes
    }
    
    effect = { 
        take_class_study_cost = yes
        start_class_study = yes
        
        hidden_effect = {
            set_ruler_flag = training_as_warlock
            reset_class_study = yes
            clr_country_flag = gui_flag__class_selection_gui_open
        }
    }
}
# Selection: Druid
custom_button = {
    name = class_gui_select_button_7
    tooltip = RULER_CLASS_SPECIALIZATION_HOVER_DRUID_TT
    
    potential = {
        has_country_flag = gui_flag__class_selection_gui_open
    }
    
    trigger = { 
        has_class_study_cost = yes
        can_be_druid = yes
    }
    
    effect = { 
        take_class_study_cost = yes
        start_class_study = yes
        
        hidden_effect = {
            set_ruler_flag = training_as_druid
            reset_class_study = yes
            clr_country_flag = gui_flag__class_selection_gui_open
        }
    }
}
# Selection: Hunter
custom_button = {
    name = class_gui_select_button_8
    tooltip = RULER_CLASS_SPECIALIZATION_HOVER_HUNTER_TT
    
    potential = {
        has_country_flag = gui_flag__class_selection_gui_open
    }
    
    trigger = { 
        has_class_study_cost = yes
        can_be_hunter = yes
    }
    
    effect = { 
        take_class_study_cost = yes
        start_class_study = yes
        
        hidden_effect = {
            set_ruler_flag = training_as_hunter
            reset_class_study = yes
            clr_country_flag = gui_flag__class_selection_gui_open
        }
    }
}
# Selection: Shaman
custom_button = {
    name = class_gui_select_button_9
    tooltip = RULER_CLASS_SPECIALIZATION_HOVER_SHAMAN_TT
    
    potential = {
        has_country_flag = gui_flag__class_selection_gui_open
    }
    
    trigger = { 
        has_class_study_cost = yes
        can_be_shaman = yes
    }
    
    effect = { 
        take_class_study_cost = yes
        start_class_study = yes
        
        hidden_effect = {
            set_ruler_flag = training_as_shaman
            reset_class_study = yes
            clr_country_flag = gui_flag__class_selection_gui_open
        }
    }
}
# Selection: Death Knight
custom_button = {
    name = class_gui_select_button_10
    tooltip = RULER_CLASS_SPECIALIZATION_HOVER_DEATH_KNIGHT_TT
    
    potential = {
        has_country_flag = gui_flag__class_selection_gui_open
    }
    
    trigger = { 
        has_class_study_cost = yes
        can_be_death_knight = yes
    }
    
    effect = { 
        take_class_study_cost = yes
        start_class_study = yes
        
        hidden_effect = {
            set_ruler_flag = training_as_death_knight
            reset_class_study = yes
            clr_country_flag = gui_flag__class_selection_gui_open
        }
    }
}
# Selection: Monk
custom_button = {
    name = class_gui_select_button_11
    tooltip = RULER_CLASS_SPECIALIZATION_HOVER_MONK_TT
    
    potential = {
        has_country_flag = gui_flag__class_selection_gui_open
    }
    
    trigger = { 
        has_class_study_cost = yes
        can_be_monk = yes
    }
    
    effect = { 
        take_class_study_cost = yes
        start_class_study = yes
        
        hidden_effect = {
            set_ruler_flag = training_as_monk
            reset_class_study = yes
            clr_country_flag = gui_flag__class_selection_gui_open
        }
    }
}
# Selection: Demon Hunter
custom_button = {
    name = class_gui_select_button_12
    tooltip = RULER_CLASS_SPECIALIZATION_HOVER_DEMON_HUNTER_TT
    
    potential = {
        has_country_flag = gui_flag__class_selection_gui_open
    }
    
    trigger = { 
        has_class_study_cost = yes
        can_be_demon_hunter = yes
    }
    
    effect = { 
        take_class_study_cost = yes
        start_class_study = yes
        
        hidden_effect = {
            set_ruler_flag = training_as_demon_hunter
            reset_class_study = yes
            clr_country_flag = gui_flag__class_selection_gui_open
        }
    }
}

#--------------
# Class Energy
#--------------
# Mana Full: 1
custom_icon = {
    name = class_gui_energy_symbol_1
    tooltip = RULER_ENERGY_FULL_1
    
    potential = { 
        has_class_abilities_window_open = yes
        check_variable = {
            which = ruler_energy
            value = 1
        }
   }
}
# Mana Full: 2
custom_icon = {
    name = class_gui_energy_symbol_2
    tooltip = RULER_ENERGY_FULL_2
    
    potential = { 
        has_class_abilities_window_open = yes
        check_variable = {
            which = ruler_energy
            value = 2
        }
   }
}
# Mana Full: 3
custom_icon = {
    name = class_gui_energy_symbol_3
    tooltip = RULER_ENERGY_FULL_3
    
    potential = { 
        has_class_abilities_window_open = yes
        check_variable = {
            which = ruler_energy
            value = 3
        }
   }
}
# Mana Full: 4
custom_icon = {
    name = class_gui_energy_symbol_4
    tooltip = RULER_ENERGY_FULL_4
    
    potential = { 
        has_class_abilities_window_open = yes
        check_variable = {
            which = ruler_energy
            value = 4
        }
   }
}
# Mana Full: 5
custom_icon = {
    name = class_gui_energy_symbol_5
    tooltip = RULER_ENERGY_FULL_5
    
    potential = { 
        has_class_abilities_window_open = yes
        check_variable = {
            which = ruler_energy
            value = 5
        }
   }
}

# Mana Empty: 1
custom_icon = {
    name = class_gui_energy_symbol_empty_1
    tooltip = RULER_ENERGY_EMPTY_1
    
    potential = { 
        has_class_abilities_window_open = yes
        NOT = {
            check_variable = {
                which = ruler_energy
                value = 1
            }
        }
   }
}
# Mana Empty: 2
custom_icon = {
    name = class_gui_energy_symbol_empty_2
    tooltip = RULER_ENERGY_EMPTY_2
    
    potential = { 
        has_class_abilities_window_open = yes
        NOT = {
            check_variable = {
                which = ruler_energy
                value = 2
            }
        }
   }
}
# Mana Empty: 3
custom_icon = {
    name = class_gui_energy_symbol_empty_3
    tooltip = RULER_ENERGY_EMPTY_3
    
    potential = { 
        has_class_abilities_window_open = yes
        NOT = {
            check_variable = {
                which = ruler_energy
                value = 3
            }
        }
   }
}
# Mana Empty: 4
custom_icon = {
    name = class_gui_energy_symbol_empty_4
    tooltip = RULER_ENERGY_EMPTY_4
    
    potential = { 
        has_class_abilities_window_open = yes
        NOT = {
            check_variable = {
                which = ruler_energy
                value = 4
            }
        }
   }
}
# Mana Empty: 5
custom_icon = {
    name = class_gui_energy_symbol_empty_5
    tooltip = RULER_ENERGY_EMPTY_5
    
    potential = { 
        has_class_abilities_window_open = yes
        NOT = {
            check_variable = {
                which = ruler_energy
                value = 5
            }
        }
   }
}

#--------------
# Class Abilities
#--------------