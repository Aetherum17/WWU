#----------------------------------------
# Class GUI
#----------------------------------------
# Background
custom_icon = {
   name = class_abilities_view_background
   potential = { 
        has_country_flag = gui_flag__class_abilities_gui_open
   }
}

custom_text_box = {
   name = class_gui_banner_title
   potential = { 
        has_country_flag = gui_flag__class_abilities_gui_open
   }
}

#--------------
# Class Icon
#--------------
custom_icon = {
    name = class_icon_warrior
    tooltip = RULER_CLASS_ICON_HOVER_WARRIOR_TT
    
    potential = { 
        has_class_abilities_window_open = yes
        ruler_is_warrior = yes
   }
}
custom_icon = {
    name = class_icon_paladin
    tooltip = RULER_CLASS_ICON_HOVER_PALADIN_TT
    
    potential = { 
        has_class_abilities_window_open = yes
        ruler_is_paladin = yes
   }
}
custom_icon = {
    name = class_icon_priest
    tooltip = RULER_CLASS_ICON_HOVER_PRIEST_TT
    
    potential = { 
        has_class_abilities_window_open = yes
        ruler_is_priest = yes
   }
}
custom_icon = {
    name = class_icon_rogue
    tooltip = RULER_CLASS_ICON_HOVER_ROGUE_TT
    
    potential = { 
        has_class_abilities_window_open = yes
        ruler_is_rogue = yes
   }
}
custom_icon = {
    name = class_icon_mage
    tooltip = RULER_CLASS_ICON_HOVER_MAGE_TT
    
    potential = { 
        has_class_abilities_window_open = yes
        ruler_is_mage = yes
   }
}
custom_icon = {
    name = class_icon_warlock
    tooltip = RULER_CLASS_ICON_HOVER_WARLOCK_TT
    
    potential = { 
        has_class_abilities_window_open = yes
        ruler_is_warlock = yes
   }
}
custom_icon = {
    name = class_icon_druid
    tooltip = RULER_CLASS_ICON_HOVER_DRUID_TT
    
    potential = { 
        has_class_abilities_window_open = yes
        ruler_is_druid = yes
   }
}
custom_icon = {
    name = class_icon_hunter
    tooltip = RULER_CLASS_ICON_HOVER_HUNTER_TT
    
    potential = { 
        has_class_abilities_window_open = yes
        ruler_is_hunter = yes
   }
}
custom_icon = {
    name = class_icon_shaman
    tooltip = RULER_CLASS_ICON_HOVER_SHAMAN_TT
    
    potential = { 
        has_class_abilities_window_open = yes
        ruler_is_shaman = yes
   }
}
custom_icon = {
    name = class_icon_death_knight
    tooltip = RULER_CLASS_ICON_HOVER_DEATH_KNIGHT_TT
    
    potential = { 
        has_class_abilities_window_open = yes
        ruler_is_death_knight = yes
   }
}
custom_icon = {
    name = class_icon_monk
    tooltip = RULER_CLASS_ICON_HOVER_MONK_TT
    
    potential = { 
        has_class_abilities_window_open = yes
        ruler_is_monk = yes
   }
}
custom_icon = {
    name = class_icon_demon_hunter
    tooltip = RULER_CLASS_ICON_HOVER_DEMON_HUNTER_TT
    
    potential = { 
        has_class_abilities_window_open = yes
        ruler_is_demon_hunter = yes
   }
}

#--------------
# Class Energy
#--------------
# Mana Full: 1
custom_icon = {
    name = class_gui_energy_symbol_1
    tooltip = RULER_ENERGY_FULL_1
    
    potential = { 
        has_class_abilities_window_open = yes
        check_variable = {
            which = ruler_energy
            value = 1
        }
   }
}
# Mana Full: 2
custom_icon = {
    name = class_gui_energy_symbol_2
    tooltip = RULER_ENERGY_FULL_2
    
    potential = { 
        has_class_abilities_window_open = yes
        check_variable = {
            which = ruler_energy
            value = 2
        }
   }
}
# Mana Full: 3
custom_icon = {
    name = class_gui_energy_symbol_3
    tooltip = RULER_ENERGY_FULL_3
    
    potential = { 
        has_class_abilities_window_open = yes
        check_variable = {
            which = ruler_energy
            value = 3
        }
   }
}
# Mana Full: 4
custom_icon = {
    name = class_gui_energy_symbol_4
    tooltip = RULER_ENERGY_FULL_4
    
    potential = { 
        has_class_abilities_window_open = yes
        check_variable = {
            which = ruler_energy
            value = 4
        }
   }
}
# Mana Full: 5
custom_icon = {
    name = class_gui_energy_symbol_5
    tooltip = RULER_ENERGY_FULL_5
    
    potential = { 
        has_class_abilities_window_open = yes
        check_variable = {
            which = ruler_energy
            value = 5
        }
   }
}

# Mana Empty: 1
custom_icon = {
    name = class_gui_energy_symbol_empty_1
    tooltip = RULER_ENERGY_EMPTY_1
    
    potential = { 
        has_class_abilities_window_open = yes
        NOT = {
            check_variable = {
                which = ruler_energy
                value = 1
            }
        }
   }
}
# Mana Empty: 2
custom_icon = {
    name = class_gui_energy_symbol_empty_2
    tooltip = RULER_ENERGY_EMPTY_2
    
    potential = { 
        has_class_abilities_window_open = yes
        NOT = {
            check_variable = {
                which = ruler_energy
                value = 2
            }
        }
   }
}
# Mana Empty: 3
custom_icon = {
    name = class_gui_energy_symbol_empty_3
    tooltip = RULER_ENERGY_EMPTY_3
    
    potential = { 
        has_class_abilities_window_open = yes
        NOT = {
            check_variable = {
                which = ruler_energy
                value = 3
            }
        }
   }
}
# Mana Empty: 4
custom_icon = {
    name = class_gui_energy_symbol_empty_4
    tooltip = RULER_ENERGY_EMPTY_4
    
    potential = { 
        has_class_abilities_window_open = yes
        NOT = {
            check_variable = {
                which = ruler_energy
                value = 4
            }
        }
   }
}
# Mana Empty: 5
custom_icon = {
    name = class_gui_energy_symbol_empty_5
    tooltip = RULER_ENERGY_EMPTY_5
    
    potential = { 
        has_class_abilities_window_open = yes
        NOT = {
            check_variable = {
                which = ruler_energy
                value = 5
            }
        }
   }
}

#--------------
# Class Abilities
#--------------
# Warrior - Unrelenting Assault
custom_button = {
    name = class_ability_warrior_1
    tooltip = RULER_CLASS_ABILITY_WARRIOR_1_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_warrior = yes
    }
    
    trigger = { 
        has_energy_3 = yes
        NOT = { has_ruler_modifier = class_ability_warrior_unrelenting_assault }
    }
    
    effect = { 
        lose_energy_3 = yes
        add_ruler_modifier = {
            name = class_ability_warrior_unrelenting_assault
            duration = 3650
        }
    }
}
# Warrior - Second Wind
custom_button = {
    name = class_ability_warrior_2
    tooltip = RULER_CLASS_ABILITY_WARRIOR_2_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_warrior = yes
    }
    
    trigger = { 
        has_energy_5 = yes
        NOT = { has_ruler_modifier = class_ability_warrior_second_wind }
    }
    
    effect = { 
        lose_energy_5 = yes
        add_ruler_modifier = {
            name = class_ability_warrior_second_wind
            duration = 3650
        }
    }
}
# Warrior - Battle Shout
custom_button = {
    name = class_ability_warrior_3
    tooltip = RULER_CLASS_ABILITY_WARRIOR_3_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_warrior = yes
    }
    
    trigger = { 
        has_energy_4 = yes
        NOT = { has_ruler_modifier = class_ability_warrior_battle_shout }
    }
    
    effect = { 
        lose_energy_4 = yes
        add_ruler_modifier = {
            name = class_ability_warrior_battle_shout
            duration = 3650
        }
    }
}

# Paladin - Blade of Justice
custom_button = {
    name = class_ability_paladin_1
    tooltip = RULER_CLASS_ABILITY_PALADIN_1_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_paladin = yes
    }
    
    trigger = { 
        has_energy_5 = yes
        NOT = { has_ruler_modifier = class_ability_paladin_blade_of_justice }
    }
    
    effect = { 
        lose_energy_5 = yes
        add_ruler_modifier = {
            name = class_ability_paladin_blade_of_justice
            duration = 3650
        }
    }
}
# Paladin - Long Arm of the Law
custom_button = {
    name = class_ability_paladin_2
    tooltip = RULER_CLASS_ABILITY_PALADIN_2_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_paladin = yes
    }
    
    trigger = { 
        has_energy_3 = yes
        NOT = { has_ruler_modifier = class_ability_paladin_long_arm_of_the_law }
    }
    
    effect = { 
        lose_energy_3 = yes
        add_ruler_modifier = {
            name = class_ability_paladin_long_arm_of_the_law
            duration = 3650
        }
    }
}
# Paladin - Sanctified Wrath
custom_button = {
    name = class_ability_paladin_3
    tooltip = RULER_CLASS_ABILITY_PALADIN_3_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_paladin = yes
    }
    
    trigger = { 
        has_energy_5 = yes
        NOT = { has_ruler_modifier = class_ability_paladin_sanctified_wrath }
    }
    
    effect = { 
        lose_energy_5 = yes
        add_ruler_modifier = {
            name = class_ability_paladin_sanctified_wrath
            duration = 3650
        }
    }
}

# Priest - Binding Prayers
custom_button = {
    name = class_ability_priest_1
    tooltip = RULER_CLASS_ABILITY_PRIEST_1_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_priest = yes
    }
    
    trigger = { 
        has_energy_4 = yes
        NOT = { has_ruler_modifier = class_ability_priest_binding_prayers }
    }
    
    effect = { 
        lose_energy_4 = yes
        add_ruler_modifier = {
            name = class_ability_priest_binding_prayers
            duration = 3650
        }
        
        custom_tooltip = BINDING_PRAYERS_TT
        hidden_effect = {
            every_owned_province = {
                limit = {
                    religion = ROOT
                }
                add_province_modifier = {
                    name = class_ability_priest_binding_prayers_prov
                    duration = 3650
                }
            }
        }
    }
}
# Priest - Evangelism
custom_button = {
    name = class_ability_priest_2
    tooltip = RULER_CLASS_ABILITY_PRIEST_2_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_priest = yes
    }
    
    trigger = { 
        has_energy_3 = yes
        NOT = { has_ruler_modifier = class_ability_priest_evangelism }
    }
    
    effect = { 
        lose_energy_3 = yes
        add_ruler_modifier = {
            name = class_ability_priest_evangelism
            duration = 3650
        }
    }
}
# Priest - Heavenly Voice
custom_button = {
    name = class_ability_priest_3
    tooltip = RULER_CLASS_ABILITY_PRIEST_3_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_priest = yes
    }
    
    trigger = { 
        has_energy_5 = yes
        NOT = { has_ruler_modifier = class_ability_priest_heavenly_voice }
    }
    
    effect = { 
        lose_energy_5 = yes
        add_ruler_modifier = {
            name = class_ability_priest_heavenly_voice
            duration = 3650
        }
    }
}

# Rogue - Combat Expertise
custom_button = {
    name = class_ability_rogue_1
    tooltip = RULER_CLASS_ABILITY_ROGUE_1_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_rogue = yes
    }
    
    trigger = { 
        has_energy_4 = yes
        NOT = { has_ruler_modifier = class_ability_rogue_combat_expertise }
    }
    
    effect = { 
        lose_energy_4 = yes
        add_ruler_modifier = {
            name = class_ability_rogue_combat_expertise
            duration = 3650
        }
    }
}
# Rogue - Preparation
custom_button = {
    name = class_ability_rogue_2
    tooltip = RULER_CLASS_ABILITY_ROGUE_2_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_rogue = yes
    }
    
    trigger = { 
        has_energy_3 = yes
        NOT = { has_ruler_modifier = class_ability_rogue_preparation }
    }
    
    effect = { 
        lose_energy_3 = yes
        add_ruler_modifier = {
            name = class_ability_rogue_preparation
            duration = 3650
        }
        
        custom_tooltip = PREPARATION_ABILITY_TT
        hidden_effect = {
            every_owned_province = {
                limit = {
                    culture = ROOT
                }
                add_province_modifier = {
                    name = class_ability_rogue_preparation_prov
                    duration = 3650
                }
            }
        }
    }
}
# Rogue - Master of Subtlety
custom_button = {
    name = class_ability_rogue_3
    tooltip = RULER_CLASS_ABILITY_ROGUE_3_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_rogue = yes
    }
    
    trigger = { 
        has_energy_3 = yes
        NOT = { has_ruler_modifier = class_ability_rogue_master_of_subtlety }
    }
    
    effect = { 
        lose_energy_3 = yes
        add_ruler_modifier = {
            name = class_ability_rogue_master_of_subtlety
            duration = 3650
        }
    }
}

# Mage - Time Warp
custom_button = {
    name = class_ability_mage_1
    tooltip = RULER_CLASS_ABILITY_MAGE_1_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_mage = yes
    }
    
    trigger = { 
        has_energy_5 = yes
        NOT = { has_ruler_modifier = class_ability_mage_time_warp }
    }
    
    effect = { 
        lose_energy_5 = yes
        add_ruler_modifier = {
            name = class_ability_mage_time_warp
            duration = 3650
        }
    }
}
# Mage - Focusing Crystal
custom_button = {
    name = class_ability_mage_2
    tooltip = RULER_CLASS_ABILITY_MAGE_2_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_mage = yes
    }
    
    trigger = { 
        has_energy_5 = yes
        NOT = { has_ruler_modifier = class_ability_mage_focusing_crystal }
    }
    
    effect = { 
        lose_energy_5 = yes
        add_ruler_modifier = {
            name = class_ability_mage_focusing_crystal
            duration = 3650
        }
    }
}
# Mage - Rune of Power
custom_button = {
    name = class_ability_mage_3
    tooltip = RULER_CLASS_ABILITY_MAGE_3_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_mage = yes
    }
    
    trigger = { 
        has_energy_5 = yes
        NOT = { has_ruler_modifier = class_ability_mage_rune_of_power }
    }
    
    effect = { 
        lose_energy_5 = yes
        add_ruler_modifier = {
            name = class_ability_mage_rune_of_power
            duration = 3650
        }
    }
}

# Warlock - Fire and Brimstone
custom_button = {
    name = class_ability_warlock_1
    tooltip = RULER_CLASS_ABILITY_WARLOCK_1_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_warlock = yes
    }
    
    trigger = { 
        has_energy_3 = yes
        NOT = { has_ruler_modifier = class_ability_warlock_fire_and_brimstone }
    }
    
    effect = { 
        lose_energy_3 = yes
        add_ruler_modifier = {
            name = class_ability_warlock_fire_and_brimstone
            duration = 3650
        }
    }
}
# Warlock - Jinx
custom_button = {
    name = class_ability_warlock_2
    tooltip = RULER_CLASS_ABILITY_WARLOCK_2_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_warlock = yes
    }
    
    trigger = { 
        has_energy_3 = yes
        NOT = { has_ruler_modifier = class_ability_warlock_jinx }
    }
    
    effect = { 
        lose_energy_3 = yes
        add_ruler_modifier = {
            name = class_ability_warlock_jinx
            duration = 3650
        }
        
        if = {
            limit = {
                is_at_war = yes
            }
            custom_tooltip = JINX_EFFECT_TT
        
            hidden_effect = {
                every_war_enemy_country = {
                    every_owned_province = {
                        add_province_modifier = {
                            name = class_ability_warlock_jinx_prov
                            duration = 3650
                        }
                    }
                }
            }
        }
        else = {
            custom_tooltip = JINX_EFFECT_PEACE_TT
        }
    }
}
# Warlock - Grimoire of Command
custom_button = {
    name = class_ability_warlock_3
    tooltip = RULER_CLASS_ABILITY_WARLOCK_3_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_warlock = yes
    }
    
    trigger = { 
        has_energy_5 = yes
        NOT = { has_ruler_modifier = class_ability_warlock_grimoire_of_command }
    }
    
    effect = { 
        lose_energy_5 = yes
        add_ruler_modifier = {
            name = class_ability_warlock_grimoire_of_command
            duration = 3650
        }
    }
}

# Druid - Flourish
custom_button = {
    name = class_ability_druid_1
    tooltip = RULER_CLASS_ABILITY_DRUID_1_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_druid = yes
    }
    
    trigger = { 
        has_energy_4 = yes
        NOT = { has_ruler_modifier = class_ability_druid_flourish }
    }
    
    effect = { 
        lose_energy_4 = yes
        add_ruler_modifier = {
            name = class_ability_druid_flourish
            duration = 3650
        }
    }
}
# Druid - Natural Perfection
custom_button = {
    name = class_ability_druid_2
    tooltip = RULER_CLASS_ABILITY_DRUID_2_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_druid = yes
    }
    
    trigger = { 
        has_energy_4 = yes
        NOT = { has_ruler_modifier = class_ability_druid_natural_perfection }
    }
    
    effect = { 
        lose_energy_4 = yes
        add_ruler_modifier = {
            name = class_ability_druid_natural_perfection
            duration = 3650
        }
    }
}
# Druid - Eclipse
custom_button = {
    name = class_ability_druid_3
    tooltip = RULER_CLASS_ABILITY_DRUID_3_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_druid = yes
    }
    
    trigger = { 
        has_energy_4 = yes
        NOT = { has_ruler_modifier = class_ability_druid_eclipse }
    }
    
    effect = { 
        lose_energy_4 = yes
        add_ruler_modifier = {
            name = class_ability_druid_eclipse
            duration = 3650
        }
    }
}

# Hunter - Efficiency
custom_button = {
    name = class_ability_hunter_1
    tooltip = RULER_CLASS_ABILITY_HUNTER_1_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_hunter = yes
    }
    
    trigger = { 
        has_energy_3 = yes
        NOT = { has_ruler_modifier = class_ability_hunter_efficiency }
    }
    
    effect = { 
        lose_energy_3 = yes
        add_ruler_modifier = {
            name = class_ability_hunter_efficiency
            duration = 3650
        }
    }
}
# Hunter - Master Tactitian
custom_button = {
    name = class_ability_hunter_2
    tooltip = RULER_CLASS_ABILITY_HUNTER_2_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_hunter = yes
    }
    
    trigger = { 
        has_energy_4 = yes
        NOT = { has_ruler_modifier = class_ability_hunter_master_tactitian }
    }
    
    effect = { 
        lose_energy_4 = yes
        add_ruler_modifier = {
            name = class_ability_hunter_master_tactitian
            duration = 3650
        }
    }
}
# Hunter - Camouflage
custom_button = {
    name = class_ability_hunter_3
    tooltip = RULER_CLASS_ABILITY_HUNTER_3_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_hunter = yes
    }
    
    trigger = { 
        has_energy_5 = yes
        NOT = { has_ruler_modifier = class_ability_hunter_camouflage }
    }
    
    effect = { 
        lose_energy_5 = yes
        add_ruler_modifier = {
            name = class_ability_hunter_camouflage
            duration = 3650
        }
    }
}

# Shaman - Elemental Oath
custom_button = {
    name = class_ability_shaman_1
    tooltip = RULER_CLASS_ABILITY_SHAMAN_1_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_shaman = yes
    }
    
    trigger = { 
        has_energy_4 = yes
        NOT = { has_ruler_modifier = class_ability_shaman_elemental_oath }
    }
    
    effect = { 
        lose_energy_4 = yes
        add_ruler_modifier = {
            name = class_ability_shaman_elemental_oath
            duration = 3650
        }
    }
}
# Shaman - Echo of the Elements
custom_button = {
    name = class_ability_shaman_2
    tooltip = RULER_CLASS_ABILITY_SHAMAN_2_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_shaman = yes
    }
    
    trigger = { 
        has_energy_3 = yes
        NOT = { has_ruler_modifier = class_ability_shaman_echo_of_the_elements }
    }
    
    effect = { 
        lose_energy_3 = yes
        add_ruler_modifier = {
            name = class_ability_shaman_echo_of_the_elements
            duration = 3650
        }
    }
}
# Astral Shift
custom_button = {
    name = class_ability_shaman_3
    tooltip = RULER_CLASS_ABILITY_SHAMAN_3_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_shaman = yes
    }
    
    trigger = { 
        has_energy_4 = yes
        NOT = { has_ruler_modifier = class_ability_shaman_astral_shift }
    }
    
    effect = { 
        lose_energy_4 = yes
        add_ruler_modifier = {
            name = class_ability_shaman_astral_shift
            duration = 3650
        }
    }
}

# Death Knight - Necrotic Aura
custom_button = {
    name = class_ability_death_knight_1
    tooltip = RULER_CLASS_ABILITY_DEATH_KNIGHT_1_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_death_knight = yes
    }
    
    trigger = { 
        has_energy_3 = yes
        NOT = { has_ruler_modifier = class_ability_death_knight_necrotic_aura }
    }
    
    effect = { 
        lose_energy_3 = yes
        add_ruler_modifier = {
            name = class_ability_death_knight_necrotic_aura
            duration = 3650
        }
    }
}
# Death Knight - Death Siphon
custom_button = {
    name = class_ability_death_knight_2
    tooltip = RULER_CLASS_ABILITY_DEATH_KNIGHT_2_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_death_knight = yes
    }
    
    trigger = { 
        has_energy_5 = yes
        NOT = { has_ruler_modifier = class_ability_death_knight_death_siphon }
    }
    
    effect = { 
        lose_energy_5 = yes
        add_ruler_modifier = {
            name = class_ability_death_knight_death_siphon
            duration = 3650
        }
        
        if = {
            limit = {
                is_at_war = yes
            }
            
            every_war_enemy_country = {
                add_ruler_modifier = {
                    name = class_ability_death_knight_death_siphon_enemy
                    duration = 3650
                }
            }
        }
        else = {
            custom_tooltip = DEATH_SIPHON_PEACE_TT
        }
    }
}
# Death Knight - Icy Grip
custom_button = {
    name = class_ability_death_knight_3
    tooltip = RULER_CLASS_ABILITY_DEATH_KNIGHT_3_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_death_knight = yes
    }
    
    trigger = { 
        has_energy_5 = yes
        NOT = { has_ruler_modifier = class_ability_death_knight_icy_grip }
    }
    
    effect = { 
        lose_energy_5 = yes
        add_ruler_modifier = {
            name = class_ability_death_knight_icy_grip
            duration = 3650
        }
        
        custom_tooltip = ICY_GRIP_TT
        hidden_effect = {
            every_owned_province = {
                limit = {
                    culture = ROOT
                }
                add_province_modifier = {
                    name = class_ability_death_knight_icy_grip_prov
                    duration = 3650
                }
            }
        }
    }
}

# Monk - Guard
custom_button = {
    name = class_ability_monk_1
    tooltip = RULER_CLASS_ABILITY_MONK_1_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_monk = yes
    }
    
    trigger = { 
        has_energy_3 = yes
        NOT = { has_ruler_modifier = class_ability_monk_guard }
    }
    
    effect = { 
        lose_energy_3 = yes
        add_ruler_modifier = {
            name = class_ability_monk_guard
            duration = 3650
        }
    }
}
# Monk - Power Strikes
custom_button = {
    name = class_ability_monk_2
    tooltip = RULER_CLASS_ABILITY_MONK_2_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_monk = yes
    }
    
    trigger = { 
        has_energy_5 = yes
        NOT = { has_ruler_modifier = class_ability_monk_power_strikes }
    }
    
    effect = { 
        lose_energy_5 = yes
        add_ruler_modifier = {
            name = class_ability_monk_power_strikes
            duration = 3650
        }
    }
}
# Monk - Ironskin Brew
custom_button = {
    name = class_ability_monk_3
    tooltip = RULER_CLASS_ABILITY_MONK_3_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_monk = yes
    }
    
    trigger = { 
        has_energy_4 = yes
        NOT = { has_ruler_modifier = class_ability_monk_ironskin_brew }
    }
    
    effect = { 
        lose_energy_4 = yes
        add_ruler_modifier = {
            name = class_ability_monk_ironskin_brew
            duration = 3650
        }
    }
}

# Demon Hunter - Demon Spikes
custom_button = {
    name = class_ability_demon_hunter_1
    tooltip = RULER_CLASS_ABILITY_DEMON_HUNTER_1_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_demon_hunter = yes
    }
    
    trigger = { 
        has_energy_4 = yes
        NOT = { has_ruler_modifier = class_ability_demon_hunter_demon_spikes }
    }
    
    effect = { 
        lose_energy_4 = yes
        add_ruler_modifier = {
            name = class_ability_demon_hunter_demon_spikes
            duration = 3650
        }
        
        custom_tooltip = DEMON_SPIKES_TT
        hidden_effect = {
            every_owned_province = {
                limit = {
                    culture = ROOT
                }
                add_province_modifier = {
                    name = class_ability_demon_hunter_demon_spikes_prov
                    duration = 3650
                }
            }
        }
    }
}
# Demon Hunter - Soul Cleave
custom_button = {
    name = class_ability_demon_hunter_2
    tooltip = RULER_CLASS_ABILITY_DEMON_HUNTER_2_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_demon_hunter = yes
    }
    
    trigger = { 
        has_energy_5 = yes
        NOT = { has_ruler_modifier = class_ability_demon_hunter_soul_cleave }
    }
    
    effect = { 
        lose_energy_5 = yes
        add_ruler_modifier = {
            name = class_ability_demon_hunter_soul_cleave
            duration = 3650
        }
    }
}
# Demon Hunter - Spectral Sight
custom_button = {
    name = class_ability_demon_hunter_3
    tooltip = RULER_CLASS_ABILITY_DEMON_HUNTER_3_HOVER_TT
    
    potential = {
        has_class_abilities_window_open = yes
        ruler_is_demon_hunter = yes
    }
    
    trigger = { 
        has_energy_3 = yes
        NOT = { has_ruler_modifier = class_ability_demon_hunter_spectral_sight }
    }
    
    effect = { 
        lose_energy_3 = yes
        add_ruler_modifier = {
            name = class_ability_demon_hunter_spectral_sight
            duration = 3650
        }
    }
}